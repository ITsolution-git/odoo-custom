<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>
		<!-- Email Template-->
		<record model="ir.ui.view" id="email_template_mailbox_form">
			<field name="name">email_template.mailbox.form</field>
			<field name="model">email_template.mailbox</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Outbox">
					<group col="4" colspan="2">
						<field name="email_from" colspan="4" select="1"/>
						<field name="email_cc" colspan="4" select="1"/>
						<field name="date_mail" colspan="4" select="2"/>
					</group>
					<group col="4" colspan="2">
						<field name="email_to" colspan="4" required="1" select="1" />
						<field name="email_bcc" colspan="4" select="2"/>
						<field name="subject" colspan="4" select="1"/>
					</group>
					<notebook colspan="4">
						<page string="Standard Body">
							<separator colspan="4" string="Standard Body" />
							<notebook colspan="4">
								<page string="Standard Body (Text)">
									<field name="body_text" nolabel="1" colspan="4" select="1"/>
								</page>
								<page string="Body (HTML-Web Client Only)">
									<field name="body_html" nolabel="1" colspan="4" />
									<!--<label string="Note: HTML body can't be edited with GTK desktop client." colspan="4"/>
								--></page>

							</notebook>
						</page>


						<page string="Attachments">
							<group col="4">
								<separator colspan="4" string="Attachments" />
								<field name="attachments_ids" colspan="4" nolabel="1" />
							</group>
						</page>
						<page string="Advanced">
							<group col="4">
								<field name="account_id" colspan="2" />
								<field name="server_ref" colspan="2" />
								<field name="mail_type" colspan="2" />
								<field name="folder" colspan="2" select="2"/>
								<separator string="History" colspan="4" />
								<field name="history" nolabel="1" colspan="4"/>
							</group>
						</page>
					</notebook>
					<separator colspan="4" string="" />
					<group col="4" colspan="4">
						<field name="state" colspan="2" readonly="1" />
						<button name="complete_mail" type="object" string="Download Full Mail" colspan="2" states="read,unread" />
						<button name="send_this_mail" type="object" string="Send Mail" />
					</group>
				</form>
			</field>
		</record>

		<!--============================================= TREE VIEWS =============================================-->
		<!--DRAFTS-->
		<record model="ir.ui.view" id="email_template_drafts_tree">
			<field name="name">email_template.mailbox.draftstree</field>
			<field name="model">email_template.mailbox</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Drafts">
					<field name="user" />
					<field name="email_from" select="1" />
					<field name="subject" select="1" />
					<field name="attachments_ids" select="2" />
					<field name="date_mail" select="2" />
				</tree>
			</field>
		</record>
		<!--OUTBOX-->
		<record model="ir.ui.view" id="email_template_outbox_tree">
			<field name="name">email_template.mailbox.outboxtree</field>
			<field name="model">email_template.mailbox</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Outbox">
					<field name="user" />
					<field name="email_from" select="1" />
					<field name="subject" select="1" />
					<field name="attachments_ids" select="2" />
					<field name="date_mail" select="2" />
				</tree>
			</field>
		</record>
		<!--SENT-->
		<record model="ir.ui.view" id="email_template_sentbox_tree">
			<field name="name">email_template.mailbox.sentboxtree</field>
			<field name="model">email_template.mailbox</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Sent">
					<field name="user" />
					<field name="email_from" select="1" />
					<field name="subject" select="1" />
					<field name="attachments_ids" select="2" />
					<field name="date_mail" select="2" />
				</tree>
			</field>
		</record>
		<!--TRASH-->
		<record model="ir.ui.view" id="email_template_trashbox_tree">
			<field name="name">email_template.mailbox.trashboxtree</field>
			<field name="model">email_template.mailbox</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Trash">
					<field name="user" />
					<field name="email_from" select="1" />
					<field name="subject" select="1" />
					<field name="attachments_ids" select="2" />
					<field name="date_mail" select="2" />
				</tree>
			</field>
		</record>

        <record id="view_email_template_mailbox_search" model="ir.ui.view">
           <field name="name">email_template.mailbox.search</field>
           <field name="model">email_template.mailbox</field>
           <field name="type">search</field>
           <field name="arch" type="xml">
               <search string="Mailboxes">
                    <filter icon="terp-crm" string="Drafts" name="draft" domain="[('folder','=','drafts']"/>
                    <filter icon="terp-crm" string="Outbox" name="outbox" domain="[('folder','=','outbox')]"/>
                    <separator orientation="vertical"/>
                    <filter icon="terp-crm" string="Sent" domain="[('folder','=','sent')]"/>
                    <filter icon="terp-crm" string="Trash" domain="[('folder','=','trash')]"/>
                    <separator orientation="vertical"/>
                    <filter icon="terp-crm" string="Not Applicable" domain="[('state','=','na')]"/>
                    <filter icon="terp-crm" string="Sending" domain="[('state','=','sending')]"/>
                    <separator orientation="vertical"/>
                    <field name="email_from" select="1"/>
                    <field name="email_to" select="1"/>
                    <field name="subject" select="1"/>
               </search>
           </field>
        </record>

        <record model="ir.actions.act_window" id="action_email_template_mailbox">
            <field name="name">Mailbox</field>
            <field name="res_model">email_template.mailbox</field>
            <field name="view_type">form</field>
            <field name="view_mode">form,tree</field>
            <field name="view_id" ref="email_template_outbox_tree" />
            <field name="context">{'group_by': [], 'search_default_draft': 1, 'search_default_outbox': 1}</field>
            <field name="search_view_id" ref="view_email_template_mailbox_search"/>
        </record>

		<!--======================================== MENUS ========================================-->
		<menuitem name="MailBox" id="menu_email_template_mailbox_all_main2" parent="menu_email_template" />
		<menuitem name="Personal" id="menu_email_template_personal" parent="menu_email_template_mailbox_all_main2" />
        <menuitem name="Mails" id="menu_email_template_personal_mails" parent="menu_email_template_personal" action="action_email_template_mailbox"/>
		<menuitem name="Company" id="menu_email_template_company" parent="menu_email_template_mailbox_all_main2" />
        <menuitem name="Mails" id="menu_email_template_company_mails" parent="menu_email_template_company" action="action_email_template_mailbox"/>

	</data>
</openerp>




