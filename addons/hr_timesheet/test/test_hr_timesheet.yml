-
  In order to test hr_timesheet Module in OpenERP, I make "Sign In/Sign Out for Project" to encode and
  track time spent on the different projects.
-
  I create employee "Quentin Paolino" as "User".
-
  !record {model: hr.employee, id: hr.employee2}:
    address_home_id: base.res_partner_address_8
    name: Quentin Paolino
    parent_id: 'hr.employee3'
    user_id: 'base.user_demo'
-
  On "Sign In/Sign Out by Project" wizard i click on "Sign In/Sign Out" button of this wizard.
-
  !python {model: hr.sign.in.project}: |
    uid = ref('base.user_demo')
    self.check_state(cr, uid, [ref("hr.employee2")], {"active_ids": [ref("hr_timesheet.action_hr_timesheet_sign_in")]})
-
  I select start date and Perform start work on project.
-
  !python {model: hr.sign.in.project}: |
      import time
      uid = ref('base.user_demo')
      new_id = self.create(cr, uid, {'emp_id': ref('hr.employee2'), 'name': 'Quentin Paolino', 'server_date': time.strftime('%Y-%m-%d %H:%M:%S'), 'state': 'absent'})
      self.sign_in_result(cr, uid, [new_id], context)
-
  I create a timesheet line manually to check several default values.
  I also assign proper date and user for that line.
-
  !python {model: hr.analytic.timesheet}: |
     import time
     uid = ref('base.user_demo')
     current_date = time.strftime('%Y-%m-%d')
     vals = {'name': 'Worked on project',
             'user_id': ref('base.user_demo'),
             'account_id': ref('account.analytic_project_1_development'),
             'unit_amount': 5.00,
             'journal_id': ref('analytic_journal')
     }
     line_id = self.create(cr, uid, vals, None)
     res = self.on_change_date(cr, uid, [line_id], current_date)
     values = dict([('date', current_date)] + res['value'].items())
     res1 = self.on_change_user_id(cr, uid, [line_id], ref('base.user_root'))
     values.update(dict([('user_id', ref('base.user_root'))] + res1['value'].items()))
     self.write(cr, uid, [line_id], values, None)
-
  To stop work I click on "Sign In/Sign Out" button of "Sign In/Sign Out by Project" wizard.
  Which check state in hr attendace form for user.
-
  !python {model: hr.sign.in.project}: |
       uid = ref('base.user_demo')
       ids = self.search(cr, uid, [('emp_id', '=', ref('hr.employee2')),('name', '=', 'Quentin Paolino')])
       self.check_state(cr, uid, ids, {"active_ids": [ref("hr_timesheet.action_hr_timesheet_sign_in")]
             })
-
  My work for this project 1 is over and I stop working by clicking on "Stop Work" button of this wizard.
-
  !python {model: hr.sign.out.project}: |
       import time
       from datetime import datetime, date, timedelta
       uid = ref('base.user_demo')
       new_id = self.create(cr, uid, {'account_id': ref('account.analytic_project_1'), 'analytic_amount': 7.0, 'date': (datetime.now()+timedelta(1)).strftime('%Y-%m-%d %H:%M:%S'), 'date_start': time.strftime('%Y-%m-%d %H:%M:%S'), 'info': 'Create Yaml for hr module', 'name': 'Francline', 'server_date': time.strftime('%Y-%m-%d %H:%M:%S'), 'state': 'absent'})
       self.sign_out_result_end(cr, uid, [new_id], context)