<?xml version="1.0"?>
<openerp>
    <data>
	# ------------------------------------------------------
    # Meetings Categories
    # ------------------------------------------------------

    <record id="crm_meeting_categ_action" model="ir.actions.act_window">
        <field name="name">Meeting Categories</field>
        <field name="res_model">crm.case.categ</field>
        <field name="view_type">form</field>
        <field name="view_id"  ref="crm.crm_case_categ_tree-view"/>
		<field name="domain">[('object_id.model', '=', 'crm.meeting')]</field>
		<field name="context">{'object_id':'crm.meeting'}</field>
    </record>
     <menuitem action="crm_meeting_categ_action" id="menu_crm_case_meeting-act" parent="crm.menu_crm_case_categ"/>

    # ------------------------------------------------------
    # Meetings
    # ------------------------------------------------------

    <record model="ir.ui.view" id="crm_case_form_view_meet">
        <field name="name">CRM - Meetings Form</field>
        <field name="model">crm.meeting</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form string="Meetings">            	
            	<group col="6" colspan="4">
                    <field name="name" select="1" string="Summary"
            			colspan="4" />   
                    <field name="categ_id"/>                 
            		<field name="date" string="Start Date" required="1" />
            		<field name="duration" widget="float_time" />
            		<field name="date_deadline" string="End Date" required="1" />
            		
            		
            	</group>
            	<notebook colspan="4">
            		<page string="Meeting">
            			<separator string="Description" colspan="4" />
            			<field name="description" nolabel="1" colspan="4" />
                        <separator colspan="4"/>
                        <group col="8" colspan="4">
                            <field name="state" select="2"/>
                            <button name="case_close" string="Done" states="open,draft,pending" type="object"  icon="gtk-close"/>
                            <button name="case_open" string="Open" states="draft,pending" type="object"  icon="gtk-go-forward"/>
                            <button name="case_cancel" string="Cancel" states="draft,open,pending" type="object"  icon="gtk-cancel"/>
                            <button name="case_pending" string="Pending" states="draft,open" type="object"  icon="gtk-media-pause"/>
                            <button name="case_escalate" string="Escalate" states="open,draft,pending" type="object"  icon="gtk-go-up"/>
                            <button name="case_reset" string="Reset to Draft" states="done,cancel" type="object"  icon="gtk-convert"/>
                        </group>
            		</page>            		
            		<page string="Other Information">
            			<field name="priority"/>
            			<field name="user_id" on_change="onchange_user_id(user_id)"/>
                        <field name="section_id" widget="selection"
            			/>            			
            		</page>
            	</notebook>
    
                            	
            </form>
        </field>
    </record>

    <record model="ir.ui.view" id="crm_case_tree_view_meet">
        <field name="name">CRM - Meetings Tree</field>
        <field name="model">crm.meeting</field>
        <field name="type">tree</field>
        <field name="arch" type="xml">
            <tree string="Meetings"  colors="red:state=='open';black:state in ('draft', 'cancel','done','pending')">
                <field name="id" widget="char"/>
                <field name="name" string="Title"/>
                <field name="date" string="Meeting Date"/>
                <field name="section_id" />
                <field name="priority"/>
                <field name="categ_id"/>
                <field name="user_id"/>
                <field name="state"/>                
            </tree>
        </field>
    </record>
    <record model="ir.ui.view" id="crm_case_calendar_view_meet">
        <field name="name">CRM - Meetings Calendar</field>
        <field name="model">crm.meeting</field>
        <field name="type">calendar</field>
        <field name="priority" eval="2"/>
        <field name="arch" type="xml">
            <calendar string="Meetings" date_start="date" color="user_id" date_delay="duration">
                <field name="name"/>
                <field name="partner_id"/>
                <field name="section_id" widget="selection"/>
            </calendar>
        </field>
    </record>

    <record id="crm_case_gantt_view_meet" model="ir.ui.view">
        <field name="name">CRM - Meetings Gantt</field>
        <field name="model">crm.meeting</field>
        <field name="type">gantt</field>
        <field name="arch" type="xml">
            <gantt color="user_id" date_delay="duration" date_start="date" string="Meetings">
               <level object="crm.meeting" link="id" domain="[]">
                   <field name="name"/>
                   <field name="partner_id"/>
                </level>
            </gantt>
        </field>
    </record>
    <record id="view_crm_case_meetings_filter" model="ir.ui.view">
        <field name="name">CRM - Meetings Search</field>
        <field name="model">crm.meeting</field>
        <field name="type">search</field>
        <field name="arch" type="xml">
            	<search string="Search Meetings">
               		<group col="12" colspan="4">
               			<filter icon="terp-crm" string="My Meetings" domain="[('user_id','=',uid)]" help="My Meetings"/>
	               		<filter icon="terp-crm" string="Current" domain="[('state','in',('draft', 'open'))]" default="1" help="Current Meetings"/>
	                    <filter icon="terp-crm" string="Confirmed" domain="[('state','=','done')]" help="Confirmed Meetings"/>
	               		<separator orientation="vertical"/>
	               		<field name="name" select="1" string="Subject"/>
	               		<field name="partner_id" select="1"/>
	               		<field name="section_id" default="context.get('section_id', False)" select="1" widget="selection">
							<filter icon="terp-crm"
                               domain="[('section_id','=',context.get('section_id',False))]"
                               help="My section"
                           />
						 </field>
	               		<field name="user_id" select="1" widget="selection"/>
	               	</group>
                </search>
        	</field>
    	</record>
	</data>
</openerp>
