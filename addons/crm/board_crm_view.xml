<?xml version="1.0"?>
<openerp>
	<data>
		<record model="board.note.type" id="note_crm_type">
			<field name="name">CRM Configuration</field>
		</record>
		<record model="ir.ui.view" id="view_crm_opportunity_user_graph1">
			<field name="name">crm.opportunity.user.graph1</field>
			<field name="model">crm.lead.report</field>
			<field name="type">graph</field>
			<field name="arch" type="xml">
				<graph string="Opportunities by User and Section" type="pie">
					<field name="state"/>
					<field name="nbr" operator="+"/>
				</graph>
			</field>
		</record>
		<record model="ir.actions.act_window" id="act_my_leads">
			<field name="res_model">crm.lead</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" ref="crm.crm_case_tree_view_oppor"/>
            <field name="domain">[('user_id','=',uid),('state','!=','pending'),('state','!=','cancel')]</field>
		</record>

		<record model="ir.actions.act_window" id="act_my_meetings">
			<field name="res_model">crm.meeting</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" ref="crm.crm_case_tree_view_meet"/>
            <field name="domain">[('user_id','=',uid),('state','!=','cancel'),('date','ilike',time.strftime("%Y-%m"))]</field>
		</record>

		<record model="ir.actions.act_window" id="act_my_leads_stage">
			<field name="res_model">crm.lead.report</field>
			<field name="view_type">form</field>
			<field name="view_mode">graph,tree,form</field>
			<field name="view_id" ref="view_report_crm_lead_graph"/>
            <field name="domain">[('user_id','=',uid),('state','!=','pending'),('state','!=','cancel')]</field>
		</record>

		<record model="ir.actions.act_window" id="act_sales_pipeline">
			<field name="res_model">crm.lead.report</field>
			<field name="view_type">form</field>
			<field name="view_mode">graph,tree,form</field>
			<field name="view_id" ref="view_crm_opportunity_user_graph1"/>
			<field name="domain">[('user_id','=',uid),('state','!=','pending'),('state','!=','cancel'),('type', '=', 'opportunity')]</field>
		</record>

		<record model="ir.ui.view" id="board_crm_form">
			<field name="name">CRM - Dashboard Form</field>
			<field name="model">board.board</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Connecting Dashboard">
					<hpaned>
						<child1>
							<action
								string="My Opportunities"
								name="%(act_my_leads)d"
								colspan="4"
								height="150"
								width="510"/>
							<action
								string="My Meetings"
								name="%(act_my_meetings)d"
								height="150"
								colspan="4"/>
						</child1>
						<child2>
							<action
                                string="Revenues by stage"
                                name="%(act_my_leads_stage)d"
                                colspan="4"/>
                            <action
                                string="My Sales Pipeline"
                                name="%(act_sales_pipeline)d"
                                colspan="4"/>
                        </child2>
                    </hpaned>
                </form>
            </field>
        </record>
        <record model="ir.actions.act_window" id="open_board_crm">
            <field name="name">CRM Dashboard</field>
            <field name="res_model">board.board</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="usage">menu</field>
            <field name="view_id" ref="board_crm_form"/>
        </record>
	    <menuitem icon="terp-graph" id="board.menu_dasboard" name="Dashboard" sequence="0" parent="base.next_id_64"/>
        <menuitem
            name="Connecting Dashboard" parent="board.menu_dasboard"
            action="open_board_crm"
            sequence="1"
            id="menu_board_crm" icon="terp-graph"/>
    </data>
</openerp>
