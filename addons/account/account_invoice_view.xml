<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <!--
        Invoices
        -->
        <record id="view_invoice_line_calendar" model="ir.ui.view">
            <field name="name">account.invoice.calendar</field>
            <field name="model">account.invoice</field>
            <field name="type">calendar</field>
            <field name="arch" type="xml">
                <calendar string="Invoices" color="journal_id" date_start="date_invoice">
                    <field name="partner_id"/>
                    <field name="amount_total"/>
                </calendar>
            </field>
        </record>

        <record model="ir.ui.view" id="view_invoice_graph">
            <field name="name">account.invoice.graph</field>
            <field name="model">account.invoice</field>
            <field name="type">graph</field>
            <field name="arch" type="xml">
                <graph string="Invoices" type="bar">
                    <field name="partner_id"/>
                    <field name="amount_total" operator="+"/>
                </graph>
            </field>
        </record>

        <record id="view_invoice_line_tree" model="ir.ui.view">
            <field name="name">account.invoice.line.tree</field>
            <field name="model">account.invoice.line</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Invoice Line">
                    <field name="name"/>
                    <field name="account_id" groups="account.group_account_user"/>
                    <field name="quantity"/>
                    <field name="uos_id" groups="product.group_uom"/>
                    <field name="price_unit"/>
                    <field name="discount" groups="sale.group_discount_per_so_line"/>
                    <field name="price_subtotal"/>
                </tree>
            </field>
        </record>

        <record id="view_invoice_line_form" model="ir.ui.view">
            <field name="name">account.invoice.line.form</field>
            <field name="model">account.invoice.line</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Invoice Line" version="7.0">
                    <group col="4">
                        <field name="product_id" on_change="product_id_change(product_id, uos_id, quantity, name, parent.type, parent.partner_id, parent.fiscal_position, price_unit, parent.currency_id, context, parent.company_id)"/>
                        <field name="name"/>
                        <label string="Quantity" for="quantity" align="1.0"/>
                        <div>
                            <field name="quantity" class="oe_inline"/>
                            <field name="uos_id" class="oe_inline"
                              on_change="uos_id_change(product_id, uos_id, quantity, name, parent.type, parent.partner_id, parent.fiscal_position, price_unit, parent.currency_id, context, parent.company_id)"/>
                        </div>
                        <field name="price_unit"/>
                        <field domain="[('company_id', '=', parent.company_id), ('journal_id', '=', parent.journal_id), ('type', '&lt;&gt;', 'view')]" name="account_id" on_change="onchange_account_id(product_id, parent.partner_id, parent.type, parent.fiscal_position,account_id)" groups="account.group_account_user"/>
                        <field name="discount" groups="sale.group_discount_per_so_line"/>
                        <field name="invoice_line_tax_id" context="{'type':parent.type}" domain="[('parent_id','=',False),('company_id', '=', parent.company_id)]" widget="many2many_tags"/>
                        <field domain="[('type','&lt;&gt;','view'), ('company_id', '=', parent.company_id), ('parent_id', '!=', False)]" name="account_analytic_id" groups="analytic.group_analytic_accounting"/>
                        <field name="company_id" groups="base.group_multi_company" readonly="1"/>
                    </group>
                    <separator string="Notes"/>
                    <field name="note"/>
                </form>
            </field>
        </record>

        <record id="view_invoice_tax_tree" model="ir.ui.view">
            <field name="name">account.invoice.tax.tree</field>
            <field name="model">account.invoice.tax</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Manual Invoice Taxes">
                    <field name="sequence"/>
                    <field name="manual"/>
                    <field name="name"/>
                    <field name="account_id" groups="base.group_account_user"/>
                    <field name="base"/>
                    <field name="amount"/>
                </tree>
            </field>
        </record>

        <record id="view_invoice_tax_form" model="ir.ui.view">
            <field name="name">account.invoice.tax.form</field>
            <field name="model">account.invoice.tax</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Manual Invoice Taxes" version="7.0">
                    <group col="4">
                        <field name="name"/>
                        <field name="sequence"/>
                        <field name="account_id" groups="account.group_account_user"/>
                        <field name="manual"/>
                        <field name="amount"/>
                        <field name="base" readonly="0"/>
                        <separator colspan="4" string="Tax Codes"/>
                        <field name="base_code_id"/>
                        <field name="base_amount"/>
                        <field name="tax_code_id"/>
                        <field name="tax_amount"/>
                        <field name="factor_base" invisible="True"/>
                        <field name="factor_tax" invisible="True"/>
                    </group>
                </form>
            </field>
        </record>

        <record id="invoice_tree" model="ir.ui.view">
            <field name="name">account.invoice.tree</field>
            <field name="model">account.invoice</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree colors="blue:state == 'draft';black:state in ('proforma','proforma2','open');gray:state == 'cancel'" string="Invoice">
                    <field name="date_invoice"/>
                    <field name="number"/>
                    <field name="partner_id" groups="base.group_user"/>
                    <field name="reference" invisible="1"/>
                    <field name="name" invisible="1"/>
                    <field name="journal_id" invisible="1"/>
                    <field name="period_id" invisible="1" groups="account.group_account_user"/>
                    <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                    <field name="user_id"/>
                    <field name="date_due"/>
                    <field name="origin"/>
                    <field name="currency_id"/>
                    <field name="residual" sum="Residual Amount"/>
                    <field name="amount_untaxed" sum="Untaxed Amount"/>
                    <field name="amount_total" sum="Total Amount"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="invoice_supplier_form" model="ir.ui.view">
            <field name="name">account.invoice.supplier.form</field>
            <field name="model">account.invoice</field>
            <field name="type">form</field>
            <field name="priority">2</field>
            <field name="arch" type="xml">
                <form version="7.0">
                <header>
                    <button name="invoice_open" states="draft" string="Validate" class="oe_form_button_hi"/>
                    <button name="invoice_open" states="proforma2" string="Validate"/>
                    <button name="%(action_account_invoice_refund)d" type='action' string='Ask Refund' states='open,paid'/>
                    <button name="invoice_cancel" states="draft,proforma2,sale,open" string="Cancel" groups="base.group_no_one"/>
                    <button name="action_cancel_draft" states="cancel" string="Set to Draft" type="object"/>
                    <button name='%(action_account_state_open)d' type='action' string='Re-Open' groups="account.group_account_invoice" attrs="{'invisible':['|', ('state','&lt;&gt;','paid'), ('reconciled', '=', True)]}" help="This button only appears when the state of the invoice is 'paid' (showing that it has been fully reconciled) and auto-computed boolean 'reconciled' is False (depicting that it's not the case anymore). In other words, the invoice has been dereconciled and it does not fit anymore the 'paid' state. You should press this button to re-open it and let it continue its normal process after having resolved the eventual exceptions it may have created."/>
                    <field name="state" widget="statusbar" statusbar_visible="draft,open,paid" statusbar_colors='{"proforma":"blue","proforma2":"blue"}'/>
                </header>
                <sheet string="Supplier Invoice">
                    <group>
                        <group>
                            <field string="Supplier" name="partner_id"
                              on_change="onchange_partner_id(type,partner_id,date_invoice,payment_term, partner_bank_id,company_id)"
                              context="{'default_customer': 0, 'search_default_supplier': 1, 'default_supplier': 1}"
                              domain="[('supplier', '=', True)]"/>
                            <field name="fiscal_position" widget="selection"/>
                        </group>
                        <group>
                            <field name="number"/>
                            <field name="date_invoice"/>
                            <field name="period_id" domain="[('state', '=', 'draft')]"
                                groups="account.group_account_user" widget="selection"/>
                            <field name="journal_id" on_change="onchange_journal_id(journal_id)" widget="selection"
                                groups="account.group_account_user"/>
                            <field domain="[('company_id', '=', company_id), ('type', '=', 'payable')]"
                                name="account_id" groups="account.group_account_user"/>
                            <field name="currency_id"/>
                            <field name="type" invisible="1"/>
                        </group>
                        <group>
                            <label for="reference"/>
                            <div>
                                <field name="reference_type"/>
                                <field name="reference" placeholder="Payment Reference"/>
                            </div>
                            <field name="date_due"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Invoice">
                            <field context="{'partner_id': partner_id, 'price_type': 'price_type' in dir() and price_type or False, 'type': type}" name="invoice_line">
                                <tree string="Invoice lines">
                                    <field name="product_id" on_change="product_id_change(product_id, uos_id, quantity, name, parent.type, parent.partner_id, parent.fiscal_position, price_unit, parent.currency_id, context, parent.company_id)"/>
                                    <field domain="[('company_id', '=', parent.company_id), ('journal_id', '=', parent.journal_id), ('type', '&lt;&gt;', 'view')]" name="account_id" on_change="onchange_account_id(product_id,parent.partner_id,parent.type,parent.fiscal_position,account_id)" groups="base.group_account_user"/>
                                    <field name="invoice_line_tax_id" view_mode="2" context="{'type':parent.type}" domain="[('parent_id','=',False)]"/>
                                    <field domain="[('type','&lt;&gt;','view'), ('company_id', '=', parent.company_id), ('parent_id', '!=', False)]" name="account_analytic_id" groups="analytic.group_analytic_accounting"/>
                                    <field name="quantity"/>
                                    <field name="price_unit"/>
                                     <!-- Removed if subtotal is set -->
                                    <field name="price_subtotal"/>
                                    <field invisible="True" name="name"/>
                                    <field invisible="True" name="uos_id"/>
                                </tree>
                            </field>
                            <group>
                                <div>
                                    <field name="tax_line">
                                        <tree editable="bottom" string="Taxes">
                                            <field name="name"/>
                                            <field name="account_id" groups="account.group_account_invoice"/>
                                            <field name="base" on_change="base_change(base,parent.currency_id,parent.company_id,parent.date_invoice)" readonly="1"/>
                                            <field name="amount" on_change="amount_change(amount,parent.currency_id,parent.company_id,parent.date_invoice)"/>

                                            <field invisible="True" name="base_amount"/>
                                            <field invisible="True" name="tax_amount"/>
                                            <field name="factor_base" invisible="True"/>
                                            <field name="factor_tax" invisible="True"/>
                                        </tree>
                                    </field>
                                    <button name="button_reset_taxes" states="draft" string="Compute Taxes" type="object" icon="terp-stock_format-scientific" help="This action will erase taxes"/>
                                </div>
                                <group class="oe_subtotal_footer">
                                    <field name="amount_untaxed"/>
                                    <field name="amount_tax"/>
                                    <field name="amount_total" class="oe_subtotal_footer_separator"/>

                                    <field name="residual" style="margin-top: 10px"/>
                                    <field name="reconciled" invisible="1"/>
                                </group>
                            </group>
                            <label for="comment" string="Terms and Conditions"/>
                            <field name="comment"/>
                        </page>
                        <page string="Other Info">
                            <group col="4">
                                <field domain="[('partner_id', '=', partner_id)]" name="partner_bank_id" on_change="onchange_partner_bank(partner_bank_id)"/>
                                <field name="company_id" on_change="onchange_company_id(company_id,partner_id,type,invoice_line,currency_id)" widget="selection" groups="base.group_multi_company"/>
                                <newline/>
                                <field name="payment_term" widget="selection"/>
                                <field name="name"/>
                                <newline/>
                                <field name="origin" placeholder="PO0025"/>
                                <field name="user_id"/>
                                <field name="move_id" groups="account.group_account_user"/>
                            </group>
                        </page>
                        <page string="Payments">
                            <field name="payment_ids">
                                <tree string="Payments">
                                    <field name="date" string="Payment Date"/>
                                    <field name="move_id"/>
                                    <field name="ref"/>
                                    <field name="name"/>
                                    <field name="journal_id"/>
                                    <field name="debit"/>
                                    <field name="credit"/>
                                    <field name="amount_currency"/>
                                    <field name="currency_id"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
                <footer>
                    <field name="message_ids" widget="ThreadView"/>
                </footer>
                </form>
            </field>
        </record>

        <record id="invoice_form" model="ir.ui.view">
            <field name="name">account.invoice.form</field>
            <field name="model">account.invoice</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form version="7.0">
                <header>
                    <button name="action_invoice_sent" type="object" string="Send by Email" states="open" attrs="{'invisible':['|',('sent','=',True), ('state', '=', 'draft')]}" class="oe_form_button_hi"/>
                    <button name="invoice_print" string="Print Invoice" type="object" states="open" attrs="{'invisible':['|',('sent','=',True), ('state', '=', 'draft')]}" class="oe_form_button_hi"/>
                    <button name="invoice_open" states="draft" string="Validate" class="oe_form_button_hi"/>
                    <button name="invoice_open" states="proforma2" string="Validate"/>
                    <button name="invoice_proforma2" states="draft" string="PRO-FORMA" groups="account.group_proforma_invoices"/>
                    <button name="%(action_account_invoice_refund)d" type='action' string='Refund Invoice' states='paid'/>
                    <button name="invoice_cancel" states="draft,proforma2,sale,open" string="Cancel" groups="base.group_no_one"/>
                    <button name="action_cancel_draft" states="cancel" string="Reset to Draft" type="object"/>
                    <button name='%(action_account_state_open)d' type='action' string='Re-Open' groups="account.group_account_invoice" attrs="{'invisible':['|', ('state','&lt;&gt;','paid'), ('reconciled', '=', True)]}" help="This button only appears when the state of the invoice is 'paid' (showing that it has been fully reconciled) and auto-computed boolean 'reconciled' is False (depicting that it's not the case anymore). In other words, the invoice has been dereconciled and it does not fit anymore the 'paid' state. You should press this button to re-open it and let it continue its normal process after having resolved the eventual exceptions it may have created."/>
                    <!--button name="%(account_invoices)d" string="Print Invoice" type="action" states="open,paid,proforma,sale,proforma2"/-->
                    <field name="state" widget="statusbar" nolabel="1" statusbar_visible="draft,open,paid" statusbar_colors='{"proforma":"blue","proforma2":"blue"}'/>
                </header>
                <sheet string="Invoice">
                    <h1>
                        <label string="Draft Invoice " attrs="{'invisible': [('state','not in',('draft',))]}"/>
                        <label string="Pro Forma Invoice " attrs="{'invisible': [('state','not in',('proforma','proforma2'))]}"/>
                        <label string="Invoice " attrs="{'invisible': [('state','in',('draft','proforma','proforma2'))]}"/>
                        <field name="number" readonly="1" class="oe_inline"/>
                    </h1>
                    <label string="Concerns" for="name" class="oe_edit_only"/>
                    <h2>
                        <field name="name" placeholder="Project XYZ"/>
                    </h2>
                    <field name="type" invisible="1"/>
                    <group>
                        <group>

                            <field string="Customer" name="partner_id"
                                on_change="onchange_partner_id(type,partner_id,date_invoice,payment_term, partner_bank_id,company_id)"
                                groups="base.group_user" context="{'search_default_customer': 1}"
                                domain="[('customer', '=', True)]"/>
                            <field name="fiscal_position" widget="selection" options='{"quick_create": false}'/>
                            <field name="payment_term" widget="selection"/>

                        </group>
                        <group>

                            <field name="date_invoice"/>
                            <field name="period_id" domain="[('state', '=', 'draft')]"
                                groups="account.group_account_user" widget="selection"/>
                            <field name="journal_id" groups="account.group_account_user"
                                on_change="onchange_journal_id(journal_id, context)" widget="selection"/>

                            <field domain="[('company_id', '=', company_id),('type','=', 'receivable')]"
                                name="account_id" groups="account.group_account_user"/>

                            <label for="currency_id"/>
                            <div>
                                <field name="currency_id" class="oe_inline"/>
                                <button name="%(action_account_change_currency)d" type="action"
                                  icon="terp-stock_effects-object-colorize"
                                  attrs="{'invisible':[('state','!=','draft')]}"
                                  groups="account.group_account_user"/>
                            </div>
                        </group>
                    </group>
                    <field name="sent" invisible="1"/>

                    <notebook colspan="4">
                        <page string="Invoice">
                            <field colspan="4" name="invoice_line" nolabel="1" widget="one2many_list" context="{'type': type}"/>
                            <group>
                                <div>
                                    <field name="tax_line" nolabel="1">
                                        <tree editable="bottom" string="Taxes">
                                            <field name="name"/>
                                            <field name="account_id" groups="account.group_account_user"/>
                                            <field name="base" on_change="base_change(base,parent.currency_id,parent.company_id,parent.date_invoice)" readonly="1"/>
                                            <field name="amount" on_change="amount_change(amount,parent.currency_id,parent.company_id,parent.date_invoice)"/>
                                            <field invisible="True" name="base_amount"/>
                                            <field invisible="True" name="tax_amount"/>
                                            <field name="factor_base" invisible="True"/>
                                            <field name="factor_tax" invisible="True"/>
                                        </tree>
                                    </field>
                                    <button name="button_reset_taxes" states="draft,proforma2" string="Compute Taxes"
                                        type="object" groups="account.group_account_user" icon="terp-stock_format-scientific"
                                        help="This action will erase taxes"/>
                                </div>
                                <group class="oe_subtotal_footer">
                                    <field name="amount_untaxed"/>
                                    <field name="amount_tax"/>
                                    <field name="amount_total" class="oe_subtotal_footer_separator"/>

                                    <field name="residual" style="margin-top: 10px" groups="account.group_account_user"/>
                                    <field name="reconciled" invisible="1"/>
                                </group>
                            </group>
                        </page>
                        <page string="Other Info">
                            <group col="4">
                                <field name="company_id" on_change="onchange_company_id(company_id,partner_id,type,invoice_line,currency_id)" widget="selection" groups="base.group_multi_company"/>
                                <newline/>
                                <field name="date_due"/>
                                <field name="user_id"/>
                                <newline/>
                                <field domain="[('partner_id.ref_companies', 'in', [company_id])]" name="partner_bank_id"/>
                                <field name="origin" placeholder="SO0032"/>
                                <field name="move_id" groups="account.group_account_user"/>
                            </group>
                            <field name="comment" placeholder="Add an additional information in the invoice..."/>
                        </page>
                        <page string="Payments">
                            <field name="payment_ids">
                                <tree string="Payments">
                                    <field name="date"/>
                                    <field name="move_id"/>
                                    <field name="ref"/>
                                    <field name="name"/>
                                    <field name="journal_id" groups="base.group_user"/>
                                    <field name="debit"/>
                                    <field name="credit"/>
                                    <field name="amount_currency"/>
                                    <field name="currency_id"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
                <footer>
                    <field name="message_ids" colspan="4" widget="ThreadView" nolabel="1"/>
                </footer>
                </form>
            </field>
        </record>

        <record id="view_account_invoice_filter" model="ir.ui.view">
            <field name="name">account.invoice.select</field>
            <field name="model">account.invoice</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Invoice">
                    <group>
                        <field name="number"
                            string="Invoice"
                            filter_domain="['|', ('number','ilike',self),('origin','ilike',self)]"/>
                        <separator orientation="vertical"/>
                        <filter name="draft" icon="terp-document-new" string="Draft" domain="[('state','=','draft')]" help="Draft Invoices"/>
                        <filter name="proforma" icon="terp-gtk-media-pause" string="Proforma" domain="[('state','=','proforma2')]" help="Proforma Invoices" groups="account.group_proforma_invoices"/>
                        <filter name="invoices" icon="terp-dolar" string="Invoices" domain="[('state','not in',['draft','cancel'])]" help="Proforma/Open/Paid Invoices"/>
                        <separator orientation="vertical"/>
                        <filter name="unpaid" icon="terp-dolar_ok!" string="Unpaid" domain="[('state','=','open')]" help="Unpaid Invoices"/>
                        <separator orientation="vertical"/>
                        <filter domain="[('user_id','=',uid)]" help="My Invoices" icon="terp-personal"/>
                        <separator orientation="vertical"/>
                        <field name="partner_id"/>
                        <field name="user_id" widget="selection" string="Salesperson"/>
                        <field name="journal_id" widget="selection"/>
                        <field name="period_id" string="Period"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By...">
                        <filter string="Partner" icon="terp-partner" domain="[]" context="{'group_by':'partner_id'}"/>
                        <filter string="Responsible" icon="terp-personal" domain="[]"  context="{'group_by':'user_id'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Journal" icon="terp-folder-orange" domain="[]" context="{'group_by':'journal_id'}"/>
                        <filter string="Status" icon="terp-stock_effects-object-colorize" domain="[]"  context="{'group_by':'state'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Period" icon="terp-go-month" domain="[]" context="{'group_by':'period_id'}"/>
                        <filter string="Invoice Date" icon="terp-go-month" domain="[]"  context="{'group_by':'date_invoice'}"/>
                        <filter string="Due Date" icon="terp-go-month" domain="[]"  context="{'group_by':'date_due'}"/>
                    </group>
               </search>
            </field>
        </record>

        <record id="action_invoice_tree" model="ir.actions.act_window">
            <field name="name">Invoices</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="view_id" ref="invoice_tree"/>
            <field name="context">{'type':'out_invoice'}</field>
            <field name="search_view_id" ref="view_account_invoice_filter"/>
        </record>

        <record id="action_invoice_tree_pending_invoice" model="ir.actions.act_window">
            <field name="name">Pending Invoice</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field name="view_id" ref="invoice_tree"/>
            <field name="context">{'type':'out_invoice'}</field>
            <field name="domain">[('state','=','draft')]</field>
           <!-- <field name="search_view_id" ref="view_account_invoice_filter"/>-->
        </record>

        <record id="action_invoice_tree_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_invoice_tree"/>
        </record>

        <record id="action_invoice_tree_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="invoice_form"/>
            <field name="act_window_id" ref="action_invoice_tree"/>
        </record>

        <record id="action_invoice_tree1" model="ir.actions.act_window">
            <field name="name">Customer Invoices</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','out_invoice')]</field>
            <field name="context">{'default_type':'out_invoice', 'type':'out_invoice', 'journal_type': 'sale'}</field>
            <field name="search_view_id" ref="view_account_invoice_filter"/>
            <field name="help">
                Click here to create a new Invoice.
                &lt;p&gt;
                The Invoice can be generated automatically from a sale order or a delivery order. The invoice can be send by email.
            </field>
        </record>


        <record id="action_invoice_tree1_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_invoice_tree1"/>
        </record>

        <record id="action_invoice_tree1_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="invoice_form"/>
            <field name="act_window_id" ref="action_invoice_tree1"/>
        </record>

        <menuitem action="action_invoice_tree1" id="menu_action_invoice_tree1" parent="menu_finance_receivables"/>

        <record id="action_invoice_tree2" model="ir.actions.act_window">
            <field name="name">Supplier Invoices</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','in_invoice')]</field>
            <field name="context">{'default_type': 'in_invoice', 'type': 'in_invoice', 'journal_type': 'purchase'}</field>
            <field name="search_view_id" ref="view_account_invoice_filter"/>
            <field name="help">Click here to create Supplier invoice.
                    &lt;p&gt;
                    you can control the invoice from your supplier according to what you purchased or received. OpenERP can also generate draft invoices automatically from purchase orders or receipts.</field>
        </record>
        <menuitem action="action_invoice_tree2" id="menu_action_invoice_tree2" parent="menu_finance_payables"/>

        <record id="action_invoice_tree3" model="ir.actions.act_window">
            <field name="name">Customer Refunds</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','out_refund')]</field>
            <field name="context">{'default_type':'out_refund', 'type':'out_refund', 'journal_type': 'sale_refund'}</field>
            <field name="search_view_id" ref="view_account_invoice_filter"/>
            <field name="help">
                Click here to create a new customer refund.
                &lt;p&gt;
                A refund is a document that credits an invoice completely or partially. You can also generate refunds and reconcile them directly from the invoice form.
            </field>
        </record>

        <record id="action_invoice_tree3_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_invoice_tree3"/>
        </record>

        <record id="action_invoice_tree3_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="invoice_form"/>
            <field name="act_window_id" ref="action_invoice_tree3"/>
        </record>
        <menuitem action="action_invoice_tree3" id="menu_action_invoice_tree3" parent="menu_finance_receivables"/>

        <record id="action_invoice_tree4" model="ir.actions.act_window">
            <field name="name">Supplier Refunds</field>
            <field name="res_model">account.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph</field>
            <field eval="False" name="view_id"/>
            <field name="domain">[('type','=','in_refund')]</field>
            <field name="context">{'default_type': 'in_refund', 'type': 'in_refund', 'journal_type': 'purchase_refund'}</field>
            <field name="search_view_id" ref="view_account_invoice_filter"/>
            <field name="help">Click here to create a new supplier refund.
                    &lt;p&gt;
                    Track Refund you receive from your supplier. You can also generate refunds and reconcile them directly from the invoice form.</field>
        </record>
        <menuitem action="action_invoice_tree4" id="menu_action_invoice_tree4" parent="menu_finance_payables"/>

        <act_window context="{'search_default_partner_id':[active_id], 'default_partner_id': active_id}" id="act_res_partner_2_account_invoice_opened" name="Invoices" res_model="account.invoice" src_model="res.partner"/>

        <act_window
           id="act_account_journal_2_account_invoice_opened"
           name="Unpaid Invoices"
           context="{'search_default_journal_id': [active_id], 'search_default_unpaid':1, 'default_journal_id': active_id}"
           res_model="account.invoice"
           src_model="account.journal"/>

    </data>
</openerp>
