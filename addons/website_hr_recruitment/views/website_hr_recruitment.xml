<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="header_jobs" model="ir.ui.view">
            <field name="name">header_jobs</field>
            <field name="type">qweb</field>
            <field name="inherit_id" ref="website.header"/>
            <field name="arch" type="xml">
                <data>
                    <xpath expr="(//li)[last()]" position="after">
                        <li class="pull-right"><a href="/jobs">Jobs</a></li>
                    </xpath>
                </data>
            </field>
        </record>
        <template id="jobs">
            <t t-call="website.layout">
                <t t-set="title">Jobs</t>
                <div class="container">
                    <section id="tables">
                        <div class="page-header">
                            <h1>Job Position</h1>
                        </div>
                        <t t-foreach="companies" t-as="company">
                            <div class="page-header">
                                <h1 class="text-center"><t t-esc="company.name"/></h1>
                            </div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Post Name</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-foreach="res_job" t-as="job">
                                        <tr t-if="job.company_id.id==company.id">
                                            <td>
                                                <a t-att-href="'/job/detail/%%s' %% job.id"><span class="lead"><t t-esc="job.name"/></span></a><br/>
                                                <span t-if="job.department_id"><t t-esc="job.department_id.name"/></span>
                                                <span><t t-esc="job.post_date"/></span>
                                            </td>
                                        </tr>
                                    </t>
                                </tbody>
                            </table>
                        </t>
                    </section>
                </div>
            </t>
        </template>
        <template id="detail">
            <t t-call="website.layout">
                <t t-set="title">Job Detail</t>
                <div class="span4 pull-right">
                    <ul class="pager">
                        <li><a t-att-href="'/jobs'">Back</a></li>
                    </ul>
                </div>
                <div class="container">
                    <div class="page-header">
                        <h1><t t-esc="job.name"/></h1>
                    </div>
                    <div class="row">
                        <div class="span12">
                            <h3>Description</h3>
                            <p t-if="job.description"><t t-esc="job.description"/></p>
                        </div>
                    </div>
                    <t t-call="website_hr_recruitment.applyjobpost"/>
                </div>
            </t>
        </template>
        <template id="applyjobpost">
            <t t-set="title">Apply Job</t>
            <section id="forms">
                <div class="page-header">
                    <h1>Apply</h1>
                </div>
                <div class="row">
                    <form class="form-horizontal well" action="/job/success" method="post" enctype="multipart/form-data">
                        <fieldset>
                            <input type="hidden" t-att-value="job.department_id.id" name="department_id"/>
                            <input type="hidden" t-att-value="job.id" name="job_id"/>
                            <input type="hidden" t-att-value="job.name" name="name"/>
                            <div class="control-group">
                                <input type="text" class="input-xlarge" id="nametxt" name="partner_name" required="true" placeholder="Name..."/>
                            </div>
                            <div class="control-group">
                                <input type="text" class="input-xlarge" id="emailtxt" name="email_from" required="true" placeholder="Email..."/>
                            </div>
                            <div class="control-group">
                                <textarea class="span8" style="margin-top:5px; height: 140px;" name="description" placeholder="Enter your comment..."> </textarea>
                            </div>
                            <div class="control-group">
                                <input class="input-file" id="fileInput" type="file" name="ufile" required="true"/>
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Save</button>
                                <button type="reset" class="btn"><a t-att-href="'/jobs'">Cancel</a></button>
                          </div>
                        </fieldset>
                    </form>
                </div>
            </section>
        </template>
        <template id="thankyou">
            <t t-call="website.layout">
                <t t-set="title">Thank You!</t>
                <div class="span4 pull-right">
                    <ul class="pager">
                        <li><a t-att-href="'/job/detail/%%s' %% jobid">Back</a></li>
                    </ul>
                </div>
                <section id="typography">
                    <div class="container">
                        <div class="row">
                            <h2 class="oe_slogan">You have successfully applied for job.</h2>
                        </div>
                    </div>
                </section>
            </t>
        </template>
     </data>
</openerp>
