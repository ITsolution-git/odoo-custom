<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="website_mail_jobs" model="mail.group">
            <field name="name">Jobs</field>
            <field name="public">public</field>
            <field name="description">Job Posts on your website</field>
        </record>

	<template id="job_footer_custom" inherit_id="website.layout" name="Custom Footer Job">
	    <xpath expr="//header//ul[@id='top_menu']/li" position="before">
            	<li><a href="/jobs">Jobs</a></li>
	    </xpath>
	    <xpath expr="//footer//div[@name='info']/ul" position="inside">
		<li><a href="/jobs">Jobs</a></li>
	    </xpath>
    	</template>

        <template id="index" name="Departments" page="True">
            <t t-call="website.layout">
                <t t-set="head">
                    <t t-raw="head or ''"/>
                </t>
                <t t-set="title">Jobs</t>
		<div id="wrap">
		    <div class="oe_structure"/>
                    <div class="container oe_website_jobs">
			<div class="row">
			    <div class="col-md-4">
				<h1>Departments</h1>
		   	    </div>
			    <div class="col-sm-4">
				<t t-call="website.pager">
                            	    <t t-set="classname">pull-left</t>
                        	</t>
		   	    </div>
			</div>
			<div class='row style_default'>
			    <div class="col-md-12" id="jobs_grid">
				<ul class="media-list">
        	                    <li t-foreach="res_job" t-as="job" class="media" data-publish="">
					<div class="media-body">
					    <span t-if="not job.no_of_recruitment" class="label label-default pull-right">No recruitment needed.</span>
					    <t t-if="job.no_of_recruitment">
						<span class="label label-default pull-right label-info"><t t-esc="vals[job.id]['count']"/> Recruitment availables.</span>
					    </t>
                                    	    <h4 class="media-heading"><a t-attf-href="/job/detail/#{ job.id }/"><span t-field="job.name"> </span></a></h4>
					    <div>
						<i class="icon-time"></i> <span t-esc="vals[job.id]['date_recruitment']"> </span>
                                    	    </div>
					    <div t-if="companies[0].country_id">
                                        	<i class="icon-map-marker"></i> <span t-field="companies[0].city"> </span>  <span t-if="companies[0].state_id" t-field="companies[0].state_id.name"> </span>, <span t-field="companies[0].country_id.name"> </span>
                                    	    </div>
					</div>
				    </li>
				</ul>
		            </div>
                        </div>
                    </div>
		    <div class="oe_structure"/>
		</div>
            </t>
        </template>
        <template id="detail">
            <t t-call="website.layout">
		<t t-set="head">
		    <script type="text/javascript" src="/website_hr_recruitment/static/src/js/recruitment.js"></script>
                    <t t-raw="head or ''"/>
		</t>
                <t t-set="title">Job Detail</t>
		<div id="wrap">
		    <div class="container">
		        <div class="row">
			    <div class="col-md-4">
		                <form action="./subscribe" method="POST" class="form-inline" t-if="not subscribe">
		                    <div class="col-lg-7">
		                        <input placeholder="Email Address" type="email" name="email" class="form-control" t-if="is_public_user"/>
		                    </div>
		                    <button type="submit" class="btn btn-primary" name="subscribe">Subscribe</button>
		                </form>
		                <form action="./unsubscribe" method="POST" class="form-inline" t-if="subscribe">
		                    <input type="hidden" name="email" t-att-value="subscribe"/>
		                    <button type="submit" class="btn btn-default" name="unsubscribe">Unsubscribe</button>
		                </form>
		            </div>
		            <t t-call="website.publish"><t t-set="object" t-value="job"/></t>
                    	</div>
                    </div>
		    <div class="oe_structure" style="clear:both;">
	                <h1 class="text-center" t-field="job.name"></h1>
			<h4 class="text-center">
                            <i class="icon-time"></i> <span><t t-esc="vals_date"/></span>
			</h4>
			<h5 class="text-center">
				<i class="icon-map-marker"></i> <span t-field="job.company_id.city"> </span>  <span t-if="job.company_id.state_id" t-field="job.company_id.state_id.name"> </span>, <span t-field="job.company_id.country_id.name"> </span></h5>

                    </div>			
  		    <div class="container oe_structure">
			<hr/>
		        <div class="row">
			    <div t-if="job.website_description">
                                <div id="job_description" t-att-data-name="job.id"/>
                            </div>
			    <t t-call="website_hr_recruitment.applyjobpost"/>				
		        </div>
		    </div>
		</div>
            </t>
        </template>

	<template id="job_description" inherit_option_id="website_hr_recruitment.detail" name="Job Description">
            <xpath expr="//div[@id='job_description']" position="replace">
            	    <t t-field="job.website_description"/>
            </xpath>
        </template>

        <template id="applyjobpost">
            <t t-set="title">Apply Job</t>
            <section id="forms">
                <h1>Apply</h1>
                    <form class="form-horizontal mt32" action="/job/success" method="post" enctype="multipart/form-data">
                        <input type="hidden" t-att-value="job.department_id.id" name="department_id"/>
                        <input type="hidden" t-att-value="job.id" name="job_id"/>
                        <input type="hidden" t-att-value="job.name" name="name"/>
                        <div class="form-group">
                            <label class="col-md-3 col-sm-4 control-label" for="partner_name">Name</label>
                            <div class="col-md-7 col-sm-8">
                                <input type="text" class="form-control" name="partner_name" required="True" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 col-sm-4 control-label" for="email_from">Email</label>
                            <div class="col-md-7 col-sm-8">
                                <input type="email" class="form-control" name="email_from" required="True" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 col-sm-4 control-label" for="description">Description</label>
                            <div class="col-md-7 col-sm-8">
                                <textarea  class="form-control" name="description" style="min-height: 120px"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 col-sm-4 control-label" for="ufile">Upload File</label>
                            <div class="col-md-7 col-sm-8">
                                <input class="input-file" id="fileInput" type="file" name="ufile" required="true"/>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-md-offset-3 col-sm-offset-4 col-sm-8 col-md-7">
                                <button type="submit" class="btn btn-primary">Save</button>
                            </div>
                        </div>
                    </form>
            </section>
        </template>
        <template id="thankyou">
            <t t-call="website.layout">
                <t t-set="title">Thank You!</t>
                <div class="col-md-4 pull-right">
                    <ul class="pager">
                        <li><a t-att-href="'/job/detail/%%s' %% jobid">All Jobs</a></li>
                    </ul>
                </div>
                <section id="typography">
                    <div class="container">
                        <div class="row">
                            <h2>You have successfully applied for job.</h2>
                        </div>
                    </div>
                </section>
            </t>
        </template>
	<template id="job_departments" inherit_option_id="website_hr_recruitment.index" name="Job Departments">
		<xpath expr="//div[@id='jobs_grid']" position="before">
		    <div class="col-md-3">
		        <ul class="nav nav-pills nav-stacked mt16">
		            <li t-att-class=" '' if active else 'active' "><a href="/jobs">All Jobs</a></li>
		            <t t-foreach="departments" t-as="department">
		                <li t-att-class="department.id == active and 'active' or ''">
			    	    <a t-attf-href="/department/#{ department.id }/" ><t t-field="department.name"/></a>
		            	</li>
		            </t>
		        </ul>
		    </div>
		</xpath>
		<xpath expr="//div[@id='jobs_grid']" position="attributes">
		    <attribute name="class">col-md-9</attribute>
		</xpath>
	</template>
     </data>
</openerp>
