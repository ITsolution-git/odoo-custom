<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="website_mail_jobs" model="mail.group">
            <field name="name">Jobs</field>
            <field name="public">public</field>
            <field name="description">Job Posts on your website</field>
        </record>

        <template id="job_footer_custom" inherit_id="website.layout" name="Custom Footer Job">
            <xpath expr="//header//ul[@id='top_menu']/li[@name='contactus']" position="before">
                    <li><a t-href="/jobs">Jobs</a></li>
            </xpath>
            <xpath expr="//footer//div[@name='info']/ul" position="inside">
            <li><a t-href="/jobs">Jobs</a></li>
            </xpath>
        </template>

        <template id="index" name="Jobs" page="True">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="oe_structure"/>
                    <div class="container oe_website_jobs">
                        <div class="row">
                            <div class="col-sm-4">
                                <t t-call="website.pager">
                                    <t t-set="classname">pull-left</t>
                                </t>
                            </div>
                        </div>
                        <div class='row style_default mt16'>
                            <div class="col-md-12" id="jobs_grid">
                                <ul class="media-list">
                                    <li t-foreach="res_job" t-as="job" class="media">
                                        <div class="media-body" t-att-data-publish="job.website_published and 'on' or 'off'">
                                            <t t-if="job.no_of_recruitment">
                                            <span class="label label-default pull-right label-info"><t t-esc="vals[job.id]['count']"/> Vacancies.</span>
                                            </t>
                                            <h4 class="media-heading"><a t-href="/job/detail/#{ job.id }/"><span t-field="job.name"> </span></a></h4>
                                            <div t-if="companies[0].country_id">
                                                <i class="icon-map-marker"/> <span t-field="companies[0].city"> </span>  <span t-if="companies[0].state_id" t-field="companies[0].state_id.name"> </span>, <span t-field="companies[0].country_id.name"> </span>
                                            </div>
                                            <div class="text-muted">
                                                <i class="icon-time"/> <span><t t-esc="vals[job.id]['date_recruitment']"/></span>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="oe_structure"/>
                </div>
            </t>
        </template>

        <template id="detail">
            <t t-call="website.layout">
            <t t-set="head">
                <script type="text/javascript" src="/website_hr_recruitment/static/src/js/recruitment.js"></script>
                <t t-raw="head or ''"/>
            </t>
            <t t-set="additional_title">Job Detail</t>
            <div id="wrap">
                <div class="container oe_website_hr_recruitment">
                    <div class="row">
                        <div class="col-md-3">
                            <t t-call="website_mail.follow">
                                <t t-set="email" t-value="user_id.email"/>
                                <t t-set="object" t-value="job"/>
                            </t>
                        </div>
                        <t t-call="website.publish_management">
                            <t t-set="object" t-value="job"/>
                            <t t-set="publish_edit" t-value="True"/>
                        </t>
                    </div>
                </div>
                <div class="oe_structure" style="clear:both;">
                    <h1 class="text-center" t-field="job.name"/>
                    <h5 class="text-center">
                        <i class="icon-map-marker"/> <span t-field="job.company_id.city"> </span>  <span t-if="job.company_id.state_id" t-field="job.company_id.state_id.name"> </span>, <span t-field="job.company_id.country_id.name"> </span></h5>
                    <h5 class="text-center text-muted">
                                    <i class="icon-time"/> <span><t t-esc="vals_date"/></span>
                    </h5>
                </div>
                <div class="container oe_structure">
                    <div class="row">
                        <div t-if="job.website_description">
                            <div t-field="job.website_description"/>
                            <section data-snippet-id="cta" class="mt16 mb16">
                                <div class="container">
                                    <div class="row">
                                    <div class="col-md-12 text-center mt16 mb16">
                                        <a t-href="/apply/#{ job.id }/" class="btn btn-primary btn-lg">Apply</a>
                                    </div>
                                      </div>
                                </div>
                            </section>
                        </div>
                    </div>
                </div>
            </div>
            </t>
        </template>

        <template id="applyjobpost">
            <t t-call="website.layout">
                <t t-set="additional_title">Apply Job</t>
                <div id="wrap">
                    <div class="container">
                        <h1 class="text-center">Apply for <span t-field="job.name"/></h1>
                        <div class="row">
                            <section id="forms">
                                <!-- TODO Multilingual form action support ? -->
                                <form class="form-horizontal mt32" action="/job/success" method="post" enctype="multipart/form-data">
                                    <input type="hidden" t-att-value="job.department_id.id" name="department_id"/>
                                    <input type="hidden" t-att-value="job.id" name="job_id"/>
                                    <input type="hidden" t-att-value="job.name" name="name"/>
                                    <div class="form-group">
                                        <label class="col-md-3 col-sm-4 control-label" for="partner_name">Name</label>
                                        <div class="col-md-7 col-sm-8">
                                            <input type="text" class="form-control" name="partner_name" required="True" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-3 col-sm-4 control-label" for="email_from">Email</label>
                                        <div class="col-md-7 col-sm-8">
                                            <input type="email" class="form-control" name="email_from" required="True" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-3 col-sm-4 control-label" for="description">Cover Note</label>
                                        <div class="col-md-7 col-sm-8">
                                            <textarea  class="form-control" name="description" style="min-height: 120px"/>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-md-3 col-sm-4 control-label" for="ufile">Resume</label>
                                        <div class="col-md-7 col-sm-8">
                                            <input class="input-file" id="fileInput" type="file" name="ufile"/>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-md-offset-3 col-sm-offset-4 col-sm-8 col-md-7">
                                            <button type="submit" class="btn btn-primary">Submit</button>
                                        </div>
                                    </div>
                                </form>
                            </section>
                        </div>
                    </div>
                </div>
            </t>
        </template>
        <template id="thankyou">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="container">
                        <h1>Thank you!</h1>
                        <p>
                            We have received your application for the position,
                            we will contact you soon for the next part of the
                            recruitment process.
                        </p>
                    </div>
                </div>
            </t>
        </template>
    <template id="job_departments" inherit_option_id="website_hr_recruitment.index" name="Job Departments">
        <xpath expr="//div[@id='jobs_grid']" position="before">
            <div class="col-md-3">
                <ul class="nav nav-pills nav-stacked mt16">
                    <li t-att-class=" '' if active else 'active' "><a t-href="/jobs">All Departments</a></li>
                    <t t-foreach="departments" t-as="department">
                        <li t-att-class="department.id == active and 'active' or ''">
                        <a t-href="/department/#{ department.id }/" ><span t-field="department.name"/></a>
                        </li>
                    </t>
                </ul>
            </div>
        </xpath>
        <xpath expr="//div[@id='jobs_grid']" position="attributes">
            <attribute name="class">col-md-9</attribute>
        </xpath>
        <xpath expr="//div[@class='row']/div" position="before">
            <div class="col-md-4">
            <h1>Departments</h1>
            </div>
        </xpath>
    </template>
     </data>
</openerp>
