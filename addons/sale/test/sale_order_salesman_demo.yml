-
  In order to test process of the Sale Order, I create sale order
-
  Create a user 'Salesman'
-
  !record {model: res.users, id: res_users_salesman}:
    company_id: base.main_company
    name: Salesman
    login: su
    password: su
    groups_id:
      - base.group_sale_salesman_all_leads
-
  Create a user 'Salesman'
-
  Now, check the data with salesman
-
  !context
    'uid': 'res_users_salesman'
-
  !record {model: sale.order, id: sale_order_test2}:
    partner_id: base.res_partner_3
    note: Invoice after delivery
    payment_term: account.account_payment_term
    order_line: 
      - product_id: product.product_product_7
        product_uom_qty: 7
-
  I verify that the onchange was correctly triggered
-
  !assert {model: sale.order, id: sale.sale_order_test2, string: The onchange function of product was not correctly triggered}:
    - order_line[0].name == u'[LCD17] 17\u201d LCD Monitor'
    - order_line[0].price_unit == 1350.0
