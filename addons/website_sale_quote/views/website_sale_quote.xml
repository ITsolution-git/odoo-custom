<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <template id="static_layout">&lt;!DOCTYPE html&gt;
            <html t-att-lang="lang.replace('_', '-')"
                      t-att-data-editable="'1' if editable else None"
                      t-att-data-translatable="'1' if translatable else None"
                      t-att-data-view-xmlid="xmlid if editable else None"
                      t-att-data-main-object="repr(main_object) if editable else None"
                      t-att-data-report-margin-top="40"
                      t-att-data-report-innerheight="30">
                    <head>

                        <link rel='stylesheet' href='/report/static/src/css/report.css'/>

                        <t t-if="main_object and 'website_meta_title' in main_object">
                            <t t-set="title" t-value="main_object.website_meta_title"/>
                        </t>
                        <t t-if="not title and main_object and 'name' in main_object">
                            <t t-set="additional_title" t-value="main_object.name"/>
                        </t>
                        <t t-if="not title">
                            <t t-set="title"><t t-raw="res_company.name"/><t t-if="additional_title"> - <t t-raw="additional_title"/></t></t>
                        </t>
                        <title><t t-esc="title"/></title>
                        <meta name="openerp.company" t-att-value="res_company.name"/>
                        <meta name="description" t-att-value="main_object and 'website_meta_description' in main_object
                            and main_object.website_meta_description or website_meta_description"/>
                        <meta name="keywords" t-att-value="main_object and 'website_meta_keywords' in main_object
                            and main_object.website_meta_keywords or website_meta_keywords"/>

                        <!-- Load stylesheets before scripts to avoid blocking -->
                        <link rel='stylesheet' href='/web/static/lib/fontawesome/css/font-awesome.css'/>
                        <t t-if="editable">
                            <link rel='stylesheet' href='/website/static/src/css/snippets.css'/>
                            <link rel='stylesheet' href='/website/static/src/css/editor.css'/>
                            <link rel='stylesheet' href='/website/static/lib/bootstrap-tour/bootstrap-tour.css'/>
                        </t>
                        <t t-call="website.theme"/>


                        <script type="text/javascript" src="/web/static/lib/es5-shim/es5-shim.min.js"></script>
                        <script type="text/javascript" src="/web/static/lib/underscore/underscore.js"></script>
                        <script type="text/javascript" src="/web/static/lib/underscore.string/lib/underscore.string.js"></script>
                        <script type="text/javascript" src="/web/static/lib/jquery/jquery.js"></script>
                        <script type="text/javascript" src="/website/static/lib/bootstrap/js/bootstrap.js"></script>
                        <script type="text/javascript">
                            // Bootstrap and jQuery UI conflicts
                            $.fn.bstooltip = $.fn.tooltip;
                            $.fn.bsbutton = $.fn.button;
                        </script>

                        <script type="text/javascript" src="/web/static/lib/qweb/qweb2.js"></script>
                        <script type="text/javascript" src="/web/static/src/js/openerpframework.js"></script>

                        <script type="text/javascript" src="/website/static/src/js/website.js"></script>
                        <script t-if="not translatable" type="text/javascript" src="/website/static/src/js/website.snippets.animation.js"></script>

                        <t t-if="editable" id="editable_scripts_hook">
                            <link rel="stylesheet" href="/select2/static/lib/select2/select2.css"/>
                            <link rel="stylesheet" href="/website/static/lib/select2-bootstrap-css/select2-bootstrap.css"/>
                            <link rel='stylesheet' href="/web/static/lib/jquery.ui/css/smoothness/jquery-ui-1.9.1.custom.css"/>

                            <script type="text/javascript" src="/select2/static/lib/select2/select2.js"></script>
                            <script type="text/javascript" src="/web/static/lib/ckeditor/ckeditor.js"></script>
                            <script type="text/javascript" src="/website/static/lib/bootstrap-tour/bootstrap-tour.js"></script>
                            <script t-if="not translatable" type="text/javascript" src="/website/static/lib/ace/ace.js"></script>
                            <script type="text/javascript" src="/website/static/lib/vkbeautify/vkbeautify.0.99.00.beta.js"></script>
                            <script type="text/javascript" src="/web/static/lib/jquery.ui/js/jquery-ui-1.9.1.custom.js"></script>
                            <!-- mutation observers shim backed by mutation events (8 < IE < 11, Safari < 6, FF < 14, Chrome < 17) -->
                            <script type="text/javascript" src="/website/static/lib//jquery.mjs.nestedSortable/jquery.mjs.nestedSortable.js"></script>
                            <script type="text/javascript" src="/website/static/lib/MutationObservers/test/sidetable.js"></script>
                            <script type="text/javascript" src='/website/static/lib/nearest/jquery.nearest.js'></script>
                            <script type="text/javascript" src="/website/static/lib/MutationObservers/MutationObserver.js"></script>

                            <script type="text/javascript" src="/website/static/src/js/website.editor.js"></script>
                            <script type="text/javascript" src="/website/static/src/js/website.menu.js"></script>
                            <script type="text/javascript" src="/website/static/src/js/website.mobile.js"></script>
                            <script type="text/javascript" src="/website/static/src/js/website.seo.js"></script>
                            <script type="text/javascript" src="/website/static/src/js/website.tour.js"></script>
                            <script type="text/javascript" src="/website/static/src/js/website.tour.banner.js"></script>
                            <script t-if="not translatable" type="text/javascript" src="/website/static/src/js/website.snippets.editor.js"></script>
                            <script t-if="not translatable" type="text/javascript" src="/website/static/src/js/website.ace.js"></script>
                            <script t-if="translatable" type="text/javascript" src="/website/static/src/js/website.translator.js"></script>
                        </t>
                        <script type="text/javascript" src="/website_sale_quote/static/src/js/sale_quote.js"></script>
                    </head>
                    <body>
                        <div id="wrapwrap">
                            <t t-raw="0" />
                        </div>
                    </body>
            </html>
        </template>
        <template id="pricing" name="Quotation Pricing">
            <section id="quote" class="tab-pane oe_section">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Product</th>
                            <th>#</th>
                            <th class="text-center">Unit Price</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="quotation.order_line" t-as="line">
                            <tr>
                                <td class="col-sm-8 col-md-6">
                                    <div class="media">
                                        <span class="thumbnail pull-left media-object" t-field="line.product_id.image" style="width: 72px; height: 72px;" t-field-options='{"widget": "image", "class": "img img-responsive"}'/>
                                        <div class="media-body">
                                            <h4 class="media-heading"><a href="#"><b t-field="line.product_id.name"/></a></h4>
                                            <h5 class="media-heading" t-field="line.name"></h5>
                                        </div>
                                    </div>
                                </td>
                                <td class="col-sm-1 col-md-1" style="text-align: center">
                                    <div class="input-group">
                                        <span class="input-group-addon">
                                            <a t-href="./update_line/#{ line.id }/?order_id=#{ quotation.id }&amp;remove=True" class="mb8 js_update_line_json">
                                                <span class="fa fa-minus"/>
                                            </a>
                                        </span>
                                        <input type="text" class="js_quantity form-control" t-att-data-id="line.id" t-att-value="line.product_uom_qty"/>
                                        <span class="input-group-addon">
                                            <a t-href="./update_line/#{ line.id }/?order_id=#{ quotation.id }" class="mb8 js_update_line_json">
                                                <span class="fa fa-plus"/>
                                            </a>
                                        </span>
                                    </div>
                                </td>
                                <td class="col-sm-1 col-md-1 text-center">
                                    <strong t-field="line.price_unit" t-field-options='{"widget": "monetary","display_currency": "website.pricelist_id.currency_id"}'></strong>
                                </td>
                                <td class="col-sm-1 col-md-1">
                                    <a t-href="./update_line/#{ line.id }/?order_id=#{ quotation.id }&amp;unlink=True" class="mb8 js_update_line_json pull-right">
                                        <span class="fa fa-trash-o"></span>
                                    </a>
                                </td>
                            </tr>
                        </t>
                        <tr>
                            <td>   </td>
                            <td><h3>Total</h3></td>
                            <td class="text-left" colspan="2">
                                <h3>
                                    <strong data-id="total_amount" t-field="quotation.amount_total" t-field-options='{"widget": "monetary","display_currency": "website.pricelist_id.currency_id"}'></strong>
                                </h3>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>
        </template>
        <template id="quote_status">
            <div class="navbar navbar-default  navbar-fix-top">
                <div class="collapse navbar-collapse navbar-top-collapse">
                    <ul class="nav navbar-nav" id="top_menu">
                        <li>
                            <a type="submit" t-if="quotation.state != 'manual' and quotation.state != 'cancel'" t-href="/quote/#{ quotation.access_token }/accept">
                                <span class="fa-stack">
                                    <i class="fa fa-circle fa-stack-2x" style="color:#5cb85c;"></i>
                                    <i class="fa fa-check fa-stack-1x fa-inverse fa-success"></i>
                                </span>
                                Accept
                            </a>
                        </li>
                        <li>
                            <a type="submit" t-if="quotation.state != 'cancel'" t-href="/quote/#{ quotation.access_token }/decline">
                                <span class="fa-stack">
                                    <i class="fa fa-circle fa-stack-2x" style="color:#d9534f;"></i>
                                    <i class="fa fa-times fa-stack-1x fa-inverse"></i>
                                </span>
                                Decline
                            </a>
                        </li>
                        <li>
                            <a href="#chat">
                                <span class="fa-stack">
                                    <i class="fa fa-circle fa-stack-2x" style="color:#428bca;"></i>
                                    <i class="fa fa-comment fa-stack-1x fa-inverse"></i>
                                </span>Discuss
                                <sup class="label label-info"><t t-esc="total_mail"/></sup>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </template>
        <template id="chatter">
            <div id="chat" class="panel panel-default widget">
                <div class="panel-heading">
                    <span class="glyphicon glyphicon-comment"></span>
                    <h3 class="panel-title">Recent Comments</h3>
                </div>
                <div class="panel-body">
                    <ul class="list-group">
                        <t t-foreach="quotation.message_ids" t-as="message">
                            <t t-if="message.type == 'email'">
                                <li class="list-group-item">
                                    <div class="row">
                                        <div class="col-xs-2 col-md-1">
                                            <img t-att-src="'data:image/png;base64,' + message.author_id.image_small" class="img-circle img-responsive" alt="" /></div>
                                        <div class="col-xs-10 col-md-11">
                                            <div>
                                                <a href="http://www.jquery2dotnet.com/2013/10/google-style-login-page-desing-usign.html"/>
                                                    <t t-raw="message.body"/>
                                                <div class="mic-info">
                                                    By: <a href="#"><t t-esc="message.author_id.name"/></a> on <t t-esc="message.date"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                            </t>
                        </t>
                    </ul>
                </div>
            </div>
            <form id="post" accept-charset="UTF-8" method="POST" t-att-action="'/quote/%%s/post#post' %% quotation.access_token">
                <textarea rows="3" id="new_message" name="new_message" placeholder="Your Comment....." class="form-control span7"> </textarea>
                <button type="submit" t-att-id="quotation.access_token" class="btn btn-info">Post your Comment</button>
            </form>
        </template>
        <template id="so_quotation" name="Product Quotation">
            <t t-call="website_sale_quote.static_layout">
                <div class="col-xs-12 col-md-8 tab-content">
                    <t t-call="website_sale_quote.quote_status"/>
                    <section id="introduction11" class="tab-pane active oe_section jumbotron" t-field="quotation.website_description">
                    </section>
                    <t t-foreach="quotation.order_line" t-as="line">
                        <section class="tab-pane oe_section jumbotron" t-att-id="line.id">
                            <div t-field="line.website_description" class="oe_structure"/>
                        </section>
                    </t>
                    <t t-call="website_sale_quote.pricing"/>
                    <t t-call="website_sale_quote.product_recommendation"/>
                    <t t-call="website_sale_quote.chatter"/>
                </div>
                <div class="col-xs-6 col-md-4 sidebar oe_section" id="sidebar">
                    <ul class="nav nav-pills nav-stacked" data-spy="affix">
                        <li class="active"><a href="#introduction11" data-toggle="tab"><i class="icon-chevron-right"></i> Introduction</a></li>
                        <t t-foreach="quotation.order_line" t-as="line">
                            <li><a t-att-href="'#%s'% line.id" data-toggle="tab"><i class="icon-chevron-right"></i><t t-raw="line.product_id.name_template"/> </a></li>
                        </t>
                        <li><a href="#quote" data-toggle="tab"><i class="icon-chevron-right"></i> Quotation</a></li>
                    </ul>
                </div>
            </t>
        </template>
        <template id="product_recommendation">
<!--            <div class="container mt32" t-if="product.recommended_products()">-->
                <h3>Customers who have bought this product also bought:</h3>
                <div class='row mt16' style="margin-left: 15px !important;">
                    <t t-foreach="quotation.recommended_products()" t-as="product">
                        <div class='col-md-2 thumbnail' style='width: 170px; margin-right: 16px;'>
                            <div class='mt16 text-center'>
                                <a href="#" t-field="product.name"/>
                                <span t-field="product.image_small" t-field-options='{"widget": "image", "class": "img-rounded"}'/>
<!--                                <h5>-->
<!--                                    <a t-href="/shop/product/#{ slug(product) }/"-->
<!--                                       style="display: block">-->
<!--                                        <span t-field='product.name'-->
<!--                                              style="display: block"/>-->
<!--                                    </a>-->
<!--                                </h5>-->
                            </div>
                        </div>
                    </t>
                </div>
<!--            </div>-->
        </template>
    </data>
</openerp>
