<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <menuitem icon="terp-stock" id="menu_stock_root" name="Warehouse" sequence="5"/>
        <menuitem id="menu_stock_warehouse_mgmt" name="Warehouse Management" parent="menu_stock_root" sequence="1"/>
        <menuitem id="menu_stock_products_moves" name="Products Moves" parent="menu_stock_root" sequence="2"/>
        <menuitem id="menu_stock_product" name="Product" parent="menu_stock_root" sequence="6"/>
        <menuitem action="product.product_normal_action" id="menu_stock_products_menu" parent="menu_stock_product" sequence="1"/>
        <menuitem id="menu_stock_configuration" name="Configuration" parent="menu_stock_root" sequence="15" groups="base.group_system"/>
        <menuitem id="menu_warehouse_config" name="Warehouse mangement" parent="menu_stock_configuration" sequence="1" groups="base.group_system"/>
        <menuitem id="menu_stock_inventory_control" name="Inventory Control" parent="menu_stock_root" sequence="4"/>

        <record id="stock_inventory_line_tree" model="ir.ui.view">
            <field name="name">stock.inventory.line.tree</field>
            <field name="model">stock.inventory.line</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Stock Inventory Lines">
                    <field name="product_id"/>
                    <field name="product_qty"/>
                    <field name="product_uom"/>
                    <field name="prod_lot_id" groups="base.group_extended"/>
                    <button name="%(stock.action_view_stock_inventory_line_split)d"
                            string="Split inventory lines" groups="base.group_extended"
                            type="action" icon="gtk-justify-fill"/>
                    <field name="location_id"/>
                </tree>
            </field>
        </record>
        <record id="view_inventory_line_form" model="ir.ui.view">
            <field name="name">stock.inventory.line.form</field>
            <field name="model">stock.inventory.line</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Stock Inventory Lines">
                    <field context="location=location_id,uom=product_uom" name="product_id" on_change="on_change_product_id(location_id,product_id,product_uom)" select="1" domain="[('type','&lt;&gt;','service')]"/>
                    <field name="product_qty"/>
                    <field name="product_uom"/>
                    <field name="prod_lot_id" groups="base.group_extended"/>
                    <field colspan="4" domain="[('usage','=','internal')]" name="location_id" select="1"/>
                        <button name="%(stock.action_view_stock_inventory_line_split)d"
                            string="Split inventory lines" groups="base.group_extended"
                            type="action" icon="gtk-justify-fill"/>
                </form>
            </field>
        </record>

         <record id="view_inventory_filter" model="ir.ui.view">
            <field name="name">stock.inventory.filter</field>
            <field name="model">stock.inventory</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Inventory">
                    <group col="10" colspan="4">
                        <field name="name"/>
                        <field name="date"/>
                        <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By..." colspan="4" col="4" groups="base.group_extended">
                        <filter string="State" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="Date" icon="terp-go-month" domain="[]" context="{'group_by':'date'}"/>
                    </group>
                </search>

            </field>
        </record>

        <record id="view_inventory_tree" model="ir.ui.view">
            <field name="name">stock.inventory.tree</field>
            <field name="model">stock.inventory</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Lot Inventory" colors="grey:state in ('cancel')">
                    <field name="name"/>
                    <field name="date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="view_inventory_form" model="ir.ui.view">
            <field name="name">stock.inventory.form</field>
            <field name="model">stock.inventory</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Lot Inventory">
                    <field name="name"/>
                    <field name="date"/>
                    <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                    <notebook colspan="4">
                    <page string="General Informations">
                        <field colspan="4" name="inventory_line_id" nolabel="1" widget="one2many_list">
                            <tree string="Inventory Lines" editable="bottom">
                                <field context="location=location_id,uom=product_uom" name="product_id" on_change="on_change_product_id(location_id,product_id,product_uom)" domain="[('type','&lt;&gt;','service')]"/>
                                <field name="product_qty"/>
                                <field name="product_uom"/>
                                <field name="prod_lot_id" groups="base.group_extended"/>
                                <field colspan="4" domain="[('usage','=','internal')]" name="location_id"/>
                                <field name="state" invisible="1"/>
                                <button name="%(stock.action_view_stock_inventory_line_split)d"
                                    string="Split inventory lines" groups="base.group_extended"
                                    type="action" icon="gtk-justify-fill" states="draft"/>
                            </tree>
                            <form string="Inventory Lines">
                                <field colspan="4" context="location=location_id,uom=product_uom" name="product_id" on_change="on_change_product_id(location_id,product_id,product_uom)" domain="[('type','&lt;&gt;','service')]"/>
                                <field name="product_qty"/>
                                <field name="product_uom"/>
                                <field  domain="[('usage','=','internal')]" name="location_id"/>
                                <field name="prod_lot_id" groups="base.group_extended"/>
                                <group colspan="2" col="3">
                                    <button name="%(stock.action_view_stock_inventory_line_split)d"
                                        string="Split inventory lines" groups="base.group_extended"
                                        type="action" icon="gtk-justify-fill"/>
                                </group>
                            </form>
                        </field>
                    </page><page string="Posted Inventory" groups="base.group_extended">
                        <field colspan="4" name="move_ids" nolabel="1"/>
                    </page>
                    </notebook>
                    <field name="state"/>
                    <group col="4" colspan="2">
                        <button name="action_done" states="draft" string="Confirm Inventory" type="object" icon="gtk-apply"/>
                        <button name="action_cancel" states="cancel" string="Set to Draft" type="object" icon="gtk-cancel"/>
                        <button name="action_cancel_inventary" states="draft" string="Cancel Inventory" type="object" icon="gtk-cancel"/>
                    </group>

                </form>
            </field>
        </record>

        <record id="action_inventory_form" model="ir.actions.act_window">
            <field name="name">Periodical Inventory</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.inventory</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_inventory_tree"/>
            <field name="context">{'full':'1'}</field>
            <field name="search_view_id" ref="view_inventory_filter" />
        </record>
        <menuitem action="action_inventory_form" id="menu_action_inventory_form" parent="menu_stock_inventory_control" sequence="30"/>

        <record id="action_inventory_form_draft" model="ir.actions.act_window">
            <field name="name">Draft Periodical Inventories</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.inventory</field>
            <field name="view_type">form</field>
            <field name="domain">[('state','=','draft')]</field>
            <field name="filter" eval="True"/>
        </record>

        <record id="view_tracking_form" model="ir.ui.view">
            <field name="name">stock.tracking.form</field>
            <field name="model">stock.tracking</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Packs">
                    <field name="name" select="1"/>
                    <field name="serial" select="1"/>
                    <field name="date" select="1"/>
                    <field name="active" select="1"/>
                </form>
            </field>
        </record>
        <record id="view_tracking_tree" model="ir.ui.view">
            <field name="name">stock.tracking.tree</field>
            <field name="model">stock.tracking</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Packs">
                    <field name="name"/>
                    <field name="serial"/>
                    <field name="date"/>
                    <field name="active"/>
                </tree>
            </field>
        </record>
        <record id="action_tracking_form" model="ir.actions.act_window">
            <field name="name">Packs</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.tracking</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_tracking_tree"/>
        </record>
        <menuitem id="menu_traceability" name="Traceability" parent="menu_stock_root" sequence="3"/>
        <menuitem action="action_tracking_form" id="menu_action_tracking_form"
            groups="base.group_extended"
            parent="menu_traceability"/>

        <record id="lot_line_tree" model="ir.ui.view">
            <field name="name">stock.tracking.tree</field>
            <field name="model">stock.tracking</field>
            <field name="type">tree</field>
            <field name="field_parent">child_ids</field>
            <field name="arch" type="xml">
                <tree colors="grey:not active" string="Packs">
                    <field name="name" />
                    <field name="serial" />
                    <field name="date" />
                </tree>
            </field>
        </record>

        <record id="view_production_lot_revision_form" model="ir.ui.view">
            <field name="name">stock.production.lot.revision.form</field>
            <field name="model">stock.production.lot.revision</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Production Lot Revisions">
                    <field colspan="4" name="name"/>
                    <field colspan="2" name="indice"/>
                    <field colspan="2" name="date"/>
                    <newline/>
                    <field name="author_id" readonly="1"/>
                    <newline/>
					<separator string="Description" colspan="4"/>
                    <field colspan="4" name="description" nolabel="1"/>
                </form>
            </field>
        </record>
        <record id="view_production_lot_revision_tree" model="ir.ui.view">
            <field name="name">stock.production.lot.revision.tree</field>
            <field name="model">stock.production.lot.revision</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Production Lot Revisions">
                    <field name="indice"/>
                    <field name="author_id"/>
                    <field name="date"/>
                    <field name="name"/>
                </tree>
            </field>
        </record>
        <record id="view_production_lot_form" model="ir.ui.view">
            <field name="name">stock.production.lot.form</field>
            <field name="model">stock.production.lot</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Production Lot">
                    <notebook colspan="4">
                        <page string="Production Lot">
                            <field name="name"/>
                            <field name="ref"/>
                            <field name="prefix"/>
                            <field name="product_id"/>
                            <field name="stock_available"/>
                            <field name="date"/>
                            <field colspan="4" name="revisions" nolabel="1"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>
        <record id="view_production_lot_tree" model="ir.ui.view">
            <field name="name">stock.production.lot.tree</field>
            <field name="model">stock.production.lot</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Production Lot">
                    <field name="prefix" />
                    <field name="name"/>
                    <field name="ref"/>
                    <field name="product_id"/>
                    <field name="stock_available"/>
                    <field name="date"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="search_product_lot_filter">
            <field name="name">Production Lots Filter</field>
            <field name="model">stock.production.lot</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Product Lots Filter">
                    <group col="10" colspan="4">
                        <filter icon="terp-check" name="available" string="Available" domain="[('stock_available', '&gt;', 0)]" help="Available Product Lots" />
                        <separator orientation="vertical"/>
                        <field name="prefix"/>
                        <field name="name"/>
                        <field name="ref"/>
                        <field name="product_id"/>
                        <field name="date"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By..." colspan="4" col="8">
                        <filter string="Product" icon="terp-accessories-archiver" domain="[]" context="{'group_by':'product_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_production_lot_form" model="ir.actions.act_window">
            <field name="name">Production Lots</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.production.lot</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_production_lot_tree"/>
            <field name="search_view_id" ref="search_product_lot_filter" />
            <field name="context">{'full':'1',"search_default_available":1}</field>
        </record>
        <menuitem action="action_production_lot_form" id="menu_action_production_lot_form" parent="menu_traceability" groups="base.group_extended"/>

        #
        # Lot composition (history)
        #
        <record id="stock_move_tree" model="ir.ui.view">
            <field name="name">Stock Moves</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field name="field_parent">move_history_ids</field>
            <field name="arch" type="xml">
                <tree colors="grey:state in ('cancel')" string="Moves">
                    <field name="product_id" />
                    <field name="product_qty" />
                    <field name="product_uom"  string="UOM"/>
                    <field name="prodlot_id"  groups="base.group_extended"/>
                    <field groups="base.group_extended" name="tracking_id"/>
                    <field name="product_packaging" domain="[('product_id','=',product_id)]" groups="base.group_extended"/>
                    <field name="picking_id"/>
                    <field name="location_id" />
                    <field name="location_dest_id" />
                    <field name="date"/>
                    <field name="date_planned" string="Date"/>
                    <field name="date_expected" string="Date Expected"/>
                    <field name="state"/>
                    <button name="action_done" states="confirmed,assigned" string="Done" type="object" icon="gtk-jump-to"/>
                </tree>
            </field>
        </record>

        <record id="stock_move_tree2" model="ir.ui.view">
            <field name="name">Stock Moves</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field name="field_parent">move_history_ids2</field>
            <field name="arch" type="xml">
                <tree colors="grey:state in ('cancel')" string="Moves">
                    <field name="product_id" />
                    <field name="product_qty" />
                    <field name="product_uom"  string="UOM"/>
                    <field name="prodlot_id"  groups="base.group_extended"/>
                    <field groups="base.group_extended" name="tracking_id"/>
                    <field name="product_packaging" domain="[('product_id','=',product_id)]" groups="base.group_extended"/>
                    <field name="picking_id"/>
                    <field name="location_id" />
                    <field name="location_dest_id" />
                    <field name="date" />
                    <field name="date_planned" string="Date"/>
                     <field name="date_expected" string="Date Expected"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="view_location_form" model="ir.ui.view">
            <field name="name">stock.location.form</field>
            <field name="model">stock.location</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Stock Location">
                    <field name="name"/>
                    <field name="active" groups="base.group_extended"/>
                    <newline/>
                    <field name="usage"/>
                    <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                    <field name="location_id"/>
                    <field name="address_id" context="{'contact_display':'partner'}"/>
                    <field name="icon" groups="base.group_extended"/>
                    <field name="scrap_location"/>
                    <newline/>
                    <group col="2" colspan="2" groups="base.group_extended">
                        <separator string="Chained Locations" colspan="2"/>
                        <field name="chained_location_type"/>
                        <field name="chained_location_id"/>
                        <field name="chained_auto_packing"/>
                        <field name="chained_delay"/>
                        <field name="chained_journal_id"/>
                        <field name="chained_picking_type"/>
                        <field name="chained_company_id" widget="selection"/>
                    </group>
                    <group col="2" colspan="2">
                        <separator string="Localization" colspan="2"/>
                        <field name="posx"/>
                        <field name="posy"/>
                        <field name="posz"/>
                    </group>
                    <separator string="Additional Information" colspan="4"/>
                    <field colspan="4" name="comment" nolabel="1"/>
                </form>
            </field>
        </record>

        <record id="view_location_search" model="ir.ui.view">
            <field name="name">stock.location.search</field>
            <field name="model">stock.location</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Stock Locations">
                    <filter icon="terp-go-home" name="in_location"
                        string="Internal" domain="[('usage', '=', 'internal')]" help="Internal Locations" />
                    <filter icon="terp-go-home" name="customer"
                        string="Customer" domain="[('usage', '=', 'customer')]" help="Customer Locations" />
                    <filter icon="terp-go-home" name="supplier"
                        string="Supplier" domain="[('usage', '=', 'supplier')]" help="Supplier Locations" />
                    <separator orientation="vertical"/>
                    <field name="name"/>
                </search>
            </field>
        </record>


        <record id="view_location_tree2" model="ir.ui.view">
            <field name="name">stock.location.tree</field>
            <field name="model">stock.location</field>
            <field name="type">tree</field>
            <field name="priority" eval="2"/>
            <field name="arch" type="xml">
                <tree string="Stock Location" colors="blue:usage=='view';darkred:usage=='internal'">
                    <field name="complete_name"/>
                    <field name="usage"/>
                    <field name="stock_real" invisible="'product_id' not in context"/>
                    <field name="stock_virtual" invisible="'product_id' not in context"/>
                </tree>
            </field>
        </record>

        <record id="action_location_form" model="ir.actions.act_window">
            <field name="name">Locations</field>
            <field name="res_model">stock.location</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_location_tree2"/>
            <field name="search_view_id" ref="view_location_search"/>
            <field name="context">{'full':1, 'search_default_in_location':1}</field>
        </record>
        <menuitem action="action_location_form" id="menu_action_location_form" parent="menu_warehouse_config" groups="base.group_system"/>

        <record id="view_location_tree" model="ir.ui.view">
            <field name="name">stock.location.tree</field>
            <field name="model">stock.location</field>
            <field name="type">tree</field>
            <field name="field_parent">child_ids</field>
            <field name="arch" type="xml">
                <tree toolbar="1">
                    <field icon="icon" name="name"/>
                </tree>
            </field>
        </record>
        <record id="action_location_tree" model="ir.actions.act_window">
            <field name="name">Location Structure</field>
            <field name="res_model">stock.location</field>
            <field name="type">ir.actions.act_window</field>
            <field name="domain">[('location_id','=',False)]</field>
            <field name="view_type">tree</field>
            <field name="view_id" ref="view_location_tree"/>
        </record>
        <menuitem action="action_location_tree" id="menu_action_location_tree" parent="menu_stock_inventory_control" groups="base.group_extended" sequence="20"/>

        <record id="view_warehouse" model="ir.ui.view">
            <field name="name">stock.warehouse</field>
            <field name="model">stock.warehouse</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Warehouse">
                    <field colspan="4" name="name" select="1"/>
                    <field name="lot_input_id"/>
                    <field name="lot_stock_id"/>
                    <field name="lot_output_id"/>
                    <field name="company_id" select="1" groups="base.group_multi_company" widget="selection"/>
                    <newline/>
                    <field name="partner_address_id" context="{'contact_display':'partner'}"/>
                </form>
            </field>
        </record>
        <record id="view_warehouse_tree" model="ir.ui.view">
            <field name="name">stock.warehouse.tree</field>
            <field name="model">stock.warehouse</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Warehouse">
                    <field name="name"/>
                    <field name="lot_input_id"/>
                    <field name="lot_stock_id"/>
                    <field name="lot_output_id"/>
                    <field name="partner_address_id" context="{'contact_display':'partner'}"/>
                </tree>
            </field>
        </record>
        <record id="action_warehouse_form" model="ir.actions.act_window">
            <field name="name">Warehouses</field>
            <field name="res_model">stock.warehouse</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_warehouse_tree"/>
        </record>
        <menuitem action="action_warehouse_form" id="menu_action_warehouse_form" parent="menu_warehouse_config" groups="base.group_system"/>

        <record id="stock_picking_move_wizard_form" model="ir.ui.view">
            <field name="name">stock.picking.move.wizard.form</field>
            <field name="model">stock.picking.move.wizard</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Entry Lines">
                	<group height="200" width="500">
                    <field name="address_id" invisible="True" context="{'contact_display':'partner'}"/>
                    <field name="picking_id" invisible="True"/>
                    <field domain="[('picking_id','&lt;&gt;',picking_id),('state','in',['confirmed','assigned']),('picking_id.address_id','=',address_id)]" name="move_ids" nolabel="1"  height="100" width="500"/><newline/>
                    <group colspan="4">
                        <button special="cancel" string="Cancel" icon="gtk-cancel"/>
                        <button name="action_move" string="Add" type="object" icon="gtk-add"/>
                    </group>
                    </group>
                </form>
               </field>
        </record>

  	<act_window name="Unreceived Products"		    
		    res_model="stock.picking.move.wizard"
		    src_model="stock.picking"
		    view_mode="form"
		    target="new"        
            key2="client_action_multi"
		    id="act_stock_picking_move_wizard"/>		
		    	
        <record model="ir.ui.view" id="stock_picking_calendar">
            <field name="name">stock.picking.calendar</field>
            <field name="model">stock.picking</field>
            <field name="type">calendar</field>
            <field name="priority" eval="2"/>
            <field name="arch" type="xml">
                <calendar string="Calendar View" date_start="min_date" date_stop="max_date" color="address_id">
                    <field name="origin"/>
                    <field name="type"/>
                    <field name="address_id"/>
                </calendar>
            </field>
        </record>
        <record id="vpicktree" model="ir.ui.view">
            <field name="name">stock.picking.tree</field>
            <field name="model">stock.picking</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree colors="blue:state in ('draft');grey:state in ('cancel');red:state not in ('cancel', 'done') and date &lt; current_date" string="Picking list">
                    <field name="name"/>
                    <field name="backorder_id" groups="base.group_extended"/>
                    <field name="origin"/>
                    <field name="date"/>
                    <field name="min_date"/>
                    <field name="invoice_state"/>
                    <field name="stock_journal_id" groups="base.group_extended" widget="selection"/>
                    <field name="state"/>
                    <button name="%(action_partial_picking)d" states="assigned" string="Approve" type="action" icon="gtk-go-forward" help="Approve Picking"/>
                    <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel" icon="gtk-cancel" help="Cancel" confirm="This operation will cancel the picking.   Do you want to continue?"/>
                </tree>
            </field>
        </record>
        <record id="view_picking_form" model="ir.ui.view">
            <field name="name">stock.picking.form</field>
            <field name="model">stock.picking</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Picking list">
                    <group colspan="4" col="6">
                        <field name="name" readonly="1"/>
                        <field name="origin"/>
                        <field name="backorder_id" groups="base.group_extended" readonly="1"/>
                        <field name="date"/>
                        <field name="min_date"/>
                        <field name="type"/>
                        <field name="stock_journal_id" groups="base.group_extended" widget="selection"/>
                        <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                    </group>
                    <notebook colspan="4">
                        <page string="General Information">
                            <field colspan="4" name="move_lines" nolabel="1" widget="one2many_list" default_get="{'move_line':move_lines}">
                                <tree colors="grey:scrapped == True" string="Stock Moves">
                                    <field name="name" string="Move Name"/>
                                    <field name="product_id"/>
                                    <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                    <field name="product_uom" string="UOM"/>
                                    <field name="picking_id"/>
                                    <field name="prodlot_id" groups="base.group_extended"/>
                                    <button
                                        name="%(stock.track_line)d"
                                        string="Split in production lots"
                                        groups="base.group_extended"
                                        type="action" icon="terp-stock_effects-object-colorize"
                                        states="draft,waiting,confirmed,assigned" />
                                    <field groups="base.group_extended" name="tracking_id"/>
                                    <button name="setlast_tracking" string="Put in current pack" type="object"
                                        attrs="{'invisible': [('tracking_id','&lt;&gt;',False)]}"
                                        icon="terp-stock_effects-object-colorize"
                                        groups="base.group_extended"
                                        states="draft,assigned,confirmed,done"/>
                                    <button name="%(split_into)d" string="Put in a new pack" type="action"
                                        groups="base.group_extended"
                                        icon="terp-stock_effects-object-colorize"
                                        states="draft,assigned,confirmed,done"/>
                                    <field name="location_id"/>
                                    <field name="location_dest_id"/>
                                    <field name="date_planned"/>
                                    <field name="date_expected" string="Date Expected"/>
                                    <field name="state"/>

                                    <button name="%(stock.move_scrap)d"
                                        string="Scrap Products" type="action"
                                        icon="gtk-convert" context="{'scrap': True}"
                                        states="draft,waiting,confirmed,assigned" />
                                    <field name="scrapped" invisible="1"/>
                                </tree>
                                <form string="Stock Moves">
                                    <notebook colspan="4">
                                        <page string="General Information">
                                            <separator colspan="4" string="Move Information"/>
                                            <field name="location_id" domain="[('usage','=','internal')]"/>
                                            <field name="location_dest_id" domain="[('usage','=','internal')]"/>
                                            <field colspan="4" context="location=location_id" name="product_id" on_change="onchange_product_id(product_id, location_id, location_dest_id)" select="1"/>
                                            <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                            <field name="product_uom"/>
                                            <field groups="product.group_uos" name="product_uos" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                            <field groups="product.group_uos" name="product_uos_qty"/>
                                            <field colspan="4" invisible="1" name="name"/>
                                            <field invisible="1" name="date"/>
                                            <field name="date_planned"/>
                                             <field name="date_expected" string="Date Expected"/>
                                            <field name="address_id" context="{'contact_display':'partner'}"/>
                                            <field groups="base.group_extended" name="product_packaging" domain="[('product_id','=',product_id)]"/>
                                            <field name="prodlot_id" groups="base.group_extended"
                                                context="{'location_id':location_id, 'product_id':product_id}"
                                                domain="[('product_id','=?',product_id)]"
                                                on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id)"/>
                                            <field groups="base.group_extended" name="tracking_id"/>

                                            <newline/>
                                            <label/>
                                            <button name="%(track_line)d" string="Split in production lots"
                                             states="draft,waiting,confirmed,assigned"
                                            type="action" icon="terp-stock_effects-object-colorize"
                                              groups="base.group_extended" />
                                            <button name="%(move_scrap)d" string="Scrap" type="action" icon="gtk-justify-fill"/>
                                            <button name="%(split_into)d" string="Put in a new pack" type="action"
                                                states="draft,assigned,confirmed,done"
                                                groups="base.group_extended"
                                                icon="terp-stock_effects-object-colorize" />
                                            <separator colspan="4" string="Move State"/>
                                            <field name="state"/>
                                            <group colspan="2">
                                                <button name="force_assign" states="confirmed" string="Force Availability" type="object" icon="gtk-jump-to"/>
                                                <button name="cancel_assign" states="assigned" string="Cancel Availability" type="object" icon="gtk-no"/>
                                                <button name="action_cancel" states="assigned" string="Cancel" type="object" icon="gtk-cancel"/>
                                            </group>
                                        </page>
                                    </notebook>
                                </form>
                            </field>
                            <group col="10" colspan="4">
                                <field name="state" readonly="1"/>
                                <button name="draft_force_assign" states="draft" string="Confirm (Do Not Process Now)" type="object" icon="gtk-apply"/>
                                <button name="draft_validate" states="draft" string="Process Now" type="object" icon="gtk-media-play"/>
                                <button name="action_assign" states="confirmed" string="Check Availability" type="object" icon="gtk-find"/>
                                <button name="force_assign" states="confirmed" string="Force Availability" type="object" icon="gtk-jump-to"/>
                                <button name="%(action_partial_picking)d" states="assigned" string="Approve" type="action" icon="gtk-apply"/>
                                <button name="%(action_stock_invoice_onshipping)d"  string="Create Invoice" type="action" icon="terp-document-new" attrs="{'invisible':[('invoice_state','!=','2binvoiced')]}"/>
                                <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel" icon="gtk-cancel"/>
                            </group>
                        </page>
                        <page string="Notes">
                            <field colspan="4" name="note" nolabel="1"/>
                        </page>
                        <page string="Other info" groups="base.group_extended">
                            <field name="auto_picking"/>
                            <field name="invoice_state"/>
                            <field name="date_done"/>
                            <newline/>
                            <field name="move_type"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        <record id="view_stock_picking_filter" model="ir.ui.view">
            <field name="name">stock.picking.list.select</field>
            <field name="model">stock.picking</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Stock Picking">
                    <group col="10" colspan="4">
                        <filter icon="terp-check" name="available" string="Available" domain="[('state','=','assigned')]" help="Available Pickings"/>
                        <filter icon="terp-camera_test" string="Confirmed" domain="[('state','=','confirmed')]" help="Confirmed Pickings"/>
                        <separator orientation="vertical"/>
                        <filter icon="terp-accessories-archiver-minus" string="Back Order" domain="[('backorder_id', '&lt;&gt;', False)]" help="Has Back Order"  />
                        <separator orientation="vertical"/>
                        <field name="name"/>
                        <field name="address_id"/>
                        <field name="stock_journal_id" groups="base.group_extended" widget="selection"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By..." colspan="4" col="8">
                        <filter string="Partner" icon="terp-personal" domain="[]" context="{'group_by':'address_id'}"/>
                        <filter string="State" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="Date" icon="terp-go-month" domain="[]"  context="{'group_by':'date'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="view_picking_delivery_tree" model="ir.ui.view">
            <field name="name">stock.picking.delivery.tree</field>
            <field name="model">stock.picking</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree colors="blue:state in ('draft');grey:state in ('cancel');red:state not in ('cancel', 'done') and date &lt; current_date" string="Picking list">
                    <field name="name"/>
                    <field name="address_id"/>
                    <field name="backorder_id" groups="base.group_extended"/>
                    <field name="origin"/>
                    <field name="date"/>
                    <field name="min_date"/>
                    <field name="stock_journal_id" groups="base.group_extended" widget="selection"/>
                    <field name="state"/>
                    <button name="%(action_partial_picking)d" states="assigned" string="Approve" type="action" icon="gtk-go-forward" help="Approve Delivery"/>
                    <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel" icon="gtk-cancel" help="Cancel" confirm="This operation will cancel the delivery.    Do you want to continue?"/>
                </tree>
            </field>
        </record>
        <record id="view_picking_delivery_form" model="ir.ui.view">
            <field name="name">stock.picking.delivery.form</field>
            <field name="model">stock.picking</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Picking list">
                    <group col="6" colspan="4" attrs="{'readonly': [('state','not in',['draft','auto'])]}">
                        <field name="name" readonly="1"/>
                        <field name="address_id" required="1"/>
                        <field name="origin"/>
                        <field name="backorder_id" groups="base.group_extended" readonly="1"/>
                        <field name="date" />
                        <field name="min_date"/>
                        <field name="stock_journal_id" groups="base.group_extended" widget="selection"/>
                        <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                        <field name="type" invisible="1"/>
                    </group>
                        <notebook colspan="4">
                        <page string="General Information">
                            <field colspan="4" name="move_lines" nolabel="1" widget="one2many_list" default_get="{'move_line':move_lines, 'address_out_id': address_id}" >
                                <tree colors="grey:scrapped == True" string="Stock Moves">
                                    <field name="name" string="Move Name"/>
                                    <field name="product_id"/>
                                    <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                    <field name="product_uom" string="UOM"/>
                                    <field name="picking_id" />
                                    <field name="prodlot_id" groups="base.group_extended"/>
                                    <field groups="base.group_extended" name="tracking_id"/>
                                    <button name="setlast_tracking" string="Put in current pack" type="object"
                                        attrs="{'invisible': [('tracking_id','&lt;&gt;',False)]}"
                                        groups="base.group_extended"
                                        icon="terp-stock_effects-object-colorize"
                                        states="draft,assigned,confirmed,done"/>
                                    <button name="%(split_into)d" string="Put in a new pack" type="action"
                                        icon="terp-stock_effects-object-colorize"
                                        states="draft,assigned,confirmed,done"
                                        groups="base.group_extended"/>
                                    <field name="location_id"/>
                                    <field name="location_dest_id"/>
                                    <field name="date_planned"/>
                                     <field name="date_expected" string="Date Expected"/>
                                    <field name="state"/>
                                    <button
                                           name="%(stock.track_line)d"
                                           string="Split in production lots"
                                           type="action" icon="terp-stock_effects-object-colorize"
                                           groups="base.group_extended"
                                           states="draft,waiting,confirmed,assigned" />
                                   <button name="%(stock.move_scrap)d"
                                        string="Scrap Products" type="action"
                                        icon="gtk-convert" context="{'scrap': True}"
                                        states="draft,waiting,confirmed,assigned" />
                                    <field name="scrapped" invisible="1"/>
                                </tree>
                                <form string="Stock Moves">
                                    <notebook colspan="4">
                                        <page string="General Information">
                                            <separator colspan="4" string="Move Information"/>
                                            <field name="location_id" domain="[('usage','=','internal')]"/>
                                            <field name="location_dest_id" domain="[('usage','&lt;&gt;','view')]"/>
                                            <field colspan="4" context="location=location_id" name="product_id" on_change="onchange_product_id(product_id, location_id, location_dest_id, parent.address_id)"/>
                                            <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                            <field name="product_uom"/>
                                            <field groups="product.group_uos" name="product_uos" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                            <field groups="product.group_uos" name="product_uos_qty"/>
                                            <field colspan="4" invisible="1" name="name"/>
                                            <field invisible="1" name="date"/>
                                            <field name="date_planned"/>
                                             <field name="date_expected"  string="Date Expected"/>
                                            <field groups="base.group_extended" name="product_packaging"  domain="[('product_id','=',product_id)]"/>
                                            <newline/>
                                            <field name="prodlot_id" groups="base.group_extended"
                                                context="{'location_id':location_id, 'product_id':product_id}"
                                                domain="[('product_id','=?',product_id)]"
                                                on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id)"/>
                                            <field groups="base.group_extended" name="tracking_id"/>

                                            <label/>
                                            <button name="%(track_line)d" string="Split in production lots"
                                            groups="base.group_extended"
                                            states="draft,waiting,confirmed,assigned"
                                            type="action" icon="terp-stock_effects-object-colorize"/>
                                            <label/>
                                            <button name="%(split_into)d" string="Put in a new pack" type="action"
                                                groups="base.group_extended"
                                                icon="terp-stock_effects-object-colorize"
                                                states="draft,assigned,confirmed,done"/>
                                            <separator colspan="4" string="Move State"/>
                                            <field name="state"/>
                                            <group colspan="2">
                                                <button name="force_assign" states="confirmed" string="Force Availability" type="object" icon="gtk-jump-to"/>
                                                <button name="cancel_assign" states="assigned" string="Cancel Availability" type="object" icon="gtk-find"/>
                                                <button name="action_cancel" states="assigned" string="Cancel" type="object" icon="gtk-cancel"/>
                                            </group>
                                        </page>
                                    </notebook>
                                </form>
                            </field>
                            <group col="10" colspan="4">
                                <field name="state" readonly="1"/>
                                <button name="draft_force_assign" states="draft" string="Process Later" type="object" icon="gtk-ok"/>
                                <button name="draft_validate" states="draft" string="Process Now" type="object" icon="gtk-media-play"/>
                                <button name="action_assign" states="confirmed" string="Check Availability" type="object" icon="gtk-find"/>
                                <button name="force_assign" states="confirmed" string="Force Availability" type="object" icon="gtk-jump-to"/>
                                <button name="%(action_partial_picking)d" states="assigned" string="Products Sent" type="action" icon="gtk-go-forward"/>
								<button name="%(action_stock_invoice_onshipping)d"  string="Create Invoice" type="action" icon="terp-document-new" attrs="{'invisible':[('invoice_state','!=','2binvoiced')]}"/>                                
                                <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel" icon="gtk-cancel"/>
                            </group>
                        </page>
                        <page string="Notes">
                            <field colspan="4" name="note" nolabel="1"/>
                        </page>
                        <page string="Other info" groups="base.group_extended">
                            <field name="auto_picking"/>
                            <newline/>
                            <field name="date_done"/>
                            <field name="move_type"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

       <record id="view_stock_delivery_filter" model="ir.ui.view">
            <field name="name">stock.view_stock_delivery_filter.list.select</field>
            <field name="model">stock.picking</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Stock Delivery">
                    <group col="10" colspan="4">
                        <filter icon="terp-check" name="available" string="Available" domain="[('state','=','assigned')]" help="Assigned Orders" />
                        <filter icon="terp-camera_test" string="Confirmed" domain="[('state','=','confirmed')]" help="Confirmed Orders"/>
                        <separator orientation="vertical"/>
                        <filter icon="terp-accessories-archiver-minus" string="Back Order" domain="[('backorder_id','!=',False)]" help="Back Order"/>
                        <separator orientation="vertical"/>
                        <field name="name"/>
                        <field name="address_id"/>
                        <field name="origin"/>
                        <field name="stock_journal_id" groups="base.group_extended" widget="selection"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By..." colspan="4" col="10">
                        <filter string="Partner" icon="terp-personal" domain="[]"  context="{'group_by':'address_id'}"/>
                        <filter string="State" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="Order Date" icon="terp-go-month" domain="[]" context="{'group_by':'date'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_picking_tree_delivery" model="ir.actions.act_window">
            <field name="name">Delivery Orders</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','delivery')]</field>
            <field name="context">{'contact_display': 'partner',"search_default_available":1}</field>
            <field name="search_view_id" ref="view_stock_delivery_filter"/>
        </record>
        <record id="action_picking_tree_delivery_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_delivery_tree"/>
            <field name="act_window_id" ref="action_picking_tree_delivery"/>
        </record>
        <record id="action_picking_tree_delivery_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_picking_delivery_form"/>
            <field name="act_window_id" ref="action_picking_tree_delivery"/>
        </record>
        <record id="action_picking_tree_delivery_view2_calendar" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="act_window_id" ref="action_picking_tree_delivery"/>
        </record>
        <menuitem action="action_picking_tree_delivery" id="menu_action_picking_tree_delivery" parent="menu_stock_warehouse_mgmt" sequence="7"/>

        #
        # Sending Products
        #

        <record id="view_picking_out_tree" model="ir.ui.view">
            <field name="name">stock.picking.out.tree</field>
            <field name="model">stock.picking</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree colors="blue:state in ('draft');grey:state in ('cancel');red:state not in ('cancel', 'done') and date &lt; current_date" string="Picking list">
                    <field name="name"/>
                    <field name="address_id"/>
                    <field name="origin"/>
                    <field name="date"/>
                    <field name="min_date"/>
                    <field name="backorder_id" groups="base.group_extended"/>
                    <field name="invoice_state"/>
                    <field name="stock_journal_id" groups="base.group_extended" widget="selection"/>
                    <field name="state"/>
                    <button name="%(action_partial_picking)d" states="assigned" string="Approve" type="action" icon="gtk-go-forward" help="Approve Picking"/>
                </tree>
            </field>
        </record>
        <record id="view_picking_out_form" model="ir.ui.view">
            <field name="name">stock.picking.out.form</field>
            <field name="model">stock.picking</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Picking list">
                    <group col="6" colspan="4">
                        <field name="address_id" required="1" />
                        <field name="min_date"/>
                        <field name="name" readonly="1"/>
                        <field name="invoice_state"/>
                        <field name="backorder_id" readonly="1"/>
                        <field name="origin" readonly="1"/>
                        <field name="type" invisible="1"/>
                        <field name="stock_journal_id" groups="base.group_extended" widget="selection"/>
                        <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                    </group>
                    <notebook colspan="4">
                        <page string="General Information">
                            <field colspan="4" name="move_lines" nolabel="1" widget="one2many_list" default_get="{'move_line':move_lines, 'address_out_id': address_id}" >
                                <tree colors="grey:scrapped==True" string="Stock Moves">
                                    <field name="product_id"/>
                                    <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                    <field name="product_uom" string="UOM"/>
                                    <button name="%(stock.move_scrap)d"
                                        string="Scrap Products" type="action"
                                        icon="gtk-convert" context="{'scrap': True}"
                                        states="draft,waiting,confirmed,assigned" />
                                    <field name="prodlot_id" groups="base.group_extended"/>
                                    <button name="%(track_line)d" string="Split in production lots" type="action"
                                        icon="terp-stock_effects-object-colorize" attrs="{'invisible': [('prodlot_id','&lt;&gt;',False)]}"
                                        states="draft,assigned,confirmed,done"
                                        groups="base.group_extended"/>
                                    <field name="tracking_id" groups="base.group_extended"/>
                                    <button name="setlast_tracking" string="Put in current pack" type="object"
                                        attrs="{'invisible': [('tracking_id','&lt;&gt;',False)]}"
                                        groups="base.group_extended"
                                        icon="terp-stock_effects-object-colorize"
                                        states="draft,assigned,confirmed,done"/>
                                    <button name="%(split_into)d" string="Put in a new pack" type="action"
                                        icon="terp-stock_effects-object-colorize"
                                        groups="base.group_extended"
                                        states="draft,assigned,confirmed,done"/>
                                    <field name="location_id"/>
                                    <field name="date_planned"/>
                                    <field name="state"/>
                                    <button name="%(action_partial_move)d" string="Partial" type="action" states="confirmed,assigned" icon="gtk-justify-fill"/>
                                    <button name="action_done" states="confirmed,assigned" string="Done" type="object" icon="gtk-jump-to"/>
                                    <field name="scrapped" invisible="1"/>
                                </tree>
                                <form string="Stock Moves">
                                    <notebook colspan="4">
                                         <page string="General Information">
                                            <separator colspan="4" string="Move Information"/>
                                            <field name="location_id" domain="[('usage','=','internal')]"/>
                                            <field name="location_dest_id" domain="[('usage','&lt;&gt;','view')]"/>
                                            <field colspan="4" context="location=location_id" name="product_id" on_change="onchange_product_id(product_id, location_id, location_dest_id, parent.address_id)"/>
                                            <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)" />
                                            <field name="product_uom"/>
                                            <field groups="product.group_uos" name="product_uos" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                            <field groups="product.group_uos" name="product_uos_qty"/>
                                            <field colspan="4" invisible="1" name="name"/>
                                            <field invisible="1" name="date"/>
                                            <field name="date_planned"/>
                                             <field name="date_expected"  string="Date Expected"/>
                                            <field groups="base.group_extended" name="product_packaging" domain="[('product_id','=',product_id)]"/>
                                            <newline/>
                                            <field name="prodlot_id" groups="base.group_extended"
                                                context="{'location_id':location_id, 'product_id':product_id}"
                                                domain="[('product_id','=?',product_id)]"
                                                on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id)"/>
                                            <field groups="base.group_extended" name="tracking_id"/>
                                            <label/>
                                            <button name="%(track_line)d" string="Split in production lots" type="action" icon="terp-stock_effects-object-colorize"
                                                states="draft,assigned,confirmed,done"
                                                groups="base.group_extended"
                                             />
                                            <label/>
                                            <button name="%(split_into)d" string="Put in a new pack" type="action"
                                                groups="base.group_extended"
                                                icon="terp-stock_effects-object-colorize"
                                                states="draft,assigned,confirmed,done"/>
                                            <label/>
                                            <separator colspan="4" string="Move State"/>
                                            <field name="state"/>
                                            <group colspan="2">
                                                <button name="force_assign" states="confirmed" string="Force Availability" type="object"  icon="gtk-jump-to"/>
                                                <button name="cancel_assign" states="assigned" string="Cancel Availability" type="object"  icon="gtk-no"/>
                                                <button name="action_cancel" states="assigned" string="Cancel" type="object"  icon="gtk-cancel"/>
                                            </group>
                                        </page>
                                    </notebook>
                                </form>
                            </field>
                            <group col="10" colspan="4">
                                <field name="state" readonly="1"/>
                                <button name="draft_force_assign" states="draft" string="Process Later" type="object" icon="gtk-ok"/>
                                <button name="draft_validate" states="draft" string="Process Now" type="object" icon="gtk-yes"/>
                                <button name="action_assign" states="confirmed" string="Check Availability" type="object" groups="base.group_extended" icon="gtk-apply"/>
                                <button name="force_assign" states="confirmed" string="Force Availability" type="object" icon="gtk-jump-to"/>
                                <button name="%(action_partial_picking)d" states="assigned" string="Done" type="action" icon="gtk-execute"/>
								<button name="%(action_stock_invoice_onshipping)d"  string="Create Invoice" type="action" icon="terp-document-new" attrs="{'invisible':[('invoice_state','!=','2binvoiced')]}"/>                                
                                <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel" icon="gtk-cancel"/>
                            </group>
                        </page>
                        <page string="Notes">
                            <field colspan="4" name="note" nolabel="1"/>
                        </page>
                        <page string="Other info" groups="base.group_extended">
                            <field name="auto_picking"/>
                            <newline/>
                            <field name="date_done"/>
                            <field name="move_type"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        <record id="view_picking_out_search" model="ir.ui.view">
            <field name="name">stock.picking.out.search</field>
            <field name="model">stock.picking</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Picking list">
                    <group col="8" colspan="4">
                        <filter icon="terp-check" name="available" string="Available" domain="[('state','=','assigned')]" help="Assigned Outgoing Orders"/>
                        <filter icon="terp-camera_test" name="confirmed" string="Confirmed" domain="[('state','=','confirmed')]" help="Confirmed Outgoing Orders"/>
                        <separator orientation="vertical"/>
                        <filter icon="terp-accessories-archiver-minus" string="Back Orders" domain="[('backorder_id', '&lt;&gt;', False)]" help="Has Back Order"  />
                        <separator orientation="vertical"/>
                        <field name="name"/>
                        <field name="address_id" />
                        <field name="origin"/>
                        <field name="stock_journal_id" groups="base.group_extended" widget="selection"/>
                        <field name="company_id" widget="selection" groups="base.group_multi_company"/>
                   </group>
                    <newline/>
                    <group expand="0" string="Group By..." colspan="4" col="8">
                        <filter string="Partner" icon="terp-personal" domain="[]" context="{'group_by':'address_id'}"/>
                        <filter string="State" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="Order Date" icon="terp-go-month" domain="[]"  context="{'group_by':'date'}"/>
                        <filter string="Expected Date" icon="terp-go-month" domain="[]"  context="{'group_by':'min_date'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_picking_tree" model="ir.actions.act_window">
            <field name="name">Outgoing Orders</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','out')]</field>
            <field name="context">{'contact_display': 'partner', 'search_default_available': 1}</field>
            <field name="search_view_id" ref="view_picking_out_search"/>
        </record>
        <record id="action_picking_tree_out_view1_waiting" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_out_tree"/>
            <field name="act_window_id" ref="action_picking_tree"/>
        </record>
        <record id="action_picking_tree_out_view2_waiting" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_picking_out_form"/>
            <field name="act_window_id" ref="action_picking_tree"/>
        </record>
        <record id="action_picking_tree_out_view2_waiting_cal" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="act_window_id" ref="action_picking_tree"/>
        </record>
        <menuitem action="action_picking_tree" id="menu_action_picking_tree" parent="menu_stock_warehouse_mgmt" sequence="3"/>

        <record id="view_picking_in_tree" model="ir.ui.view">
            <field name="name">stock.picking.in.tree</field>
            <field name="model">stock.picking</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree colors="blue:state in ('draft');grey:state in ('done');red:state not in ('cancel', 'done') and date &lt; current_date" string="Picking list">
                    <field name="name"/>
                    <field name="address_id"/>
                    <field name="backorder_id" groups="base.group_extended"/>
                    <field name="origin"/>
                    <field name="date"/>
                    <field name="min_date"/>
                    <field name="invoice_state" groups="base.group_extended"/>
                    <field name="stock_journal_id" groups="base.group_extended" widget="selection"/>
                    <field name="state"/>
                    <button name="%(action_partial_picking)d" states="assigned" string="Approve" type="action" icon="gtk-ok" help="Receive products"/>
                    <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel" icon="gtk-cancel" help="Cancel" confirm="This operation will cancel the shipment. Do you want to continue?" />
                </tree>
            </field>
        </record>
        <record id="view_picking_in_form" model="ir.ui.view">
            <field name="name">stock.picking.in.form</field>
            <field name="model">stock.picking</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Input Picking List">
                    <group colspan="4" col="6">
                        <field name="name" readonly="1"/>
                        <field name="address_id" on_change="onchange_partner_in(address_id)" context="{'contact_display':'partner'}" required="1" />
                        <field name="origin"/>
                        <field name="backorder_id" readonly="1" groups="base.group_extended"/>
                        <field name="date"/>
                        <field name="type"/>
                        <field name="min_date" readonly="1"/>
                        <field name="invoice_state" string="Invoice Control"/>
                        <field name="stock_journal_id" groups="base.group_extended" widget="selection"/>
                        <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                    </group>
                    <notebook colspan="4">
                        <page string="General Information">
                            <field colspan="4" name="move_lines" nolabel="1" widget="one2many_list" default_get="{'move_line':move_lines, 'address_in_id': address_id}" >
                                <tree colors="grey:scrapped==True" string="Stock Moves">
                                    <field name="product_id" readonly="1"/>
                                    <field name="product_qty" readonly="1"/>
                                    <field name="product_uom" string="UOM" readonly="1"/>
                                    <field name="location_dest_id"/>
                                    <field name="prodlot_id" groups="base.group_extended"/>
                                      <button
                                           name="%(stock.track_line)d"
                                           string="Split in production ii lots"
                                            groups="base.group_extended"
                                           type="action" icon="terp-stock_effects-object-colorize"
                                           states="draft,waiting,confirmed,assigned" />
                                    <field name="tracking_id" groups="base.group_extended"/>
                                    <button name="setlast_tracking" string="Put in current pack" type="object"
                                        groups="base.group_extended"
                                        icon="terp-stock_effects-object-colorize" attrs="{'invisible': [('tracking_id','&lt;&gt;',False)]}"
                                        states="draft,assigned,confirmed,done"/>
                                    <button name="%(split_into)d" string="Put in a new pack" type="action"
                                        groups="base.group_extended"
                                        icon="terp-stock_effects-object-colorize"
                                        states="draft,assigned,confirmed"/>
                                    <field name="state"/>
                                    <button name="%(stock.move_scrap)d"
                                        string="Scrap Products" type="action"
                                        icon="gtk-convert" context="{'scrap': True}"
                                        states="draft,waiting,confirmed,assigned" />
                                    <field name="scrapped" invisible="1"/>
                                </tree>
                                <form string="Stock Moves">
                                    <notebook colspan="4">
                                        <page string="General Information">
                                            <separator colspan="4" string="Move Information"/>
                                            <field name="location_id" domain="[('usage','&lt;&gt;','view')]"/>
                                            <field domain="[('usage','=','internal')]" name="location_dest_id" />
                                            <field colspan="4" context="location=location_id" name="product_id" on_change="onchange_product_id(product_id, location_id, location_dest_id, parent.address_id)"/>
                                            <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                            <field name="product_uom"/>
                                            <field groups="product.group_uos" name="product_uos_qty"/>
                                            <field colspan="4" invisible="1" name="name" />
                                            <field groups="base.group_extended" name="date_planned"/>
                                           <field name="date_expected" groups="base.group_extended" string="Date Expected"/>
                                            <field groups="product.group_uos" name="product_uos" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                            <newline/>
                                            <newline/>
                                            <field name="prodlot_id" groups="base.group_extended" context="{'location_id':location_id, 'product_id':product_id}" domain="[('product_id','=?',product_id)]" on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id)"/>
                                            <field groups="base.group_extended" name="tracking_id"/>

                                            <newline/>
                                            <label/>
                                             <button groups="base.group_extended" name="%(track_line)d" string="Split in production lots" type="action" icon="terp-stock_effects-object-colorize" states="draft,assigned,confirmed"/>
                                            <label/>
                                            <button name="%(split_into)d" string="Split Stock Moves" type="action"
                                              groups="base.group_extended"
                                              icon="terp-stock_effects-object-colorize" attrs="{'invisible': [('tracking_id','&lt;&gt;',False)]}" states="draft,assigned,confirmed,done"/>
                                            <separator colspan="4" string="Move State"/>
                                            <field name="state"/>
                                            <group colspan="2">
                                                <button name="force_assign" states="confirmed" string="Force Availability" type="object" icon=""/>
                                                <button name="cancel_assign" states="assigned" string="Cancel Availability" type="object" icon=""/>
                                                <button name="action_cancel" states="assigned" string="Cancel" type="object" icon=""/>
                                            </group>
                                        </page>
                                    </notebook>
                                </form>
                            </field>
                            <group col="10" colspan="4">
                                <field name="state" readonly="1"/>
                                <button name="draft_force_assign" states="draft" string="Process Later" type="object" icon="gtk-ok"/>
                                <button name="draft_validate" states="draft" string="Process Now" type="object" icon="gtk-media-play"/>
                                <button name="action_assign" states="confirmed" string="Check Availability" type="object" icon="gtk-find"/>
                                <button name="force_assign" states="confirmed" string="Force Availability" type="object" groups="base.group_extended" icon="gtk-jump-to"/>
                                <button name="%(action_partial_picking)d" states="assigned" string="Products Received" type="action" icon="gtk-ok"/>
								<button name="%(action_stock_invoice_onshipping)d"  string="Create Invoice" type="action" icon="terp-document-new" attrs="{'invisible':[('invoice_state','!=','2binvoiced')]}"/>                                
                                <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel" icon="gtk-cancel"/>
                            </group>
                        </page>
                        <page string="Notes">
                            <field colspan="4" name="note" nolabel="1"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        <record id="view_picking_in_search" model="ir.ui.view">
            <field name="name">stock.picking.in.search</field>
            <field name="model">stock.picking</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Input Picking List">
                    <group col="8" colspan="4">
                        <filter icon="terp-check" name="available" string="Available" domain="[('state','=','assigned')]" help="Assigned Incoming Orders" />
                        <separator orientation="vertical" />
                        <filter icon="terp-accessories-archiver-minus" string="Back Order" domain="[('backorder_id', '!=', False)]" help="Has Back Order" groups="base.group_extended"/>
                        <separator orientation="vertical"/>
                        <field name="name"/>
                        <field name="address_id"/>
                        <field name="origin"/>
                        <field name="stock_journal_id" groups="base.group_extended" widget="selection"/>
                        <field name="company_id" widget="selection" groups="base.group_multi_company" />
                    </group>
                    <newline/>
                    <group expand="0" string="Group By..." colspan="4" col="8">
                        <filter icon="terp-stock_effects-object-colorize" name="state" string="State" domain="[]" context="{'group_by':'state'}"/>
                        <separator orientation="vertical" />
                        <filter string="Partner" icon="terp-personal" domain="[]" context="{'group_by':'address_id'}"/>
                        <separator orientation="vertical" />
                        <filter string="Order Date" icon="terp-go-month" domain="[]"  context="{'group_by':'date'}"/>
                        <filter string="Expected Date" icon="terp-go-month" domain="[]"  context="{'group_by':'min_date'}"/>
                    </group>
                </search>
            </field>
        </record>


        <record id="action_picking_tree4" model="ir.actions.act_window">
            <field name="name">Incoming Shipments</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','in')]</field>
            <field name="context">{'contact_display': 'partner',"search_default_available":1}</field>
            <field name="search_view_id" ref="view_picking_in_search"/>
        </record>
        <record id="action_invoice_tree5_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_in_tree"/>
            <field name="act_window_id" ref="action_picking_tree4"/>
        </record>
        <record id="action_invoice_tree5_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_picking_in_form"/>
            <field name="act_window_id" ref="action_picking_tree4"/>
        </record>
        <record id="action_invoice_tree5_view2_cal" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="act_window_id" ref="action_picking_tree4"/>
        </record>
        <menuitem action="action_picking_tree4" id="menu_action_picking_tree4" parent="menu_stock_warehouse_mgmt" sequence="1"/>

        <record id="view_picking_internal_search" model="ir.ui.view">
            <field name="name">stock.picking.internal.search</field>
            <field name="model">stock.picking</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Internal Picking List">
                    <group col="8" colspan="4">
                        <filter icon="terp-check" string="Available" domain="[('state','=','assigned')]" help="Assigned Internal Moves"/>
                        <filter icon="terp-camera_test" name="confirmed" string="Confirmed" domain="[('state','=','confirmed')]" help="Confirmed Internal Moves" />
                        <separator orientation="vertical"/>
                        <field name="name"/>
                        <field name="origin"/>
                        <field name="stock_journal_id" groups="base.group_extended" widget="selection"/>
                        <field name="company_id" widget="selection"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By..." colspan="4" col="8">
                        <filter string="State" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="Order Date" icon="terp-go-month" domain="[]"  context="{'group_by':'date'}"/>
                        <filter string="Expected Date" icon="terp-go-month" domain="[]"  context="{'group_by':'min_date'}"/>
                        <filter string="Origin" icon="terp-gtk-jump-to-rtl" domain="[]" context="{'group_by':'origin'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_picking_tree6" model="ir.actions.act_window">
            <field name="name">Internal Moves</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','internal')]</field>
            <field name="context">{'contact_display': 'partner',"search_default_confirmed":1}</field>
            <field name="search_view_id" ref="view_picking_internal_search"/>
        </record>
        <menuitem action="action_picking_tree6" id="menu_action_picking_tree6" parent="menu_stock_warehouse_mgmt" sequence="2"/>

        <record id="view_move_tree" model="ir.ui.view">
            <field name="name">stock.move.tree</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field eval="6" name="priority"/>
            <field name="arch" type="xml">
                <tree colors="grey:state in ('cancel');red:(state not in ('cancel','done')) and date_planned > current_date" string="Moves" editable="top">
                    <field name="picking_id" select="1"/>
                    <field name="product_id"/>
                    <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                    <field name="product_uom" string="Unit Of Measure"/>
		    <field name="product_uos" groups="product.product_uos"/>
                    <button name="%(stock.move_scrap)d"
                        string="Scrap Products" type="action"
                        icon="gtk-convert" context="{'scrap': True}"
                        states="draft,waiting,confirmed,assigned" />
                    <field name="prodlot_id" groups="base.group_extended"/>
                    <button name="%(track_line)d" string="Split in Production Lots" type="action"
                        icon="gtk-justify-fill"
                       states="draft,waiting,confirmed,assigned,done"
                        groups="base.group_extended"/>
                    <field groups="base.group_extended" name="tracking_id"/>
                    <button name="setlast_tracking" string="Put in current pack" type="object"
                        groups="base.group_extended"
                        icon="terp-stock_effects-object-colorize" attrs="{'invisible': [('tracking_id','&lt;&gt;',False)]}"
                        states="draft,assigned,confirmed,done"/>
                    <button name="%(split_into)d" string="Put in a new pack" type="action"
                        groups="base.group_extended"
                        icon="terp-stock_effects-object-colorize"
                        states="draft,assigned,confirmed,done"/>
                    <field name="location_id"/>
                    <field name="location_dest_id"/>
                    <field name="date_planned"/>
                    <field name="date_expected"/>
                    <field name="state"/>
                    <button name="action_done" states="confirmed,assigned" string="Done" type="object" icon="gtk-jump-to"/>
                </tree>
            </field>
        </record>

<!--        <menuitem id="menu_traceability_low" name="Low Level" parent="menu_traceability"/> -->

        <record id="view_move_form" model="ir.ui.view">
            <field name="name">stock.move.form</field>
            <field name="model">stock.move</field>
            <field name="type">form</field>
            <field eval="4" name="priority"/>
            <field name="arch" type="xml">
                <form string="Stock Moves">
                    <notebook colspan="4">
                        <page string="General Information">
                            <group colspan="2" col="2">
                                <separator colspan="2" string="Move Information"/>
                                <field name="name"/>
                                <field name="product_id" on_change="onchange_product_id(product_id,location_id,location_dest_id, parent.address_id)"/>
                                <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                <field name="product_uom" string="Unit Of Measure" widget="selection"/>
                                <field name="product_uos_qty" groups="product.product_uos" />
                                <field name="product_uos" groups="product.product_uos" />
                            </group>

                            <group colspan="2" col="2">
                                <separator string="Locations &amp; Picking" colspan="2" />
                                <field name="location_id" widget="selection"/>
                                <field name="location_dest_id" widget="selection"/>
                                <field name="picking_id"/>
                                <field name="address_id" context="{'contact_display':'partner'}"/>
                                <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                            </group>

                            <group colspan="2" col="2">
                                <separator string="Dates &amp; Priority" colspan="2" />
                                <field name="date"/>
                                <field name="date_planned"/>
                                <field name="date_expected"/>
                                <field name="priority"/>
                            </group>

                            <group colspan="2" col="4">
                                <separator string="Traceability" colspan="4" />
                                <field name="tracking_id" colspan="4" />
                                <field name="prodlot_id" groups="base.group_extended"
                                    context="{'location_id':location_id, 'product_id':product_id}"
                                    domain="[('product_id','=?',product_id)]"
                                    on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id)"/>
                                <newline/>
                                <group colspan="4" col="4">
                                  <label/>
                                  <button name="%(track_line)d"
                                      groups="base.group_extended"
                                      states="draft,waiting,confirmed,assigned,done"
                                      string="Split in production lots" type="action" icon="terp-stock_effects-object-colorize" colspan="2" />
                                  <label/>
                                  <button name="%(split_into)d" string="Put in a new pack" type="action"
                                      groups="base.group_extended"
                                      icon="terp-stock_effects-object-colorize"
                                      states="draft,assigned,confirmed,done"/>
				                   <button name="%(stock.move_scrap)d"
				                        string="Scrap Products" type="action"
				                        icon="gtk-convert" context="{'scrap': True}"
				                        states="draft,waiting,confirmed,assigned" />                                      
                                </group>
                            </group>
                        </page>
                    </notebook>
                    <group col="6" colspan="4">
                        <field name="state"/>
                        <button name="action_confirm" states="draft" string="Confirm" type="object" icon="gtk-apply"/>
                        <button name="action_assign" states="confirmed" string="Set Available" type="object" icon="gtk-yes"/>
                        <button name="action_cancel" states="assigned,confirmed" string="Cancel" type="object" icon="gtk-cancel"/>
                        <button name="action_done" states="assigned" string="Make Parcel" type="object" icon="gtk-jump-to"/>
                    </group>
                </form>
            </field>
        </record>

        <record id="view_move_search" model="ir.ui.view">
            <field name="name">stock.move.search</field>
            <field name="model">stock.move</field>
            <field name="type">search</field>
            <field eval="3" name="priority"/>
            <field name="arch" type="xml">
                <search string="Stock Moves">
                    <group col="8" colspan="4">
                        <filter icon="terp-dialog-close" string="Done" name="done" domain="[('state','=','done')]" help="Stock moves"/>
                        <filter icon="terp-stock" string="Future" name="future" domain="[('state','in',('assigned','confirmed','waiting'))]" help="Future stock moves"/>
                        <filter icon="terp-camera_test" string="Ready" name="ready" domain="[('state','=','assigned')]" help="Future stock moves that are ready"/>
                        <separator orientation="vertical"/>
                        <field name="product_id"/>
                        <field name="location_id" string="Location" filter_domain="['|',('location_id','ilike',self),('location_dest_id','ilike',self)]"/>
                        <field name="address_id" string="Partner" context="{'contact_display':'partner'}" filter_domain="[('picking_id.address_id','ilike',self)]"/>
                        <field name="date_planned"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By..." colspan="4" col="8">
                        <filter string="Product" name="by_product" icon="terp-accessories-archiver" domain="[]"  context="{'group_by':'product_id'}"/>
                        <filter string="Lot" name="prodlot_id" icon="terp-accessories-archiver" domain="[]"  context="{'group_by':'prodlot_id'}"/>
                        <filter string="Packing" name="picking_id" icon="terp-accessories-archiver" domain="[]"  context="{'group_by':'picking_id'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Source" icon="terp-gtk-jump-to-rtl" domain="[]" context="{'group_by':'location_id'}"/>
                        <filter string="Destination" icon="terp-gtk-jump-to-ltr" domain="[]" context="{'group_by':'location_dest_id'}"/>
                        <separator orientation="vertical"/>
                        <filter icon="terp-stock_effects-object-colorize" string="State" domain="[]" context="{'group_by':'state'}" />
                        <separator orientation="vertical"/>
                        <filter string="Creation" icon="terp-go-month" domain="[]" context="{'group_by':'date'}"/>
                        <filter string="Expected" icon="terp-go-month" domain="[]" context="{'group_by':'date_planned'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_move_form2" model="ir.actions.act_window">
            <field name="name">Stock Moves</field>
            <field name="res_model">stock.move</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_move_tree"/>
            <field name="search_view_id" ref="view_move_search"/>
            <field name="context">{'search_default_Available':1}</field>
        </record>
        <menuitem action="action_move_form2" id="menu_action_move_form2" parent="menu_traceability" sequence="1"/>

        ====================================
        Reception Picking (By Stock Move)
        ====================================

        <record id="view_move_tree_reception_picking" model="ir.ui.view">
            <field name="name">stock.move.tree2</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field eval="6" name="priority"/>
            <field name="arch" type="xml">
                <tree colors="grey:state in ('cancel')" string="Moves">
                    <field name="picking_id" string="Reference"/>
                    <field name="origin"/>
                    <field name="partner_id" string="Supplier"/>
                    <field name="product_id"/>
                    <field name="product_qty" />
                    <field name="product_uom" string="UoM"/>
                    <button name="%(stock.move_scrap)d"
                        string="Scrap Products" type="action"
                        icon="gtk-convert" context="{'scrap': True}"
                        states="draft,waiting,confirmed,assigned" />
                    <field name="prodlot_id" groups="base.group_extended"/>
                    <button name="%(track_line)d" string="Split in production lots" type="action"
                        icon="terp-stock_effects-object-colorize" attrs="{'invisible': [('prodlot_id','&lt;&gt;',False)]}"
                       states="draft,waiting,confirmed,assigned,done"
                        context="{'default_use_exist': picking_id.type=='in'}"
                        groups="base.group_extended"/>
                    <field name="tracking_id" groups="base.group_extended"/>
                    <button name="setlast_tracking" string="Put in current pack" type="object"
                        attrs="{'invisible': [('tracking_id','&lt;&gt;',False)]}"
                        groups="base.group_extended"
                        icon="terp-stock_effects-object-colorize"
                        states="draft,assigned,confirmed,done"/>
                    <button name="%(split_into)d" string="Put in a new pack" type="action"
                        groups="base.group_extended"
                        icon="terp-stock_effects-object-colorize"
                        states="draft,assigned,confirmed,done"/>
                    <field name="date_planned"/>
                    <field name="state"/>
                    <button name="%(action_partial_move)d" string="Partial" type="action" states="assigned" icon="gtk-justify-fill"/>
                    <button name="action_done" states="confirmed,assigned" string="Done" type="object" icon="gtk-jump-to"/>
                </tree>
            </field>
        </record>

        <record id="view_move_form_reception_picking" model="ir.ui.view">
            <field name="name">stock.move.form2</field>
            <field name="model">stock.move</field>
            <field name="type">form</field>
            <field eval="6" name="priority"/>
            <field name="arch" type="xml">
                <form string="Moves">
                    <notebook colspan="4">
                        <page string="General Information">
                            <separator colspan="4" string="Move Information"/>
                            <field name="location_id" widget="selection"/>
                            <field name="location_dest_id" widget="selection"/>
                            <field colspan="4" name="product_id" on_change="onchange_product_id(product_id, location_id, location_dest_id, address_id)"/>
                            <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                            <field name="product_uom" widget="selection"/>
                            <field name="product_uos_qty" groups="product.product_uos"/>
                            <field name="product_uos" widget="selection" groups="product.product_uos"/>
                            <field colspan="4" name="name"/>
                            <field name="date"/>
                            <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                            <field name="date_planned"/>
                            <field name="date_expected"/>
                            <field name="priority"/>
                            <field name="address_id" context="{'contact_display':'partner'}"/>
                            <field name="picking_id"/>
                            <newline/>
                            <field name="prodlot_id" groups="base.group_extended"
                                context="{'location_id':location_id, 'product_id':product_id}"
                                domain="[('product_id','=?',product_id)]"
                                on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id)"/>
                            <field groups="base.group_extended" name="tracking_id"/>
                            <newline/>
                              <label/>
                            <button name="%(track_line)d" string="Split in production lots"
                               states="draft,waiting,confirmed,assigned,done"
                              groups="base.group_extended"
                              type="action" icon="terp-stock_effects-object-colorize"/>
                              <label/>
                               <button name="%(split_into)d" string="Put in a new pack" type="action"
                                  groups="base.group_extended"
                                  icon="terp-stock_effects-object-colorize"
                                  states="draft,assigned,confirmed,done"/>
                              <label/>
                            <separator colspan="4" string="Move State"/>
                            <field name="state"/>
                            <group col="5" colspan="2">
                                <button name="action_confirm" states="draft" string="Confirm" type="object" icon="gtk-apply"/>
                                <button name="action_cancel" states="assigned,confirmed" string="Cancel" type="object" icon="gtk-cancel"/>
                                <button name="action_assign" states="confirmed" string="Set Available" type="object" icon="gtk-yes"/>
                                <button name="%(action_partial_move)d" states="assigned,confirmed" string="Partial" type="action" icon="gtk-justify-fill"/>
                                <button name="action_done" states="assigned" string="Done" type="object" icon="gtk-jump-to"/>
                            </group>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        <record id="view_move_search_reception_picking" model="ir.ui.view">
            <field name="name">stock.move.search2</field>
            <field name="model">stock.move</field>
            <field name="type">search</field>
            <field eval="6" name="priority"/>
            <field name="arch" type="xml">
                <search string="Stock Moves">
                    <group col="8" colspan="4">
                        <filter icon="terp-go-today" string="Today" domain="[('date_planned','&lt;=',time.strftime('%%Y-%%m-%%d 23:59:59')),('date_planned','&gt;=',time.strftime('%%Y-%%m-%%d 00:00:00'))]" help="Orders planned for today"/>
                        <separator orientation="vertical"/>
                        <filter icon="terp-gtk-go-back-rtl" name="receive" string="To Do" domain="[('state','in',('confirmed','assigned'))]" help="Stock to be received"/>
                        <filter icon="terp-check" name="received" string="Done" domain="[('state','=','done')]"/>
                        <separator orientation="vertical"/>
                        <field name="origin"/>
                        <field name="partner_id" string="Partner"/>
                        <field name="product_id"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By..." colspan="4" col="8">
                        <filter string="Product" icon="terp-accessories-archiver" domain="[]" context="{'group_by':'product_id'}"/>
                        <filter string="Supplier" icon="terp-accessories-archiver" domain="[]" context="{'group_by':'partner_id'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Order" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'origin'}"/>
                        <filter string="State" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'state'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Order Date" icon="terp-go-month" domain="[]" context="{'group_by':'date_planned'}" />
                    </group>
                    <newline/>
                    <group expand="0" string="Extended options..." groups="base.group_extended">
                       <field name="tracking_id" context="{'tracking': self}" filter_domain="[]" />
                    </group>
                </search>
            </field>
        </record>

        <record id="action_reception_picking_move" model="ir.actions.act_window">
            <field name="name">Incoming Products</field>
            <field name="res_model">stock.move</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('picking_id.type','=','in')]</field>
            <field name="view_id" ref="view_move_tree_reception_picking"/>
            <field name="context">{"search_default_receive":1}</field>
            <field name="search_view_id" ref="view_move_search_reception_picking"/>
        </record>

        <record model="ir.actions.act_window.view" id="action_move_reception_picking_tree">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_move_tree_reception_picking"/>
            <field name="act_window_id" ref="action_reception_picking_move"/>
        </record>
        <record model="ir.actions.act_window.view" id="action_move_reception_picking_form">
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_move_form_reception_picking"/>
            <field name="act_window_id" ref="action_reception_picking_move"/>
        </record>

        # -------------------------------------------------------------
        # Stock incoterms
        # -------------------------------------------------------------
        <record id="view_incoterms_tree" model="ir.ui.view">
            <field name="name">stock.incoterms.tree</field>
            <field name="model">stock.incoterms</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Incoterms">
                    <field name="code"/>
                    <field colspan="4" name="name"/>
                </tree>
            </field>
        </record>
        <record id="stock_incoterms_form" model="ir.ui.view">
            <field name="name">stock.incoterms.form</field>
            <field name="model">stock.incoterms</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Incoterms">
                    <field colspan="4" name="name" select="1"/>
                    <field name="code" select="1"/>
                    <field name="active" select="1"/>
                </form>
            </field>
        </record>
        <record id="action_incoterms_tree" model="ir.actions.act_window">
            <field name="name">Incoterms</field>
            <field name="res_model">stock.incoterms</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <act_window
            context="{'location': active_id}"
            domain="[('type','&lt;&gt;','service')]"
            id="act_product_location_open"
            name="Products"
            res_model="product.product"
            src_model="stock.location"/>

        <act_window
            context="{'location': active_id, 'search_default_done': 1}"
            domain="[('product_id','=',active_id)]"
            id="act_product_stock_move_open"
            name="Stock Moves"
            res_model="stock.move"
            src_model="product.product"/>

        <act_window
            domain="[('move_lines','in',[active_id])]"
            id="act_relate_picking"
            name="Related Picking"
            res_model="stock.picking"
            src_model="stock.move"/>

        <act_window
            context="{'location': active_id, 'search_default_future': 1}"
            domain="[('product_id','=',active_id),('state','in',('waiting','confirmed','assigned'))]"
            id="act_product_stock_move_futur_open"
            name="Future Stock Moves"
            res_model="stock.move"
            src_model="product.product"
            groups="base.group_extended"/>

        <record id="ir_act_product_location_open" model="ir.values">
            <field name="key2">tree_but_open</field>
            <field name="model">stock.location</field>
            <field name="name">Products</field>
            <field eval="'ir.actions.act_window,%d'%act_product_location_open" name="value"/>
            <field eval="True" name="object"/>
        </record>    


        <record id="ir_act_product_location_open" model="ir.values">
            <field name="key2">tree_but_open</field>
            <field name="model">stock.location</field>
            <field name="name">Open Products</field>
            <field eval="'ir.actions.act_window,%d'%action_view_stock_location_product" name="value"/>
            <field eval="True" name="object"/>
        </record>  

        <!-- Graph Views -->
        <!--  Products To Received Vs Planned -->
        <record model="ir.ui.view" id="view_move_graph_reception_picking_tree">
            <field name="name">Products To Received</field>
            <field name="model">report.products.to.received.planned</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Products To Received" >
                    <field name="qty" />
                    <field name="planned_qty" />
                    <field name="date"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="view_move_graph_reception_picking">
            <field name="name">Products To Received</field>
            <field name="model">report.products.to.received.planned</field>
            <field name="type">graph</field>
            <field name="arch" type="xml">
            <graph string="Products To Received" type="bar" orientation="vertical">
                <field name="date"/>
                <field name="qty" operator="+"/>
                <field name="planned_qty" operator="+"/>
            </graph>
            </field>
        </record>

        <record id="action_move_graph_reception_picking" model="ir.actions.act_window">
            <field name="name">Number of Products to receive Vs planned</field>
            <field name="res_model">report.products.to.received.planned</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">graph,tree</field>
            <field name="view_id" ref="view_move_graph_reception_picking"/>
        </record>

        <!--  Delivery Product Vs Planned -->
        <record model="ir.ui.view" id="view_move_delivery_products_planned_tree">
            <field name="name">Delivery Products</field>
            <field name="model">report.delivery.products.planned</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Products To Received" >
                    <field name="qty" />
                    <field name="planned_qty" />
                    <field name="date"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="view_move_delivery_products_planned_graph">
            <field name="name">Delivery Products</field>
            <field name="model">report.delivery.products.planned</field>
            <field name="type">graph</field>
            <field name="arch" type="xml">
            <graph string="Products To Received" type="bar" orientation="vertical">
                <field name="date"/>
                <field name="qty" operator="+"/>
                <field name="planned_qty" operator="+"/>
            </graph>
            </field>
        </record>

        <record id="action_move_delivery_products_planned" model="ir.actions.act_window">
            <field name="name">Delivery Products Vs Planned</field>
            <field name="res_model">report.delivery.products.planned</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">graph,tree</field>
            <field name="view_id" ref="view_move_delivery_products_planned_graph"/>
        </record>

        <record id="action_picking_tree_out" model="ir.actions.act_window">
            <field name="name">Customers Packings</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','out')]</field>
            <field name="context">{'contact_display': 'partner',"search_default_available":1}</field>
            <field name="search_view_id" ref="view_picking_in_search"/>
        </record>
        <record id="action_invoice_tree5_out" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_in_tree"/>
            <field name="act_window_id" ref="action_picking_tree_out"/>
        </record>
        <record id="action_invoice_tree5_view2_out" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_picking_in_form"/>
            <field name="act_window_id" ref="action_picking_tree_out"/>
        </record>
        <record id="action_invoice_tree5_viewout_cal" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="act_window_id" ref="action_picking_tree_out"/>
        </record>

        <record id="action_out_picking_move" model="ir.actions.act_window">
            <field name="name">Outgoing Products</field>
            <field name="res_model">stock.move</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('picking_id','!=',False),('picking_id.type','=','out')]</field>
            <field name="view_id" ref="view_move_tree_reception_picking"/>
            <field name="context">{"search_default_receive":1}</field>
            <field name="search_view_id" ref="view_move_search_reception_picking"/>
        </record>

        <record model="ir.actions.act_window.view" id="action_move_out_picking_tree">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_move_tree_reception_picking"/>
            <field name="act_window_id" ref="action_out_picking_move"/>
        </record>
        <record model="ir.actions.act_window.view" id="action_move_out_picking_form">
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_move_form_reception_picking"/>
            <field name="act_window_id" ref="action_out_picking_move"/>
        </record>

      <menuitem action="action_reception_picking_move" id="menu_action_pdct_in" parent="menu_stock_products_moves" sequence="1"/>
      <menuitem action="action_out_picking_move" id="menu_action_pdct_out" parent="menu_stock_products_moves" sequence="2"/>


         <record id="view_stock_journal_filter" model="ir.ui.view">
            <field name="name">stock.journal.filter</field>
            <field name="model">stock.journal</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Stock Journal">
                    <field name="name"/>
                    <field name="user_id"/>
                </search>
            </field>
        </record>
        <record model="ir.ui.view" id="view_stock_journal_tree">
            <field name="name">Stock Journals</field>
            <field name="model">stock.journal</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Stock Journal">
                    <field name="name"/>
                    <field name="user_id"/>
                </tree>
            </field>
        </record>
        <record model="ir.ui.view" id="view_stock_journal_form">
            <field name="name">Stock Journals</field>
            <field name="model">stock.journal</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Stock Journal">
                    <field name="name"/>
                    <field name="user_id"/>
                </form>
            </field>
        </record>
        <record id="action_stock_journal_form" model="ir.actions.act_window">
            <field name="name">Stock Journals</field>
            <field name="res_model">stock.journal</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
        </record>
        <menuitem
            action="action_stock_journal_form"
            id="menu_action_stock_journal_form"
            groups="base.group_extended"
            parent="menu_warehouse_config" />

    </data>
</openerp>
