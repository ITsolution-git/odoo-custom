<openerp>
    <data>

        <record id="view_account_followup_followup_line_tree" model="ir.ui.view">
            <field name="name">account_followup.followup.line.tree</field>
            <field name="model">account_followup.followup.line</field>
            <field name="arch" type="xml">
                <tree string="Follow-up Steps" >
                    <field name="name"/>
                    <field name="delay"/>
                    <!--<field name="start"/>-->

                </tree>
            </field>
        </record>

        <record id="view_account_followup_followup_line_form" model="ir.ui.view">
            <field name="name">account_followup.followup.line.form</field>
            <field name="model">account_followup.followup.line</field>
            <field name="arch" type="xml">
                <form string="Follow-up Steps" version="7.0">
                                         
                       	<field name="name"/>
                       	<group>
                       	<label for="delay"/>
                       	<div class="oe_inline">
                        <field name="delay" style="width: 25%%"/>
                        <!--<field name="start" style="width: 25%%"/>--> 
                       	</div> 
                       	</group>
                       	<div class="oe_grey">
                       		<label string="The actions checked below will be executed when running the wizard, the actions of the previous level were done and the current date is greater than or equal to the due date of an invoice + the amount of days above.  The action will be done at most once for every overdue invoice.  "/>
                       	</div>
                    <separator string="Processing actions"/>
                    <group>
                      <group>
                       <field name="send_letter"/>
                       <field name="phonecall"/>
                       <field name="manual_action" attrs="{'invisible': [('phonecall', '=', False)]}"/>
                       <field name="action_responsible" attrs="{'invisible': [('phonecall', '=', False)]}"/>
                      </group>
                      <group>
                       <field name="send_email"/>
                      </group>
                    </group>
                    <separator string="Message"/>
                    <group col="4">
                    <field name="description"  attrs="{'invisible': [('send_letter', '=', False)]}" colspan="2"/>
                   <group> 
                    <field name="email_template_id" attrs="{'invisible': [('send_email', '=', False)]}" on_change="on_change_template(email_template_id)"/>
                    <field name="email_body" attrs="{'invisible': [('send_email', '=', False)]}" colspan="2"/>
                   </group> 
                    </group>
                    <separator string="Legend"/>
                    <group attrs="{'invisible': [('send_letter', '=', False)]}">
                        <label string="%%(partner_name)s: Partner Name"/>
                        <label string="%%(date)s: Current Date"/>
                        <label string="%%(user_signature)s: User Name"/>
                        <label string="%%(company_name)s: User's Company Name"/>
                    </group>
                </form>
            </field>
        </record>

        <record id="view_account_followup_followup_form" model="ir.ui.view">
            <field name="name">account_followup.followup.form</field>
            <field name="model">account_followup.followup</field>
            <field name="arch" type="xml">
                <form string="Follow-up" version="7.0">
                    <group col="4">
                        <field name="name"/>
                        <field name="company_id" widget="selection" groups="base.group_multi_company"/>
                    </group>
                    <group>
                    <field name="followup_line"/>
                    </group>
                </form>
            </field>
        </record>

        <record id="view_account_followup_followup_tree" model="ir.ui.view">
            <field name="name">account_followup.followup.tree</field>
            <field name="model">account_followup.followup</field>
            <field name="arch" type="xml">
                <tree string="Follow-up">
                    <field name="name"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                </tree>
            </field>
        </record>

        <record id="view_account_followup_filter" model="ir.ui.view">
            <field name="name">account.followup.select</field>
            <field name="model">account_followup.followup</field>
            <field name="arch" type="xml">
                <search string="Search Follow-up">
                    <field name="name" string="Follow-up"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                </search>
            </field>
        </record>

        <record id="action_account_followup_definition_form" model="ir.actions.act_window">
            <field name="name">Follow-ups</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">account_followup.followup</field>
            <field name="search_view_id" ref="view_account_followup_filter"/>
            <field name="view_type">form</field>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to define follow-up levels and their related messages.
              </p><p>
                For each step, specify the message and the day of delay. Use
                the legend to know the using code to adapt the email content to
                the good context (good name, good date) and you can manage the
                multi language of messages.
              </p>
            </field>
        </record>
        <menuitem action="action_account_followup_definition_form" id="account_followup_menu" parent="account.menu_configuration_misc"/>

        <report auto="False" id="account_followup_followup_report" menu="False" model="account_followup.followup" name="account_followup.followup.print" rml="account_followup/report/account_followup_print.rml" string="Follow-up Report"/>

        <record id="account_move_line_partner_tree" model="ir.ui.view">
            <field name="name">account.move.line.partner.tree</field>
            <field name="model">account.move.line</field>
            <field eval="32" name="priority"/>
            <field name="arch" type="xml">
                <tree colors="red:state == 'draft';black:state == 'validate'" editable="bottom" string="Partner entries">
                    <field name="date"/>
                    <field name="move_id"/>
                    <field name="ref"/>
                    <field name="name"/>
                    <field name="partner_id"/>
                    <field name="account_id"/>
                    <field name="followup_line_id"/>
                    <field name="followup_date"/>
                    <field name="debit" sum="Total debit"/>
                    <field name="credit" sum="Total credit"/>

                    <field name="state"/>
                    <field name="date_maturity"/>
                </tree>
            </field>
        </record>

        <record id="view_move_line_form" model="ir.ui.view">
            <field name="name">account.move.line.form.followup</field>
            <field name="model">account.move.line</field>
            <field name="inherit_id" ref="account.view_move_line_form"/>
            <field name="arch" type="xml">
                <field name="date_created" position="after">
                    <field name="followup_line_id"/>
                    <field name="followup_date"/>
                </field>
            </field>
        </record>

        <record id="view_move_line_tree" model="ir.ui.view">
            <field name="name">account.move.line.tree.followup</field>
            <field name="model">account.move.line</field>
            <field name="inherit_id" ref="account.view_move_line_tree"/>
            <field name="arch" type="xml">
                <field name="state" position="before">
                    <field name="followup_date"/>
                    <field name="followup_line_id"/>
                </field>
            </field>
        </record>

        <act_window domain="[('reconcile_id', '=', False),('account_id.type','=','receivable')]" id="act_account_partner_account_move_all" name="Receivable Items" res_model="account.move.line" src_model="" view_id="account_move_line_partner_tree"/>

      <!--<menuitem action="act_account_partner_account_move_all" id="menu_account_move_open_unreconcile" parent="account_followup.menu_action_followup_stat"/> -->

        <act_window domain="[('reconcile_id', '=', False), ('account_id.type','=','payable')]" id="act_account_partner_account_move_payable_all" name="Payable Items" res_model="account.move.line" src_model="" view_id="account_move_line_partner_tree"/>

      <!-- <menuitem action="act_account_partner_account_move_payable_all" id="menu_account_move_open_unreconcile_payable" parent="account_followup.menu_action_followup_stat"/> -->

      <!--COMPANY VIEW NOT NECESSARY ANYMORE  <record model="ir.ui.view" id="view_company_inherit_followup_form">
            <field name="name">res.company.followup.form.inherit</field>
            <field name="inherit_id" ref="account.view_company_inherit_form"/>
            <field name="model">res.company</field>
            <field name="arch" type="xml">
                <field name="overdue_msg" nolabel="1" colspan="4" position="after">
                    <separator string="Follow-up Message" colspan="4"/>
                    <field name="follow_up_msg" nolabel="1" colspan="4"/>
                </field>
            </field>
     </record> -->
    </data>
</openerp>