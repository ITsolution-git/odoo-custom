-
  In order to test the purchase flow, I start it from the Quotation.
-
  First of all I create a request for quotation.
-
  I want to buy 'Metal Cleats' product for a supplier but the purchase is not confirmed yet. 
-
  !record {model: purchase.order, id: purchase_order_po0}:
    company_id: base.main_company
    date_order: !eval time.strftime('%Y-%m-%d')
    invoice_method: order
    location_id: stock.stock_location_stock
    order_line:
      - date_planned: !eval time.strftime('%Y-%m-%d')
        name: Metal Cleats
        price_unit: 100.0
        product_id: product.product_product_metalcleats0
        product_qty: 10.0
        product_uom: product.product_uom_unit
        state: draft
    partner_address_id: base.res_partner_address_7
    partner_id: base.res_partner_4
    pricelist_id: purchase.list0
-
  Initially purchase order is in the draft state.
-
  !assert {model: purchase.order, id: purchase_order_po0}:
    - state == 'draft'
-
  I confirm the purchase order for Metal Cleats.
-
  !workflow {model: purchase.order, action: purchase_confirm, ref: purchase_order_po0}
-
  I check that the order which was initially in the draft state has transit to confirm state.
-
  !assert {model: purchase.order, id: purchase_order_po0}:
    - state == 'approved'
