-
  In order to test the purchase flow, I compute the total of the ordered products.
  "Basic PC" product price is 450.20 and ordered 2 'PCE'
  "New server config + material" product price is 150.50 and ordered 5 'PCE'
-
  !python {model: purchase.order}: |
    self.button_dummy(cr, uid, [ref('order_purchase1')], context)
-
  I check the total of the ordered products.
  Total should be [(450.20*2)+(150.50*5)] = 1652.90
-
  !assert {model: purchase.order, id: order_purchase1, string: The amount of total should be 1652.90}:
    - amount_total == 1652.90
-
  I confirm the purchase order.
-
  !workflow {model: purchase.order, action: purchase_confirm, ref: order_purchase1,order_purchase2}
-
  I check that the order which was initially in the draft state has transit to confirm state.
-
  !assert {model: purchase.order, id: order_purchase1}:
    - state == 'approved'
