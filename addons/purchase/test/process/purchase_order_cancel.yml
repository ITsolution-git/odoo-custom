-
  In order to test to Cancel purchase order from Different State,I start cancel the confirm order.
-
  I have to first cancel Picking of Purchase order .
-
  !python {model: stock.picking}: |
    search_ids=self.search(cr, uid, [('purchase_id', '=', ref("order_purchase4"))])
    self.action_cancel(cr, uid, search_ids)
-
  Now I am able to cancel purchase order because related picking was cancel.
-
  !python {model: purchase.order}: |
    self.action_cancel(cr, uid, [ref("order_purchase4")])
-
  Initially purchase order is in the cancel state.
-
  !assert {model: purchase.order, id: order_purchase4}:
    - state == 'cancel'
-
  Now again set purchase order to draft state.
-
  !python {model: purchase.order}: |
    self.action_cancel_draft(cr, uid, [ref("order_purchase4")]) 
-
  Initially purchase order is in the draft state.
-
  !assert {model: purchase.order, id: order_purchase4}:
    - state == 'draft'
-
  I have to cancel order form draft state.
-
  !python {model: purchase.order}: |
    self.action_cancel(cr, uid, [ref("order_purchase4")])
-
  Initially purchase order is in the cancel state.
-
  !assert {model: purchase.order, id: order_purchase4}:
    - state == 'cancel'
-
  Now again put it in draft state.
-
  !python {model: purchase.order}: |
    self.action_cancel_draft(cr, uid, [ref("order_purchase4")]) 
-
  Initially purchase order is in the draft state.
-
  !assert {model: purchase.order, id: order_purchase4}:
    - state == 'draft'
