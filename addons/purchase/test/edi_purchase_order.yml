-
  I Tesing of EDI functionality. First I export customer invoice from my company than import that invoice into customer company
-
  !python {model: ir.edi.document}: |
  	import json
    order_pool = self.pool.get('purchase.order')
    purchase_id = order_pool.search(cr, uid, [])
    orders = order_pool.browse(cr, uid, purchase_id)
    
    if type(orders).__name__ == 'list':
      tokens = self.export_edi(cr, uid, orders)
      for token in tokens:
        document = self.get_document(cr, uid, token)
        document = json.loads(document)
        edi_doc = []
        for doc in document:
          doc.update({'__model': 'sale.order'})
          edi_doc.append(doc)
        a = self.import_edi(cr, uid, edi_document = json.dumps(edi_doc))
    else:
      tokens = self.export_edi(cr, uid, orders)
      for token in tokens:
        document = self.get_document(cr, uid, token)
        document = json.loads(document)
        edi_doc = []
        for doc in document:
          doc.update({'__model': 'sale.order'})
          edi_doc.append(doc)
        a = self.import_edi(cr, uid, edi_document = json.dumps(edi_doc))
    
    
