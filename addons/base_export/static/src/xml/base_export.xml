<template>

    <t t-name="ExportView">
        <a id="exportview" href="javascript: void(0)" style="text-decoration: none;color: #3D3D3D;">Export</a>
    </t>

    <t t-name="ExportTreeView">
        <table class="view" style="background-color: #F3F3F3;">
            <tr>
                <td align="left">
                    This wizard will export all data that matches the current search criteria to a CSV file.
                    You can export all data or only the fields that can be reimported after modification.
                </td>
            </tr>
            <tr>
                <td>
                    <table>
                        <tr>
                            <td class="label"><label>Export Type:</label></td>
                            <td>
                                <select id="import_compat" name="import_compat"  style="background-color: #F3F3F3;" >
                                    <option value="1">Import Compatible Export</option>
                                    <option value="0">Export all Data</option>
                                </select>
                            </td>
	                        <td class="label"><label>Export Format</label></td>
	                        <td>
	                            <select id="export_format" name="export_format">
	                                <option value="csv">CSV</option>
	                                <option value="xls">Excel</option>
	                            </select>
	                        </td>

                        </tr>
                    </table>
                </td>
            </tr>

            <tr>
                <td>
                    <table class="fields-selector-export">
                        <tr>
                            <th class="oe_view_title" valign="bottom">Available fields</th>
                            <th class="oe_view_title"></th>
                            <th class="oe_view_title">Fields to export
                            <a style="color: blue; text-decoration: none;" href="#" id="export_new_list">Save fields list</a>
                            <div id="savenewlist"></div>
                            <div id="ExistsExportList"></div>
                            </th>
                        </tr>
                        <tr>
                            <td class="fields-selector-left">
                                <div id="left_field_panel">
                                </div>
                            </td>
                            <td>
                                <table class="fields-selector-center">
                                    <tr>
                                        <td align="center">
                                            <button id="add_field" class="button-export">Add</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td align="center">
                                            <button id="remove_field" class="button-export">Remove</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td align="center">
                                            <button id="remove_all_field" class="button-export">Remove All</button>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                            <td class="fields-selector-right">
                                <select name="fields_list" id="fields_list" multiple="multiple"></select>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </t>

    <t t-name="ExportTreeView-Secondary">
        <table id="field-tree-structure" class="fields-selector-export" cellspacing="0" cellpadding="0">
            <tr><th class="tree_header"> Name </th></tr>
            <t t-call="ExportTreeView-Secondary.children"/>
        </table>
    </t>
    <t t-name="ExportTreeView-Secondary.children">
        <t t-foreach="fields" t-as="field" >
            <tr t-att-id="'treerow-' + field.id" class="row">
                <td>
                    <table class="tree-grid" border="0">
                        <tr class="row">
                            <t t-foreach="(field.id).split('/')" t-as="level" >
                                <t t-if="(field.id).split('/')[0] != level">
                                    <td width="18">&amp;nbsp;</td>
                                </t>
                            </t>
                            <td valign="top" align="left" style="cursor: pointer;" width="18">
                                <t t-if="(field.children).length >= 1">
                                    <t t-if="(field.id).split('/').length != 3">
                                        <img t-att-id="'parentimg-' + field.id" src="/base_export/static/src/img/expand.gif" width="16" height="16" border="0"/>
                                    </t>
                                </t>
                            </td>
                            <td id="tree-column" valign="middle" align="left" style="cursor: pointer;">
                                <a t-att-id="'export-' + field.id"  t-att-string="field.string" href="javascript: void(0);" style="text-decoration: none;">
                                    <t t-esc="field.string"/>
                                </a>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </t>
    </t>

    <t t-name="ExportNewList">
        <tr>
            <th><label>Save as:</label></th>
            <td><input size="10" type="text" id="savelist_name"/></td>
            <td><button class="button-export" id="add_export_list">Ok</button></td>
        </tr>
    </t>

    <t t-name="Exists.ExportList">
        <tr><th align="right"><label >Saved exports:</label></th></tr>
        <tr align="left">
            <td>
                <select id="saved_export_list" style="width: 100%;">
                    <option></option>
                    <t t-foreach="existing_exports" t-as="export">
                        <option t-att-value="export.id"><t t-esc="export.name"/></option>
                    </t>
                </select>
            </td>
            <td><button class="button-export" id="delete_export_list">Delete</button></td>
        </tr>
    </t>
</template>