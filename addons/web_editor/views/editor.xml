<?xml version="1.0" encoding="utf-8"?>
<odoo>
<template id="summernote" name="Summernote">
    <script type="text/javascript">
        (function () {
            "use strict";
            odoo.define('jquery', function () {return $;});

            var uniqId = 0;
            odoo.__define__ = window.define;
            window.define = function (id) {
                var args = Array.prototype.slice.call(arguments);
                var factorie = args.pop();
                var id = args[0];

                if (id instanceof Array) {
                    var name = "summernote_factorie_" + (++uniqId);
                    odoo[name] = factorie;

                    var head = '';
                    var fn = 'var fn = odoo.'+name+';\ndelete odoo.'+name+';\n';
                    fn += 'return fn(';
                    for (var k=0; k&lt;id.length; k++) {
                        head += 'var a'+(++uniqId)+' = require("'+id[k]+'");\n';
                        fn += 'a'+uniqId+', ';
                    }
                    fn += 'null);';

                    odoo.define(odoo.website_next_define, new Function('require', head + fn));
                } else {
                    odoo.define(id, factorie);
                }
            };
        })();
    </script>
    <t t-set="summer_js_files" t-value="['core/async', 'core/func', 'core/agent', 'core/list',
        'core/dom', 'core/key', 'core/range', 'editing/Bullet', 'editing/History', 'editing/Style',
        'editing/Table', 'editing/Typing', 'module/Editor', 'module/Button', 'module/Clipboard',
        'module/Codeview', 'module/DragAndDrop', 'module/Fullscreen', 'module/Handle',
        'module/HelpDialog', 'module/ImageDialog', 'module/LinkDialog', 'module/Popover',
        'module/Statusbar', 'module/Toolbar', 'Renderer', 'EventHandler', 'defaults', 'summernote']" />
    <t t-foreach="summer_js_files" t-as="file">
        <script>odoo.website_next_define = 'summernote/<t t-esc="file" />';</script>
        <script type="text/javascript" t-attf-src="/web_editor/static/lib/summernote/src/js/{{ file }}.js"></script>
    </t>
    <script type="text/javascript" src="/web_editor/static/src/js/summernote.js" />
    <script type="text/javascript">
        window.define = odoo.__define__;
        delete odoo.__define__;
        delete odoo.website_next_define;
    </script>
    <link rel="stylesheet" type="text/less" href="/web_editor/static/lib/summernote/src/less/summernote.less"/>
</template>

<template id="less_helpers" inherit_id="web.less_helpers">
    <xpath expr="." position="inside">
        <link rel="stylesheet" type="text/less" href="/web_editor/static/src/less/web_editor.variables.less"/>
    </xpath>
</template>

<template id="assets_common" inherit_id="web.assets_common" name="web_editor base assets_common">
    <xpath expr="script[last()]" position="after">
        <script type="text/javascript" src="/web_editor/static/src/js/base.js" />
        <script type="text/javascript" src="/web_editor/static/src/js/snippets.animation.js" />
    </xpath>
</template>

<template id="assets_backend" inherit_id="web.assets_backend" name="web_editor assets for backend">
    <xpath expr="link[last()]" position="after">
        <link rel="stylesheet" type="text/less" href="/web_editor/static/src/less/web_editor.common.less"/> <!-- not in common because compiled diffently with context -->
        <link rel="stylesheet" type="text/less" href="/web_editor/static/src/less/web_editor.backend.less"/>
    </xpath>
    <xpath expr="script[last()]" position="after">
        <script type="text/javascript" src="/web_editor/static/src/js/backend.js" />
    </xpath>
</template>

<template id="assets_frontend" inherit_id="web.assets_frontend">
    <xpath expr="//link[last()]" position="after">
        <link rel="stylesheet" type="text/less" href="/web_editor/static/src/less/web_editor.common.less"/> <!-- not in common because compiled diffently with context -->
    </xpath>
</template>

<template id="assets_editor" name="Full web_editor assets">
    <t t-call="web.less_helpers"/>
    
    <link rel="stylesheet" type="text/less" href="/web_editor/static/src/less/web_editor.ui.less"/>
    <link rel="stylesheet" type="text/less" href="/web_editor/static/src/less/web_editor.ui.components.less"/>

    <script type="text/javascript" src="/web_editor/static/lib/nearest/jquery.nearest.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/editor.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/rte.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/rte.summernote.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/widgets.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/snippets.editor.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/snippets.options.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/tour.rte.js"/>
    <script type="text/javascript" src="/web_editor/static/src/js/transcoder.js"></script>
    <script type="text/javascript" src="/web_editor/static/src/js/translator.js"></script>
</template>

<template id="webclient_bootstrap" inherit_id="web.webclient_bootstrap">
    <xpath expr="//t[@t-call-assets='web.assets_backend'][@t-js='false']" position="after">
        <t t-call-assets="web_editor.summernote" t-js="false"/>
        <t t-call-assets="web_editor.assets_editor" t-js="false"/>
    </xpath>
    <xpath expr="//t[@t-call-assets='web.assets_backend'][@t-css='false']" position="after">
        <t t-call-assets="web_editor.summernote" t-css="false"/>
        <t t-call-assets="web_editor.assets_editor" t-css="false"/>
    </xpath>
</template>

<!-- color-picker -->
<!-- HTML class to hide option for one mode : only-text, only-bg -->

<template id="web_editor.colorpicker" name="Color-Picker">
    <div class="colorpicker">
        <div class="theme">
            <button class="bg-accent">Accent <span></span></button>
            <button class="bg-compl">Complementary<span></span></button>
            <button class="bg-alpha">Alpha <span></span></button>
            <button class="bg-beta">Beta <span></span></button>
            <button class="bg-gamma">Gamma <span></span></button>
        </div>
        <div class="grayscale">
            <button class="bg-white">White <span></span></button>
            <button class="bg-gray_lighter">Gray Lighter <span></span></button>
            <button class="bg-gray_light">Gray Light <span></span></button>
            <button class="bg-gray">Gray <span></span></button>
            <button class="bg-gray_dark">Gray Dark <span></span></button>
            <button class="bg-gray_darker">Gray Darker <span></span></button>
            <button class="bg-black">Black <span></span></button>
        </div>
        <div class="ui">
            <button class="bg-primary">Primary Color <span></span></button>
            <button class="bg-success">Success Color <span></span></button>
            <button class="bg-info">Info Color <span></span></button>
            <button class="bg-warning">Warning Color <span></span></button>
            <button class="bg-danger">Danger Color <span></span></button>
        </div>
    </div>
</template>
</odoo>
