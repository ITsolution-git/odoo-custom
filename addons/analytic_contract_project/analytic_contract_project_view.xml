<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <record id="project_account_analytic_account_form" model="ir.ui.view">
            <field name="name">project.project.form.inherit</field>
            <field name="model">project.project</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="project.edit_project"/>
            <field eval="18" name="priority"/>
            <field name="arch" type="xml">
                <xpath expr='//page[@name="team"]' position='before'>
                    <page string="Contract Data">
						<group col="4" colspan="4">
							<group colspan="2" col= "2" class="oe_form_group_label_border">
								<separator colspan="2" string="Validity"/>
								<field name="date_start"/>
								<field name="date"/>
								<group col="6" colspan="2" class="oe_form_group_label_border">
									<field name="quantity_max"/>
									<field name="company_uom_id" nolabel="1" readonly="1"/>
									<field name="remaining_hours" string="/ Remaining"/>
								</group>
							</group>
							<group colspan="2" col= "2" class="oe_form_group_label_border">
								<separator colspan="2" string="Invoice Rate"/>
								<field name="manager_id" />
								<field name="pricelist_id" attrs="{'invisible': [('invoice_on_timesheets','=',0)]}"/>
								<field name="to_invoice" widget="selection" attrs="{'invisible': [('invoice_on_timesheets','=',0)]}"/>
							</group>
						</group>
						<separator colspan="4" string="Invoicing"/>
						<group colspan="4" col="6">
                        <!-- header -->
                        <div class="oe_field_label" colspan="2"/>
                        <group colspan="4" col="6">
                            <div class="oe_field_label_bold">Est.Tot</div>
                            <div class="oe_field_label_bold">Invoiced</div>
                            <div class="oe_field_label_bold">Remaining</div>
                            <div class="oe_field_label_bold">To Invoice</div>
                            <div class="oe_btn_width_small"/>
                            <div class="oe_btn_width"/>
                        </group>
                        
                        <!-- center -->
                        
                        <field class="oe_field_label" name="fix_price_invoices" />
                        <group colspan="4" col="6" attrs="{'invisible': [('fix_price_invoices','=',False)]}">
                            <field class="oe_float_field" name="amount_max" nolabel="1"   />
                            <field class="oe_float_field" name="ca_invoiced" nolabel="1"   />
                            <field class="oe_float_field" name="remaining_ca" nolabel="1"   />
                            <field class="oe_float_field" name="ca_to_invoice" nolabel="1"   />
                            <div><button class="oe_btn_width_small" icon="terp-check" name="%(account_analytic_analysis.action_sales_order_line)d" string="Sales" type="action" context="{'default_project_id': active_id,'search_default_project_id': active_id}"/></div>
                            <div><button class="oe_btn_width" icon="terp-dolar_ok!" name="%(sale.action_order_line_tree2)d" string="Lines To Invoice" type="action" context="{'default_project_id': active_id,'search_default_project_id': active_id}"/></div>
                        </group>
                        
                        <field class="oe_field_label" name="invoice_on_timesheets"/>
                         <group colspan="4" col="6" attrs="{'invisible': [('invoice_on_timesheets','=',False)]}">
                            <field class="oe_float_field" name="hours_qtt_est" nolabel="1" />
                            <field class="oe_float_field" name="hours_qtt_invoiced" nolabel="1"/>
                            <field class="oe_float_field" name="remaining_hours" nolabel="1" />
                            <field class="oe_float_field" name="hours_qtt_non_invoiced" nolabel="1" />
                            <div><button class="oe_btn_width_small" icon="terp-go-week" name="%(hr_timesheet.act_hr_timesheet_line_evry1_all_form)d" string="Timesheets" type="action" /></div>
                            <div><button class="oe_btn_width" icon="terp-dolar" name="%(hr_timesheet_invoice.act_acc_analytic_acc_2_report_acc_analytic_line_to_invoice)d" string="Invoice Timesheets" type="action"/></div>
                        </group>
                        
                        <!-- footer -->
                        
                        <div class="oe_field_label oe_border_right" style="max-width:200px;" colspan="2">Total  </div>
                        <group colspan="4" col="6" >
                            <field name="est_total" nolabel="1" class="oe_float_field oe_border_top"/>
                            <field name="invoiced_total" nolabel="1" class="oe_float_field oe_border_top"/>
                            <field name="remaining_total" nolabel="1" class="oe_float_field oe_border_top"/>
                            <field name="toinvoice_total" nolabel="1" class="oe_float_field oe_border_top"/>
                            <div class="oe_btn_width_small"/>
                            <div class="oe_btn_width"/>
                        </group>
                      </group>
						<separator string="Terms and Conditions" colspan="4" name="description"/>
						<field colspan="4" name="description" nolabel="1"/>
					</page>
				</xpath>
			</field>
        </record>
    </data>
</openerp>
