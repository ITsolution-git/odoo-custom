-
  In order to test attendance process in OpenERP, at the time of login, I use "Sign In/Sign Out" wizard for attendances.
  I click on this wizard to login.
-
  !python {model: hr.sign.in.out}: |
    hr_employee = self.pool.get('hr.employee')
    uid = ref('base.user_al')
    emp_ids = hr_employee.search(cr, uid, [('user_id', '=', uid)])
    if emp_ids:
        employee = hr_employee.browse(cr, uid, emp_ids)[0]
        id = self.create(cr, uid, {'emp_id': employee.id, 'name': employee.name, 'state': employee.state})
        self.si_check(cr, uid, [id])
-
  I check that Employee is "Present".
-
  !assert {model: hr.employee, id: hr.employee_al, severity: error, string: Employee should be in present state}:
    - state == 'present'
-
  I click on "Sign In" button of this wizard, this will Open a new form which ask for Last Sign Out date.
-
  !python {model: hr.sign.in.out}: |
    hr_employee = self.pool.get('hr.employee')
    uid = ref('base.user_al')
    emp_ids = hr_employee.search(cr, uid, [('user_id', '=', uid)])
    if emp_ids:
        employee = hr_employee.browse(cr, uid, emp_ids)[0]
        id = self.create(cr, uid, {'emp_id': employee.id, 'name': employee.name, 'state': employee.state})
        self.si_check(cr, uid, [id])
-
  I select Last Sign Out date.
-
  !record {model: hr.sign.in.out.ask, id: hr_sign_in_out_ask_Antony}:
    last_time: !eval time.strftime('%Y-%m-%d %H:%M:%S')
    name: Antony
-
  Now I click on "Sign In" button of this wizard.
-
  !python {model: hr.sign.in.out.ask}: |
    import time
    hr_employee = self.pool.get('hr.employee')
    uid = ref('base.user_al')
    emp_ids = hr_employee.search(cr, uid, [('user_id', '=', uid)])
    if emp_ids:
        employee = hr_employee.browse(cr, uid, emp_ids)[0]
        id = self.create(cr, uid, {'emp_id': employee.id, 'name': employee.name, 'last_time': time.strftime('%Y-%m-%d %H:%M:%S')})
-
  Finally i check the employee is present.
-
  !assert {model: hr.employee, id: hr.employee_al, severity: error, string: Employee should be in present state}:
    - state == 'present'
