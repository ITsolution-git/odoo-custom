<?xml version="1.0"?>
<openerp>
    <data>

        <record id="product_kanban_view" model="ir.ui.view">
            <field name="name">Product Kanban</field>
            <field name="model">product.product</field>
            <field name="type">kanban</field>
            <field name="arch" type="xml">
                <kanban>
                    <field name="color"/>
                    <field name="type"/>
                    <field name="product_image"/>
                    <field name="list_price"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_product_vignette">
                                <div class="oe_product_img">
                                <a type="edit"><img t-att-src="kanban_image('product.product', 'product_image', record.id.value)" class="oe_product_photo"/></a>
                                </div>
                                <div class="oe_product_desc">
                                    <h4><a type="edit"><field name="name"></field></a></h4>
                                    <ul>
                                        <li t-if="record.type.raw_value != 'service'">Stock on hand: <field name="qty_available"/> <field name="uom_id"/></li>
                                        <li t-if="record.type.raw_value != 'service'">Stock available: <field name="virtual_available"/> <field name="uom_id"/></li>
                                        <li>Price: <field name="lst_price"></field></li>
                                    </ul>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="action_picking_tree" model="ir.actions.act_window">
            <field name="name">Delivery Orders</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree</field>
            <field name="domain">[('type','=','out')]</field>
            <field name="context">{'default_type': 'out', 'contact_display': 'partner_address'}</field>
            <field name="search_view_id" ref="stock.view_picking_out_search"/>
            <field name="help">This is the list of all delivery orders that have to be prepared, according to your different sales orders and your logistics rules.</field>
        </record>

        <record id="product_normal_action" model="ir.actions.act_window">
            <field name="name">Products</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">product.product</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="view_id" ref="product.product_kanban_view"/>
            <field name="search_view_id" ref="product.product_search_form_view"/>
            <field name="help">You must define a Product for everything you buy or sell. Products can be raw materials, stockable products, consumables or services. The Product form contains detailed information about your products related to procurement logistics, sales price, product category, suppliers and so on.</field>
        </record>

        <menuitem name="Quotation" id="portal_quotation" parent="portal.portal_track_orders" action="sale.action_order_tree5"/>
        <menuitem name="Sales Orders" id="portal_sales_orders" parent="portal.portal_track_orders" action="sale.action_order_form"/>
        <menuitem name="Delivery Orders" id="portal_delivery" parent="portal.portal_track_orders" action="action_picking_tree"/>

        <menuitem name="Invoice" id="portal_invoice" parent="portal.portal_invoice_payements" action="account.action_invoice_tree1"/>
        <menuitem name="Payments" id="portal_payments" parent="portal.portal_invoice_payements" action="account_voucher.action_vendor_receipt"/>

        <menuitem name="Products" id="portal_products" parent="portal.portal_services" action="product_normal_action"/>

    </data>
</openerp>
