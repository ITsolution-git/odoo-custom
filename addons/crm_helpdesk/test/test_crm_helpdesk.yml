-
  |
  I start by creating New helpdesk request regarding some functional questions.
  I select Date at which helpdesk request is created.
- 
  !record {model: crm.helpdesk, id: crm_helpdesk_somefunctionalquestion0}:
    date: !eval time.strftime('%Y-%m-%d %H:%M:%S')
    email_from: info@balmerinc.be
    name: Some functional question.
    partner_address_id: base.res_partner_address_1
    partner_id: base.res_partner_9
    section_id: crm.section_sales_department
-
  Create the message.
-
  !python {model: crm.helpdesk}: |
    msg = {
       'subject': 'test_email',
       'body': 'Testing',
       'from': 'Administrator <admin@openerp.com>',
      }
    context = None
    self.message_new(cr, uid,msg,context)

- |
  I check that the Helpdesk request  is in 'Draft' state.
-
  !assert {model: crm.helpdesk, id: crm_helpdesk_somefunctionalquestion0}: 
    - state == 'draft'  
- |
  In order to make this helpdesk request to be considered I make it "Open"
-
  !python {model: crm.helpdesk}: |
    self.case_open(cr, uid, [ref('crm_helpdesk_somefunctionalquestion0')])  
-
  Update the created message.
-
  !python {model: crm.helpdesk}: |
    vals = {}
    msg = {
       'subject': 'test_email',
       'body': 'Testing',
       'from': 'Administrator <admin@openerp.com>',
      }
    context = None
    default_act = 'pending'
    self.message_update(cr, uid, [ref('crm_helpdesk_somefunctionalquestion0')], vals, msg, default_act, context)    
- |
  After a proper communication for the request via email I make sure that the request is fulfilled and
  I close this HelpDesk Request by clicking on "Close" button.
- 
  !python {model: crm.helpdesk}: |
    self.case_close(cr, uid, [ref('crm_helpdesk_somefunctionalquestion0')])
