<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>

    <record id="product_normal_form_view" model="ir.ui.view">
        <field name="name">product.normal.form.inherit</field>
        <field name="model">product.product</field>
        <field name="inherit_id" ref="product.product_normal_form_view"/>
        <field name="arch" type="xml">
            <!-- add state field in header -->
            <xpath expr="//sheet" position="before">
                <div class="oe_form_box_info oe_text_center" attrs="{'invisible': [('sale_ok', '=', False)]}">
                    <p attrs="{'invisible': [('website_published', '=', True)]}">
                        This product is <b>not available</b> for public user in your ecommerce.
                    </p>
                    <p attrs="{'invisible': [('website_published', '=', False)]}">
                        This product is <b>available</b> for public user in your ecommerce.
                    </p>
                    <p>Website view: <field class="oe_inline" name="website_url" widget="url"/></p>
                </div>
            </xpath>

            <group name="sale" position="inside">
                <group name="website" string="Website">
                    <field name="website_published"/>
                    <field name="suggested_product_ids" widget="many2many_tags"/>
                    <field name="website_style_ids" widget="many2many_tags"/>
                </group>
            </group>
        </field>
    </record>

    <record model="ir.ui.view" id="product_pricelist_view">
        <field name="name">product.pricelist.website.form</field>
        <field name="model">product.pricelist</field>
        <field name="inherit_id" ref="product.product_pricelist_view"/>
        <field name="arch" type="xml">
            <field name="active" position="after">
                <field name="code"/>
            </field>
        </field>
    </record>
    
    <!-- Layout add nav and footer -->

    <template id="header_footer" inherit_id="website.layout" name="Custom Footer">
        <xpath expr="//header//ul[@id='top_menu']/li" position="before">
            <li><a t-href="/shop/">Shop</a></li>
            <li>
                <a t-href="/shop/mycart/">
                    <i class="icon-shopping-cart"></i>
                    My cart <sup t-attf-class="my_cart_quantity label label-primary #{(not website_sale_order or not website_sale_order.get_total_quantity()) and 'hidden' or ''}"
                                  t-esc="website_sale_order and website_sale_order.get_total_quantity() or ''"/>
                </a>
            </li>
        </xpath>
    </template>
    <!-- List of categories -->

    <template id="categories_recursive">
        <li t-att-class="category.id == category_id and 'active' or ''">
            <a t-att-class="category.id not in categ[1] and 'unpublish' or ''" t-href="/shop/category/#{ category.id }/" t-field="category.name"></a>
            <ul t-if="category.child_id" class="nav nav-pills nav-stacked nav-hierarchy">
                <t t-foreach="category.child_id" t-as="category">
                    <t t-if="category.id in categ[1] or editable">
                        <t t-call="website_sale.categories_recursive"/>
                    </t>
                </t>
            </ul>
        </li>
    </template>

    <!-- Product list --> 

    <template id="products_cart">
      <div class="ribbon-wrapper">
        <div class="ribbon">Promo</div>
      </div>
      <div class="oe_product_description">
          <a t-href="/shop/product/#{ product.id }/?#{ search and ('search=%s' % search) or ''}#{ category_id and ('&amp;category_id=%s' % category_id) or ''}">
              <b t-field="product.name"/>
          </a>
          <div class="product_price">
              <b>
                  <t t-if="product.product_variant_ids[0].lst_price != product.product_variant_ids[0].price">
                    <span class="text-danger" style="text-decoration: line-through;">
                        <t t-esc="product.product_variant_ids[0].lst_price" /> €
                    </span>&amp;nbsp;
                  </t>
                  <t t-esc="product.product_variant_ids[0].price" /> €
              </b>
          </div>
      </div>

      <div class="oe_product_image text-center">
          <a t-href="/shop/product/#{ product.id }/?#{ search and ('search=%s' % search) or ''}#{ category_id and ('&amp;category_id=%s' % category_id) or ''}">
              <img class="img" t-att-src="product.img('image')"/>
          </a>
      </div>
    </template>

    <template id="products" page="True">
        <t t-call="website.layout">
            <t t-set="head">
                <script type="text/javascript" src="/website_sale/static/src/js/website_sale.js"></script>
                <link rel='stylesheet' href='/website_sale/static/src/css/website_sale.css'/>
                <t t-raw="head or ''"/>
            </t>
            <t t-set="title">Our Products</t>
            <div id="wrap">
              <div class="oe_structure"/>
              <div class="container oe_website_sale">
                <div class="row">
                    <div class="col-sm-4">
                        <h1>Our Products</h1>
                    </div><div class="col-sm-2 pagination text-center">
                        <a t-if="editable" t-href="/shop/#{ category_id and ('category/%s/' % category_id) or ''}add_product/" class="btn btn-primary btn-default">New Product</a>
                    </div><div class="col-sm-6">
                        <t t-call="website.pager">
                            <t t-set="classname">pull-right</t>
                        </t>
                        <form t-action="/shop/#{ category_id and ('category/%s/' % category_id) or ''}" method="get" class="pull-right pagination form-inline" style="padding-right: 5px;">
                            <div class="form-group">
                                <input type="text" name="search" class="search-query form-control" placeholder="Search..." t-att-value="search or ''"/>
                            </div>
                        </form>
                    </div>
                </div>

                <div class='style_default row'>
                  <div class="col-md-12" id="products_grid">
                    <table width="100%">
                      <colgroup>
                        <col style="width: 1px; margin-right: -1px;" />
                        <col class="col-md-3" />
                        <col class="col-md-3" />
                        <col class="col-md-3" />
                        <col class="col-md-3" />
                      </colgroup>
                      <tbody>
                        <t t-set="table_products" t-value="get_bin_packing_products(product_ids, product_ids_for_holes, 4)"/>
                        <tr t-foreach="table_products" t-as="tr_product">
                          <td class="oe-height-2"></td>
                          <t t-foreach="tr_product" t-as="td_product">
                            <t t-if="td_product">
                            <t t-set="product" t-value="td_product['product']"/>
                            <td t-att-colspan="td_product['x']"
                                t-att-rowspan="td_product['y']"
                                t-attf-class="oe_product #{ td_product['class'] }"
                                t-att-data-publish="product.website_published and 'on' or 'off'">

                                <div class="css_options" t-ignore="true">
                                  <div t-attf-class="dropdown js_options" t-att-data-id="product.id">
                                    <a class="btn btn-default" t-att-id="'dopprod-%s' % product.id" role="button" data-toggle="dropdown">Options <span class="caret"></span></a>
                                    <ul class="dropdown-menu" role="menu" t-att-aria-labelledby="'dopprod-%s' % product.id">
                                      <li class='dropdown-submenu'>
                                        <a tabindex="-1" href="#">Size</a>
                                        <ul class="dropdown-menu" name="size">
                                          <li><a href="#">
                                            <table>
                                              <tr>
                                                <td class="selected"></td>
                                                <td t-att-class="product.website_size_x > 1 and 'selected'"></td>
                                                <td t-att-class="product.website_size_x > 2 and 'selected'"></td>
                                                <td t-att-class="product.website_size_x > 3 and 'selected'"></td>
                                              </tr>
                                              <tr>
                                                <td t-att-class="product.website_size_y > 1 and 'selected'"></td>
                                                <td t-att-class="product.website_size_y > 1 and product.website_size_x > 1 and 'selected'"></td>
                                                <td t-att-class="product.website_size_y > 1 and product.website_size_x > 2 and 'selected'"></td>
                                                <td t-att-class="product.website_size_y > 1 and product.website_size_x > 3 and 'selected'"></td>
                                              </tr>
                                              <tr>
                                                <td t-att-class="product.website_size_y > 2 and 'selected'"></td>
                                                <td t-att-class="product.website_size_y > 2 and product.website_size_x > 1 and 'selected'"></td>
                                                <td t-att-class="product.website_size_y > 2 and product.website_size_x > 2 and 'selected'"></td>
                                                <td t-att-class="product.website_size_y > 2 and product.website_size_x > 3 and 'selected'"></td>
                                              </tr>
                                              <tr>
                                                <td t-att-class="product.website_size_y > 3 and 'selected'"></td>
                                                <td t-att-class="product.website_size_y > 3 and product.website_size_x > 1 and 'selected'"></td>
                                                <td t-att-class="product.website_size_y > 3 and product.website_size_x > 2 and 'selected'"></td>
                                                <td t-att-class="product.website_size_y > 3 and product.website_size_x > 3 and 'selected'"></td>
                                              </tr>
                                            </table>
                                          </a></li>
                                        </ul>
                                      </li>
                                      <li class='dropdown-submenu'>
                                        <a tabindex="-1" href="#">Styles</a>
                                        <ul class="dropdown-menu" name="style">
                                          <t t-foreach="styles" t-as="style">
                                            <li t-att-class="style.id in [s.id for s in product.website_style_ids] and 'active' or ''"><a href="#" t-att-data-id="style.id" t-att-data-class="style.html_class"><t t-esc="style.name"/></a></li>
                                          </t>
                                        </ul>
                                      </li>
                                    </ul>
                                  </div>
                                </div>

                                <t t-call="website_sale.products_cart"/>
                            </td>
                            </t>
                            <td t-if="td_product == None"/>
                          </t>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="text-center">
                    <t t-call="website.pager" />
                </div>
              </div>
              <div class="oe_structure mb32"/>
            </div>
        </t>
    </template>

    <!-- Product Description-->

    <template id="product_description" inherit_option_id="website_sale.products_cart" name="Product Description">
        <xpath expr="//div[@class='product_price']" position="before">
            <p class="text-muted oe_subdescription">
                <span t-field="product.description_sale"/>
            </p>
        </xpath>
    </template>

    <!-- Add to cart button-->

    <template id="add_to_basket" inherit_option_id="website_sale.products_cart" name="Add to Cart">
        <xpath expr="//div[@class='product_price']" position="inside">
            <a t-href="./add_cart/?product_id=#{ product.id }">
                <span class="icon-shopping-cart"/>
            </a>
        </xpath>
    </template>

    <!-- List view of products -->

    <template id="list_view" inherit_option_id="website_sale.products" name="List View">
        <xpath expr="//div[@id='products_grid']/table" position="replace">
          <div class="row">
            <t t-set="products" t-value="get_products(product_ids)"/>
            <t t-foreach="products" t-as="product">
              <div class="col-md-12 oe_list_products oe-height-1">
                <t t-call="website_sale.products_cart"/>
              </div>
            </t>
          </div>
        </xpath>
    </template>


    <!-- product --> 

    <template id="product" name="Product">
        <t t-call="website.layout">
            <t t-set="head">
                <script type="text/javascript" src="/website_sale/static/src/js/website_sale.js"></script>
            </t>
            <t t-set="title" t-raw="product.name"/>
            <div id="wrap">

              <section class="container mt8">
                <div class="row">
                  <div class="col-sm-5">
                      <ol class="breadcrumb">
                          <li><a t-href="/shop">Products</a></li>
                          <li t-if="category"><a t-att-href="'/shop/category/%s' % (category_id,)"><span t-field="category.name"/></a></li>
                          <li class="active"><span t-field="product.name"></span></li>
                      </ol>
                  </div><div class="col-sm-3">
                      <t t-call="website.publish_management">
                        <t t-set="object" t-value="product"/>
                        <li class='dropdown-submenu'>
                            <a tabindex="-1" href="#">Promote</a>
                            <ul class="dropdown-menu" name="sequence">
                                <li><a href="#" class="js_go_to_top">Push to top</a></li>
                                <li><a href="#" class="js_go_to_bottom">Push to bottom</a></li>
                            </ul>
                        </li>
                      </t>
                  </div><div class="col-sm-3 col-sm-offset-1">
                      <form t-action="/shop/#{ category_id and ('category/%s/' % category_id) or ''}" method="get" class="pull-right">
                          <div class="input-group">
                              <span class="input-group-addon"><span class="glyphicon glyphicon-search"/></span>
                              <input type="text" name="search" class="search-query form-control" placeholder="Search..." t-att-value="search or ''"/>
                          </div>
                      </form>
                  </div>
                </div>
              </section>

              <section class="container oe_website_sale mb16" id="product_detail">
                <div class="row">
                  <div class="col-sm-7 col-md-7 col-lg-7">
                      <img class="img" t-att-src="product.img('image')" style="max-height: 500px"/>
                  </div><div class="col-sm-5 col-md-5 col-lg-4 col-lg-offset-1">
                      <h1 t-field="product.name">Product Name</h1>

                      <form t-action="./add_cart/">
                          <input type="hidden" t-if="len(product.product_variant_ids) &lt;= 1" name="product_id" t-att-value="product.id"/>
                          <t t-if="len(product.product_variant_ids) &gt; 1">
                              <label label-default="label-default" class="radio" t-foreach="product.product_variant_ids" t-as="product">
                                  <input type="radio" name="product_id" t-att-value="product.id" t-att-checked="product == product.product_variant_ids[0] or None"/>
                                  <t t-esc="product.variants or ''">Standard</t>
                                  <span class="badge" t-if="product.price_extra">
                                      <t t-esc="product.price_extra > 0 and '+' or ''"/><t t-esc="product.price_extra"/> €
                                  </span>
                              </label>
                              <br/>
                          </t>
                          <div>
                              <t t-if="product.product_variant_ids[0].lst_price != product.product_variant_ids[0].price">
                              <h5 class="text-danger" style="text-decoration: line-through;" title="Price without reduction"><span t-field="product.product_variant_ids[0].lst_price" /> €</h5>
                              <h4><t t-esc="product.product_variant_ids[0].price" /> €</h4>
                              </t>
                              <h4 t-if="product.product_variant_ids[0].lst_price == product.product_variant_ids[0].price">
                                  <b><span t-field="product.product_variant_ids[0].lst_price" /> €</b>
                              </h4>
                          </div>
                          <button class="btn btn-primary btn-lg mt8">Add to Cart</button>
                          <hr t-if="product.description_sale"/>
                          <p t-field="product.description_sale" class="text-muted"/>
                          <hr/>
                          <p class="text-muted">
                              30-day money-back guarantee<br/>
                              Free Shipping in U.S.<br/>
                              Buy now, get in 2 days
                          </p>
                      </form>
                  </div>
                </div>
              </section>
              <div t-field="product.website_description" class="oe_structure" id="product_full_description"/>
            </div>
        </t>
    </template>

    <template id="recommended_products" inherit_id="website_sale.product" inherit_option_id="website_sale.product" name="Recommended Products">
        <xpath expr="//div[@id='product_full_description']" position="after">
            <div class="container mt32" t-if="product.recommended_products()">
                <h3>Customers who have bought this product also bought:</h3>
                <div class='row mt16' style="margin-left: 15px !important;">
                <t t-foreach="product.recommended_products()" t-as="product">
                    <div class='col-md-2 thumbnail' style='width: 170px; margin-right: 16px;'>
                        <div class='mt16 text-center'>
                            <img t-att-src="product.img('image_small')"/>
                            <h5>
                                <a t-href="/shop/product/#{ product.id }/"
                                   style="display: block">
                                    <span t-field='product.name'
                                          style="display: block"/>
                                </a>
                            </h5>
                        </div>
                    </div>
                </t>
                </div>
            </div>
        </xpath>
    </template>

    <!-- Page Shop my cart --> 

    <template id="mycart" name="My cart" page="True">
        <t t-call="website.layout">
            <t t-set="head">
                <script type="text/javascript" src="/website_sale/static/src/js/website_sale.js"></script>
                <link rel='stylesheet' href='/website_sale/static/src/css/website_sale.css'/>
                <t t-raw="head or ''"/>
            </t>
            <t t-set="title">Your Cart</t>
            <div id="wrap">
              <div class="container oe_website_sale">

                <ul class="wizard pull-right">
                    <li class="text-primary">Review Order<span class="chevron"></span></li>
                    <li class="text-muted">Shipping &amp; Billing<span class="chevron"></span></li>
                    <li class="text-muted">Payment<span class="chevron"></span></li>
                    <li class="text-muted">Confirmation<span class="chevron"></span></li>
                </ul>
                <h1 class="mb32">Your Cart</h1>

                <div class="row">
                <div class="col-md-8 oe_mycart">
                    <div t-if="not website_sale_order or not website_sale_order.order_line" class="well well-lg">
                        Your cart is empty!
                    </div>
                    <table class='table table-striped table-condensed' id="mycart_products" t-if="website_sale_order and website_sale_order.order_line">
                        <colgroup>
                            <col width="80"/>
                            <col/>
                            <col width="100"/>
                            <col width="120"/>
                        </colgroup>
                        <thead>
                            <tr>
                                <th colspan="2">Product</th>
                                <th>Price</th>
                                <th>Quantity</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr t-foreach="website_sale_order.order_line" t-as="line">
                                <td colspan="2" t-if="not line.product_id.product_tmpl_id"></td>
                                <td t-if="line.product_id.product_tmpl_id">
                                    <a t-href="/shop/product/#{ line.product_id.product_tmpl_id.id }/"><img class="img-rounded" t-att-src="line.product_id.img('image_small')"/></a>
                                </td>
                                <td t-if="line.product_id.product_tmpl_id">
                                    <div>
                                        <a t-href="/shop/product/#{ line.product_id.product_tmpl_id.id }/">
                                            <strong t-field="line.product_id.name"/>
                                        </a>
                                    </div>
                                    <div class="text-muted" t-field="line.product_id.description_sale"/>
                                </td>
                                <td class="text-center">
                                   <span t-field="line.price_unit"></span> €
                                   <div class="text-danger" style="text-decoration: line-through;" t-if="line.product_id.lst_price &gt; line.price_unit">
                                       <t t-esc="line.product_id.lst_price" /> €
                                   </div>
                                </td>
                                <td>
                                    <div class="input-group">
                                        <span class="input-group-addon">
                                            <a t-href="./add_cart/?order_line_id=#{ line.id }" t-att-data-id="line.id" class="mb8">
                                                <span class="icon-minus"/>
                                            </a>
                                        </span>
                                        <input type="text" class="js_quantity form-control"
                                            t-att-data-id="line.id" t-att-value="int(line.product_uom_qty)"/>
                                        <span class="input-group-addon">
                                            <a t-href="./remove_cart/?order_line_id=#{ line.id }" t-att-data-id="line.id" class="mb8 float_left">
                                                <span class="icon-plus"/>
                                            </a>
                                        </span>
                                    </div>
                                    
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class='pull-right mb16' id="mycart_total">
                        <colgroup>
                            <col width="100"/>
                            <col width="120"/>
                        </colgroup>
                        <thead>
                            <tr style="border-top: 1px solid #000">
                                <th><h3>Total:</h3></th>
                                <th class="text-right"><h3><t t-esc="website_sale_order and website_sale_order.amount_total or 0"/> €</h3></th>
                            </tr>
                            <tr class="text-muted">
                                <td><abbr title="Taxes may be updated after providing shipping address">Incl. Taxes:</abbr></td>
                                <td class="text-right"><t t-esc="website_sale_order and website_sale_order.amount_tax or 0"/> €</td>
                            </tr>
                        </thead>
                    </table>
                    <div class="clearfix"/>

                    <a t-href="/shop" class="btn btn-default"><span class="icon-long-arrow-left"/> Continue Shopping</a>
                    <a t-if="website_sale_order and website_sale_order.order_line" t-href="/shop/checkout/" class="btn btn-primary pull-right mb32">Process Checkout <span class="icon-long-arrow-right"/></a>
                    <div class="oe_structure"/>
                  </div>
                  <div class="col-md-3 col-md-offset-1 text-muted" id="right_column">
                      <h4>Policies</h4>
                      <ul class="list-unstyled mb32">
                        <li><span class="icon-check"/> 30-days money-back guarantee</li>
                        <li><span class="icon-check"/> Invoice sent by e-Mail</li>
                      </ul>

                      <h4>Secure Payment</h4>
                      <ul class="list-unstyled mb32">
                        <li><span class="icon-lock"/> Transation 256bit encrypted</li>
                        <li><span class="icon-check"/> Processed by Ogone</li>
                      </ul>

                  </div>
                </div>

              </div>
              <div class="oe_structure"/>
            </div>
        </t>
    </template>

    <!-- Page Shop --> 

    <template id="products_categories" inherit_option_id="website_sale.products" name="Product Categories">
        <xpath expr="//div[@id='products_grid']" position="before">
            <div class="col-md-3">
                <ul class="nav nav-pills nav-stacked mt16">
                    <li t-att-class=" '' if category_id else 'active' "><a t-href="/shop/">All Products</a></li>
                    <t t-set="categ" t-value="get_categories()"/>
                    <t t-foreach="categ[0]" t-as="category">
                        <t t-call="website_sale.categories_recursive"/>
                    </t>
                </ul>
            </div>
        </xpath>
        <xpath expr="//div[@id='products_grid']" position="attributes">
            <attribute name="class">col-md-9</attribute>
        </xpath>
    </template>


    <template id="suggested_products_list" inherit_id="website_sale.mycart" inherit_option_id="website_sale.mycart" name="Suggested Products in list view">
        <xpath expr="//table[@id='mycart_products']" position="after">
            <table t-if="suggested_products" class='table table-striped table-condensed'>
                <colgroup>
                    <col width="80"/>
                    <col/>
                    <col width="100"/>
                    <col width="120"/>
                </colgroup>
                <thead>
                    <tr>
                        <th colspan="2">Suggested products</th>
                    </tr>
                </thead>
                <tbody>
                    <tr t-foreach="suggested_products" t-as="product">

                        <td>
                            <a t-href="/shop/product/#{ product.product_tmpl_id.id }/">
                                <img class="img-rounded" t-att-src="product.img('image_small')"/>
                            </a>
                        </td>
                        <td>
                            <div>
                                <a t-href="/shop/product/#{ product.product_tmpl_id.id }/">
                                    <strong t-field="product.name"/>
                                </a>
                            </div>
                            <div class="text-muted" t-field="product.description_sale"/>
                        </td>
                        <td>
                            <span t-field="product.lst_price"></span> €
                        </td>
                        <td class="text-center">
                            <a t-href="./add_cart/?product_id=#{ product.id }"><strong>Add to Cart</strong></a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </xpath>
    </template>

    <template id="reduction_code" inherit_option_id="website_sale.mycart" name="Reduction Code">
        <xpath expr="//div[@id='right_column']" position="inside">
            <h4>Coupon Code</h4>
            <p>
                Have a coupon code? Fill in this field and apply.
            </p>
            <form t-if="website_sale_order and website_sale_order.order_line" t-action="/shop/mycart/" method="post" class="mb32">
                <div class="input-group">
                    <input name="promo" class='form-control' type="text" placeholder="code..." t-att-value="website_sale_order.pricelist_id.code or ''"/>
                    <div class="input-group-btn">
                        <button class="btn btn-default">Apply</button>
                    </div>
                </div>
            </form>
        </xpath>
    </template>


    <!-- Page confirm my cart -->

    <template id="checkout">
        <t t-call="website.layout">
          <t t-set="head">
              <script type="text/javascript" src="/website_sale/static/src/js/website_sale.js"></script>
              <link rel='stylesheet' href='/website_sale/static/src/css/website_sale.css'/>
              <t t-raw="head or ''"/>
          </t>
          <t t-set="title">Shop - Checkout</t>
          <div id="wrap">
            <div class="container oe_website_sale">
                <ul class="wizard pull-right">
                    <li><a href="/shop/mycart" class="text-success">Review Order<span class="chevron"></span></a></li>
                    <li class="text-primary">Shipping &amp; Billing<span class="chevron"></span></li>
                    <li class="text-muted">Payment<span class="chevron"></span></li>
                    <li class="text-muted">Confirmation<span class="chevron"></span></li>
                </ul>
                <h1>Your Address</h1>
                <form t-action="/shop/confirm_order/" method="post">

                <div class="row">
                <div class="col-md-8 oe_mycart">
                    <h3 class="page-header mt16">Set Billing Information
                        <small t-if="user_id.id == website.public_user.id"> or 
                            <a t-if="not partner" t-attf-href="/admin#action=redirect&amp;url=#{ request.httprequest.host_url }/shop/checkout/">sign in</a>
                        </small>
                    </h3>
                        <div class="row">
                            <div t-attf-class="form-group #{error.get('name') and 'has-error' or ''} col-lg-6">
                                <label for="contact_name">Your Name</label>
                                <input type="text" name="name" class="form-control" t-att-value="checkout['name']"/>
                            </div>
                            <div t-attf-class="form-group #{error.get('company') and 'has-error' or ''} col-lg-6">
                                <label for="company">Your Company</label>
                                <input type="text" name="company" class="form-control" t-att-value="checkout['company']"/>
                            </div>
                            <div t-attf-class="form-group #{error.get('email') and 'has-error' or ''} col-lg-6">
                                <label for="contact_name">Email</label>
                                <input type="email" name="email" class="form-control" t-att-value="checkout['email']"/>
                            </div>
                            <div t-attf-class="form-group #{ error.get('phone') and 'has-error' or ''} col-lg-6">
                                <label for="phone">Telephone</label>
                                <input type="tel" name="phone" class="form-control" t-att-value="checkout['phone']"/>
                            </div>

                            <div t-attf-class="form-group #{error.get('street') and 'has-error' or ''} col-lg-6">
                                <label for="street">Street</label>
                                <input type="text" name="street" class="form-control" t-att-value="checkout['street']"/>
                            </div>
                            <div class="clearfix"/>

                            <div t-attf-class="form-group #{error.get('city') and 'has-error' or ''} col-lg-6">
                                <label for="city">City</label>
                                <input type="text" name="city" class="form-control" t-att-value="checkout['city']"/>
                            </div>
                            <div t-attf-class="form-group #{error.get('zip') and 'has-error' or ''} col-lg-6">
                                <label for="zip">Zip / Postal Code</label>
                                <input type="text" name="zip" class="form-control" t-att-value="checkout['zip']"/>
                            </div>
                            <div t-attf-class="form-group #{error.get('state_id') and 'has-error' or ''} col-lg-6">
                                <label for="state_id">State / Province</label>
                                <select name="state_id" class="form-control">
                                    <option value="">select...</option>
                                    <t t-foreach="states or []" t-as="state">
                                        <option t-att-value="state.id" t-att-selected="state.id == checkout['state_id']"><t t-esc="state.name"/></option>
                                    </t>
                                </select>
                            </div>
                            <div t-attf-class="form-group #{error.get('country_id') and 'has-error' or ''} col-lg-6">
                                <label for="contact_name">Country</label>
                                <select name="country_id" class="form-control">
                                    <option value="">Country...</option>
                                    <t t-foreach="countries or []" t-as="country">
                                        <option t-att-value="country.id" t-att-selected="country.id == checkout['country_id']"><t t-esc="country.name"/></option>
                                    </t>
                                </select>
                            </div>

                            <div class="clearfix"/>

                            <div class="form-group col-lg-6">
                                <label>
                                    <input t-if="not shipping" type="checkbox" name="shipping_different"/>
                                    <input t-if="shipping" type="checkbox" name="shipping_different" checked="1"/>
                                    Ship to a different address
                                </label>
                            </div>
                        </div>

                        <div class="js_shipping row mb16" t-att-style="not shipping and 'display:none' or ''">
                            <h3 class="oe_shipping col-lg-12 mt16">Shipping Information</h3>

                            <div t-attf-class="form-group #{error.get('shipping_name') and 'has-error' or ''} col-lg-6">
                                <label for="contact_name">Name (Shipping)</label>
                                <input type="text" name="shipping_name" class="form-control" t-att-value="checkout.get('shipping_name', '')"/>
                            </div>
                            <div t-attf-class="form-group #{error.get('shipping_phone') and 'has-error' or ''} col-lg-6">
                                <label for="contact_name">Telephone</label>
                                <input type="tel" name="shipping_phone" class="form-control" t-att-value="checkout.get('shipping_phone', '')"/>
                            </div>
                            <div t-attf-class="form-group #{error.get('shipping_street') and 'has-error' or ''} col-lg-6">
                                <label for="contact_name">Street</label>
                                <input type="text" name="shipping_street" class="form-control" t-att-value="checkout.get('shipping_street', '')"/>
                            </div>
                            <div class="clearfix"/>
                            <div t-attf-class="form-group #{error.get('shipping_city') and 'has-error' or ''} col-lg-6">
                                <label for="contact_name">City</label>
                                <input type="text" name="shipping_city" class="form-control" t-att-value="checkout.get('shipping_city', '')"/>
                            </div>
                            <div t-attf-class="form-group #{error.get('shipping_zip') and 'has-error' or ''} col-lg-6">
                                <label for="contact_name">Zip / Postal Code</label>
                                <input type="text" name="shipping_zip" class="form-control" t-att-value="checkout.get('shipping_zip', '')"/>
                            </div>
                            <div t-attf-class="form-group #{error.get('shipping_state_id') and 'has-error' or ''} col-lg-6">
                                <label for="contact_name">State / Province</label>
                                <select name="shipping_state_id" class="form-control">
                                    <option value="">State / Province...</option>
                                    <t t-foreach="states or []" t-as="state">
                                        <option t-att-value="state.id" t-att-selected="state.id == checkout.get('shipping_state_id')"><t t-esc="state.name"/></option>
                                    </t>
                                </select>
                            </div>
                            <div t-attf-class="form-group #{error.get('shipping_country_id') and 'has-error' or ''} col-lg-6">
                                <label for="contact_name">Country</label>
                                <select name="shipping_country_id" class="form-control">
                                    <option value="">Country...</option>
                                    <t t-foreach="countries or []" t-as="country">
                                        <option t-att-value="country.id" t-att-selected="country.id == checkout.get('shipping_country_id')"><t t-esc="country.name"/></option>
                                    </t>
                                </select>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-default btn-primary pull-right mb32">Confirm <span class="icon-long-arrow-right"/></button>
                </div>
                <div class="col-lg-offset-1 col-lg-3 text-muted">
                    <h3 class="page-header mt16">Your Order <small><a href="/shop/mycart"><span class="icon-arrow-right"/> change</a></small></h3>
                    <div class="row">
                        <div class="col-sm-6 text-right">Subtotal:</div>
                        <div class="col-sm-6"><t t-esc="website_sale_order.amount_untaxed or 0"/> €</div>
                        <div class="col-sm-6 text-right">Taxes:</div>
                        <div class="col-sm-6"><t t-esc="website_sale_order.amount_tax or 0"/> €</div>
                        <div class="col-sm-6 text-right"><h4>Total To Pay:</h4></div>
                        <div class="col-sm-6"><h4><t t-esc="website_sale_order.amount_total or 0"/> €</h4></div>
                    </div>
                    <button type="submit" class="btn btn-default btn-primary pull-right mt16" t-if="user_id.id != website.public_user.id">
                        Confirm <span class="icon-long-arrow-right"/>
                    </button>

                </div>
            </div>
            </form>
          </div>
          </div>
        </t>
    </template>

    <template id="payment">
        <t t-call="website.layout">
            <t t-set="head">
                <script type="text/javascript" src="/website_sale/static/src/js/website_sale.js"></script>
                <link rel='stylesheet' href='/website_sale/static/src/css/website_sale.css'/>
                <t t-raw="head or ''"/>
            </t>
            <t t-set="title">Select Payment Mode</t>
            <div id="wrap">
              <div class="container oe_website_sale">

                <ul class="wizard pull-right">
                    <li><a href="/shop/mycart" class="text-success">Review Order<span class="chevron"></span></a></li>
                    <li><a href="/shop/checkout" class="text-success">Shipping &amp; Billing<span class="chevron"></span></a></li>
                    <li class="text-primary">Payment<span class="chevron"></span></li>
                    <li class="text-muted">Confirmation<span class="chevron"></span></li>
                </ul>
                <h1 class="mb32">Validate Order</h1>
                <div class="row">
                <div class="col-md-8 oe_mycart">
                    <table class='table table-striped table-condensed' id="mycart_products" t-if="website_sale_order and website_sale_order.order_line">
                        <colgroup>
                            <col width="80"/>
                            <col/>
                            <col width="100"/>
                            <col width="120"/>
                        </colgroup>
                        <thead>
                            <tr>
                                <th colspan="2">Product</th>
                                <th>Price</th>
                                <th>Quantity</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr t-foreach="website_sale_order.order_line" t-as="line">
                                <td colspan="2" t-if="not line.product_id.product_tmpl_id"></td>
                                <td t-if="line.product_id.product_tmpl_id">
                                    <a t-href="/shop/product/#{ line.product_id.product_tmpl_id.id }/"><img class="img-rounded" t-att-src="line.product_id.img('image_small')"/></a>
                                </td>
                                <td t-if="line.product_id.product_tmpl_id">
                                   <strong t-field="line.product_id.name"/>
                                </td>
                                <td class="text-center">
                                   <span t-field="line.price_unit"></span> €
                                </td>
                                <td>
                                   <div t-esc="line.product_uom_qty"/>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class='pull-right mb16' id="mycart_total">
                        <colgroup>
                            <col width="100"/>
                            <col width="120"/>
                        </colgroup>
                        <thead>
                            <tr style="border-top: 1px solid #000">
                                <th><h3>Total:</h3></th>
                                <th class="text-right"><h3><t t-esc="website_sale_order and website_sale_order.amount_total or 0"/> €</h3></th>
                            </tr>
                            <tr class="text-muted">
                                <td><abbr title="Taxes may be updated after providing shipping address">Incl. Taxes:</abbr></td>
                                <td class="text-right"><t t-esc="website_sale_order and website_sale_order.amount_tax or 0"/> €</td>
                            </tr>
                        </thead>
                    </table>
                    <div class="clearfix"/>
                    <div class="oe_structure"/>
                  </div>
                  <div class="col-md-3 col-md-offset-1 text-muted" id="right_column">
                      <h4>Bill To:</h4>
                      <div t-field="website_sale_order.partner_invoice_id"/>
                      <div>
                        <a href="/shop/checkout"><span class="icon-arrow-right"/> Change Address</a>
                      </div>

                      <h4 class="mt32">Ship To:</h4>
                      <div t-field="website_sale_order.partner_shipping_id"/>
                      <div>
                        <a href="/shop/checkout"><span class="icon-arrow-right"/> Change Address</a>
                      </div>

                  </div>
                </div>

                <div class="js_payment mb64">
                    <p>Select your payment method:</p>
                    <div>
                        <t t-foreach="payments or []" t-as="payment">
                            <label>
                                <input t-att-value="payment.id" type="radio" name="payment_type"/> <t t-esc="payment.name"/>
                            </label>
                        </t>
                    </div>
                    <t t-foreach="payments or []" t-as="payment">
                        <div t-att-data-id="payment.id" t-raw="payment._content" class="hidden"/>
                    </t>
                    <a t-href="/shop/payment_validate/" class="btn btn-primary mt16">Validate &amp; Pay <span class="icon-long-arrow-right"/></a>
                </div>

              </div>
              <div class="oe_structure"/>
            </div>

        </t>
    </template>
 </data>
</openerp>
