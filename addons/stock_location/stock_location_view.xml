<?xml version="1.0"?>
<openerp>
	<data>

		<record model="ir.ui.view" id="view_procurement_rule_form_inherit">
            <field name="name">stock.procurement.rule.inherit.form</field>
            <field name="model">procurement.rule</field>
            <field name="inherit_id" ref="stock.view_procurement_rule_form"/>
            <field name="arch" type="xml">
                <field name="location_id" position="after">
                	<field name="delay"/>
                	<field name="propagate"/>
                </field>
                <field name="group_id" position="before">
                	<field name="partner_address_id"/>
                </field>
            </field>
        </record>

        <record id="view_location_form_inherit" model="ir.ui.view">
            <field name="name">stock.location.form</field>
            <field name="model">stock.location</field>
            <field name="inherit_id" ref="stock.view_location_form"/>
            <field name="arch" type="xml">
                <separator string="Additional Information" position="before">
                        <separator string="Removal Strategies"/>
                        <div class="oe_inline">
                        <p class="oe_grey">
                            Removal strategies define the method used for suggesting the 
                            location to take the products from
                        </p>
                        <field name="removal_strategy_ids" class ="oe_inline">
                            <tree editable="bottom" string="removal">
                                <field name="product_categ_id"/>
                                <field name="method"/>
                            </tree>
                        </field>

                        </div>
                        <newline/>
                        <separator string="Putaway Strategies"/>
                        <newline/>
                        <div class="oe_inline">
                        <p class="oe_grey">
                            Putaway strategies define the method used for suggesting the 
                            location to put the products
                        </p>
                        <field name="putaway_strategy_ids" class="oe_inline">
                            <tree string="Put Away" editable="bottom">
                                <field name="product_categ_id"/>
                                <field name="method"/>
                                <field name="location_spec_id"/>
                            </tree>
                        </field>
                        </div>
                </separator>
            </field>
        </record>

        <record id="view_putaway" model="ir.ui.view">
            <field name="name">product.putaway.form</field>
            <field name="model">product.putaway</field>
            <field name="arch" type="xml">
                <form string="Putaway">
                   <field name="product_categ_id"/>
                   <field name="location_id"/>
                   <field name="method"/>
                   <field name="location_spec_id"/>
               </form>
            </field>
        </record>

        <record id="view_removal" model="ir.ui.view">
            <field name="name">product.removal.form</field>
            <field name="model">product.removal</field>
            <field name="arch" type="xml">
                <form string="Removal">
                   <field name="product_categ_id"/>
                   <field name="location_id"/>
                   <field name="method"/>
               </form>
            </field>
        </record>


		<record id="stock_location_path_tree" model="ir.ui.view">
			<field name="name">stock.location.path.tree</field>
			<field name="model">stock.location.path</field>
			<field name="arch" type="xml">
				<tree string="Location Paths">
					<field name="location_from_id" />
					<field name="location_dest_id" />
					<field name="name" />
				</tree>
			</field>
		</record>

		<record id="stock_location_path_form" model="ir.ui.view">
			<field name="name">stock.location.path.form</field>
			<field name="model">stock.location.path</field>
			<field name="arch" type="xml">
				<form string="Location Paths" version="7.0">
					<group col="4">
                        <group>
    						<field name="name"/>
                            <field name="location_from_id"/>
                            <field name="location_dest_id"/>
                        </group>
                        <group>
                            <field name="company_id" groups="base.group_multi_company" />
                            <field name="picking_type_id"/>
                            <field name="auto"/>
                            <field name="delay"/>
                        </group>
					</group>
				</form>
			</field>
		</record>


		<record id="product_category_form_view_inherit" model="ir.ui.view">
			<field name="name">product.category.form</field>
			<field name="model">product.category</field>
			<field name="inherit_id" ref="product.product_category_form_view" />
			<field name="arch" type="xml">
				<xpath expr="//sheet" position="inside">
					<group string="Routes" colspan="4">
					    <div class="oe_inline">
					        <p attrs="{'invisible':[('route_ids','=',False)]}">
        					<field name="route_ids" nolabel="1" widget="many2many_tags" class="oe_inline"/>
        					</p>
        					<p attrs="{'invisible':[('parent_id','=',False)]}">
        					The following routes will apply to the products in this category taking into account parent categories: 
        					<field name="total_route_ids" nolabel="1" widget="many2many_tags"/>
        					</p>
						</div>
					</group>
					<separator string="Removal Strategies"/>
                        <div class="oe_inline">
                        <p class="oe_grey">
                            Removal strategies define the method used for suggesting the 
                            location to take the products from
                        </p>
                        <field name="removal_strategy_ids">
                            <tree editable="bottom" string="removal">
                                <field name="location_id"/>
                                <field name="method"/>
                            </tree>
                        </field>

                        </div>
                        <newline/>
                        <separator string="Putaway Strategies"/>
                        <newline/>
                        <div class="oe_inline">
                        <p class="oe_grey">
                            Putaway strategies define the method used for suggesting the 
                            location to put the products
                        </p>
                        <field name="putaway_strategy_ids">
                            <tree string="Put Away" editable="bottom">
                                <field name="location_id"/>
                                <field name="method"/>
                                <field name="location_spec_id"/>
                            </tree>
                        </field>
                        </div>
				</xpath>
			</field>
		</record>

        <record id="view_warehouse_inherit" model="ir.ui.view">
            <field name="name">stock.warehouse</field>
            <field name="model">stock.warehouse</field>
            <field name="inherit_id" ref="stock.view_warehouse"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='partner_id']" position="after">
                    <field name="route_id" attrs="{'invisible': [('route_id', '=', False)]}"/>
                    <button name="%(action_view_stock_configure_wh)d" string="Configure this warehouse" type="action" attrs="{'invisible': [('route_id', '!=', False)]}"/>
                </xpath>
            </field>
        </record>

		<record id="stock_location_route_tree" model="ir.ui.view">
			<field name="name">stock.location.route.tree</field>
			<field name="model">stock.location.route</field>
			<field name="arch" type="xml">
				<tree string="Routes">
                    <field name="sequence" widget="handle" />
					<field name="name"/>
					<field name="product_selectable"/>
                    <field name="product_categ_selectable"/>
					<field name="warehouse_selectable"/>
				</tree>
			</field>
		</record>

		<record id="stock_location_route_form_view_inherit" model="ir.ui.view">
			<field name="name">stock.location.route.form</field>
			<field name="model">stock.location.route</field>
			<field name="inherit_id" ref="stock.stock_location_route_form_view"/>
			<field name="arch" type="xml">
			    <xpath expr="//group[@string='Pull Rules']" position="before">
			        <separator string="Applicable On"/>
                    <p class="oe_grey">Check these box so that the user can select this route during the following operations</p>
                    <group>
                        <group>
                            <field name="product_categ_selectable" string="Product Categories"/>
                            <field name="product_selectable" string="Products"/>
                        </group>
                        <group>
                            <field name="warehouse_selectable" string="Warehouses"/>
                        </group>
                    </group>
                    <group string="Push Rules" colspan="4" >
                        <field name="push_ids" colspan="4" nolabel="1"/>
                    </group>
			    </xpath>
			</field>
		</record>

		<record id="action_routes_form" model="ir.actions.act_window">
			<field name="name">Routes</field>
			<field name="res_model">stock.location.route</field>
			<field name="type">ir.actions.act_window</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="view_id" ref="stock_location_route_tree" />
			<field name="help" type="html">
				<p class="oe_view_nocontent_create">
					Click to add a route.
              </p>
				<p>You can define here the main routes that run through
					your warehouses and that define the flows of your products. These
					routes can be assigned to a product, a product category or be fixed
					on procurement or sales order. </p>
			</field>
		</record>
		
		
		
		<menuitem action="action_routes_form" id="menu_stock_routes"
			parent="stock.menu_stock_configuration" sequence="11" />
			
		<!-- Procurement -->
		<record id="procurement_form_view_inherit" model="ir.ui.view">
            <field name="name">procurement.order.form.view.inherit</field>
            <field name="inherit_id" ref="procurement.procurement_form_view"/>
            <field name="model">procurement.order</field>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='rule_id']" position="after">
                    <field name="route_ids" widget="many2many_tags"/>
                </xpath>
            </field>
        </record>
	</data>
</openerp>
