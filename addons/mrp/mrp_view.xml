<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <menuitem icon="terp-mrp" id="base.menu_mrp_root" name="Manufacturing"
            groups="group_mrp_user,group_mrp_manager" sequence="3"/>
        <menuitem id="menu_mrp_reordering" name="Automatic Procurements" parent="stock.menu_stock_root" sequence="4"/>
        <menuitem id="menu_mrp_manufacturing" name="Manufacturing" parent="base.menu_mrp_root" sequence="1"/>

<!--        <menuitem name="Control" id="menu_mrp_control" parent="base.menu_mrp_root"  sequence="3" />-->
        <menuitem name="Master Data"
                  id="menu_mrp_bom"
                  parent="base.menu_mrp_root"
                  sequence="5" />

        <!--
        Property / Property Group
        -->

        <record id="mrp_property_group_form_view" model="ir.ui.view">
            <field name="name">mrp.property.group.form</field>
            <field name="model">mrp.property.group</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Properties categories">
                    <separator colspan="4" string="General Information"/>
                    <separator colspan="4" string="Property Group"/>
                    <field colspan="4" name="name" select="1" nolabel="1"/>
                    <separator colspan="4" string="Description"/>
                    <field colspan="4" name="description" nolabel="1"/>
                </form>
            </field>
        </record>
        <record id="mrp_property_group_action" model="ir.actions.act_window">
            <field name="name">Property Categories</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">mrp.property.group</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        <menuitem
            id="menu_mrp_configuration"
            name="Configuration"
            parent="base.menu_mrp_root"
            groups="base.group_extended"
            sequence="50" />

        <record id="mrp_property_tree_view" model="ir.ui.view">
            <field name="name">mrp.property.tree</field>
            <field name="model">mrp.property</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Properties">
                    <field name="name"/>
                    <field name="composition"/>
                    <field name="group_id"/>
                </tree>
            </field>
        </record>
        <record id="mrp_property_form_view" model="ir.ui.view">
            <field name="name">mrp.property.form</field>
            <field name="model">mrp.property</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Properties">
                    <separator colspan="4" string="General Information"/>
                    <field colspan="4" name="name" select="1"/>
                    <field name="group_id" select="1"/>
                    <field name="composition" select="1"/>
                    <separator colspan="4" string="Description"/>
                    <field colspan="4" name="description"/>
                </form>
            </field>
        </record>
        <record id="mrp_property_action" model="ir.actions.act_window">
            <field name="name">Properties</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">mrp.property</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        <menuitem name="Properties"
            id="menu_mrp_property"
            parent="menu_mrp_configuration"
            groups="base.group_extended"
            sequence="20" />
        <menuitem
            action="mrp_property_action"
            id="menu_mrp_property_action"
            parent="menu_mrp_property"
            groups="base.group_extended" />
        <menuitem
            action="mrp_property_group_action"
            id="menu_mrp_property_group_action"
            parent="menu_mrp_property"/>

        <!--
        Work Centers
        -->

        <record id="mrp_workcenter_tree_view" model="ir.ui.view">
            <field name="name">mrp.workcenter.tree</field>
            <field name="model">mrp.workcenter</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Work Center">
                    <field name="code"/>
                    <field name="name"/>
                </tree>
            </field>
        </record>
        <record id="mrp_workcenter_view" model="ir.ui.view">
            <field name="name">mrp.workcenter.form</field>
            <field name="model">mrp.workcenter</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Work Center">
                    <group col="6" colspan="4">
                        <field name="name" select="1"/>
                        <field name="code" select="1"/>
                        <field name="active"/>
                        <field name="company_id" select="1" groups="base.group_multi_company" widget="selection"/>
                    </group>
                    <notebook colspan="4">
                        <page string="Work Center">
                            <field name="resource_type"/>
                            <field name="calendar_id" widget="selection"/>
                            <separator colspan="4" string="Description"/>
                            <field colspan="4" name="note" nolabel="1"/>
                            <separator colspan="4" string="Capacity Information"/>
                            <group col="4" colspan="4">
                                <field name="capacity_per_cycle"/>
                                <newline/>
                                <field name="time_cycle"/>
                                <field name="time_efficiency"/>
                                <field name="time_start"/>
                                <field name="time_stop"/>
                            </group>
                        </page>
                        <page string="Analytic Accounting" groups="base.group_extended">
                            <field name="costs_hour"/>
                            <field name="costs_hour_account_id"/>
                            <field name="costs_cycle"/>
                            <field name="costs_cycle_account_id"/>
                            <field name="costs_journal_id"/>
                            <field name="costs_general_account_id"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>
        <record id="mrp_workcenter_action" model="ir.actions.act_window">
            <field name="name">Work Centers</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">mrp.workcenter</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="mrp_workcenter_tree_view"/>
        </record>

        <!--
        Routings
        -->

        <record id="mrp_routing_workcenter_tree_view" model="ir.ui.view">
            <field name="name">mrp.routing.workcenter.tree</field>
            <field name="model">mrp.routing.workcenter</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Routing Work Centers">
                    <field name="sequence"/>
                    <field name="workcenter_id" select="1"/>
                    <field name="cycle_nbr"/>
                    <field name="hour_nbr"/>
                </tree>
            </field>
        </record>

        <record id="mrp_routing_workcenter_form_view" model="ir.ui.view">
            <field name="name">mrp.routing.workcenter.form</field>
            <field name="model">mrp.routing.workcenter</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Routing Work Centers">
                    <separator colspan="4" string="General Information"/>
                    <field colspan="4" name="name" select="1"/>
                    <field name="sequence" select="1"/>
                    <field name="workcenter_id" select="1"/>
                    <field name="cycle_nbr"/>
                    <field name="hour_nbr"/>
                    <field colspan="4" name="note"/>
                </form>
            </field>
        </record>

        <record id="mrp_routing_form_view" model="ir.ui.view">
            <field name="name">mrp.routing.form</field>
            <field name="model">mrp.routing</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Routing">
                    <separator colspan="4" string="General Information"/>
                    <field name="name" select="1"/>
                    <field name="active" select="1" groups="base.group_extended"/>
                    <field name="code" select="1"/>
                    <field name="location_id"/>
                    <separator colspan="4" string="Description"/>
                    <field colspan="4" name="note" nolabel="1"/>
                    <separator colspan="4" string="Work Center Operations"/>
                    <field colspan="4" name="workcenter_lines" nolabel="1" widget="one2many_list"/>
                </form>
            </field>
        </record>
        <record id="mrp_routing_tree_view" model="ir.ui.view">
            <field name="name">mrp.routing.tree</field>
            <field name="model">mrp.routing</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Routing">
                    <field name="code"/>
                    <field name="name"/>
                    <field name="location_id"/>
                </tree>
            </field>
        </record>
        <record id="mrp_routing_action" model="ir.actions.act_window">
            <field name="name">Routings</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">mrp.routing</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="mrp_routing_tree_view"/>
        </record>
 <!--       <menuitem name="Routings" id="menu_mrp_routing_and_workcenters" parent="mrp.menu_mrp_bom" groups="base.group_extended"
                  sequence="100" />-->
        <menuitem action="mrp_workcenter_action" id="menu_mrp_workcenter_action" parent="mrp.menu_mrp_bom" groups="base.group_extended" sequence="40" />
        <menuitem action="mrp_routing_action" id="menu_mrp_routing_action" parent="mrp.menu_mrp_bom" groups="base.group_extended" sequence="30"/>

        <!--
          Bill of Materials
        -->

        <record id="mrp_bom_form_view" model="ir.ui.view">
            <field name="name">mrp.bom.form</field>
            <field name="model">mrp.bom</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Bill of Material">
                    <group colspan="4" col="6">
                        <field name="product_id" on_change="onchange_product_id(product_id, name)" select="1"/>
                        <field name="name" select="1"/>
                        <field name="code" select="1" string="Reference" groups="base.group_extended"/>
                        <newline/>
                        <field name="product_uom" widget="selection"/>
                        <field name="product_qty"/>
                        <field name="routing_id" widget="selection" groups="base.group_extended"/>
                        <newline/>
                        <field name="product_uos" groups="product.group_uos,base.group_extended" widget="selection"/>
                        <field name="product_uos_qty" groups="product.group_uos,base.group_extended" />
                        <newline/>
                        <field name="multi_level_bom" />
                        <field name="type" groups="base.group_extended"/>
                        <field name="company_id" select="1" groups="base.group_multi_company" widget="selection"/>
                    </group>
                    <notebook colspan="4" >
                        <page string="Components" attrs="{'invisible': [('bom_id','!=',False),('multi_level_bom','=',False)]}">
                            <field colspan="4" name="bom_lines" nolabel="1" widget="one2many_list" />
                        </page>
                        <page string="Revisions" groups="base.group_extended" attrs="{'invisible': [('bom_id','!=',False),('multi_level_bom','=',False)]}">
                            <field colspan="4" name="revision_ids" nolabel="1" widget="one2many_list"/>
                        </page>
                        <page string="Properties" groups="base.group_extended" attrs="{'invisible': [('bom_id','!=',False),('multi_level_bom','=',False)]}">
                            <field name="position"/>
                            <field name="active"/>
                            <field name="sequence"/>
                            <field name="bom_id"/>

                            <field name="date_start"/>
                            <field name="date_stop"/>
                            <field name="product_rounding"/>
                            <field name="product_efficiency" groups="base.group_extended"/>
                            <field colspan="4" name="property_ids" nolabel="2" groups="base.group_extended"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

		<record id="view_mrp_bom_filter" model="ir.ui.view">
            <field name="name">mrp.bom.select</field>
            <field name="model">mrp.bom</field>
           <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Bill Of Material">
                    <group col='4' colspan='4'>
                      <field name="name"/>
	                    <field name="code" string="Reference"/>
	                    <field name="product_id"/>
	                    <field name="company_id"/>
                    </group>
                    <newline/>
                    <group expand="1" string="Group By" colspan="4" col="8">
                        <filter string="Product" icon="terp-mrp" domain="[]" context="{'group_by':'product_id'}"/>
                        <filter string="Routing" icon="terp-mrp" domain="[]" context="{'group_by':'routing_id'}"/>
                   </group>
                </search>
            </field>
        </record>

       <record id="mrp_bom_tree_view" model="ir.ui.view">
            <field name="name">mrp.bom.tree</field>
            <field name="model">mrp.bom</field>
            <field name="type">tree</field>
            <field name="field_parent">child_complete_ids</field>
            <field name="arch" type="xml">
                <tree string="BoM Structure" colors="blue:method">
                    <field name="sequence" invisible="1"/>
                    <field name="name"/>
                    <field name="code"/>
                    <field name="product_id"/>
                    <field name="product_qty"/>
                    <field name="product_uom"/>
                    <field name="method"/>
                    <field name="routing_id" groups="base.group_extended"/>
                    <field name="date_start"/>
                    <field name="date_stop"/>
                </tree>
            </field>
        </record>
        <record id="mrp_bom_form_action" model="ir.actions.act_window">
            <field name="name">Master Bill of Materials</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">mrp.bom</field>
            <field name="view_type">form</field>
            <field name="domain">[('bom_id','=',False)]</field>
            <field name="search_view_id" ref="view_mrp_bom_filter"/>
        </record>
        <record id="mrp_bom_form_action2" model="ir.actions.act_window">
            <field name="name">Bill of Material Components</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">mrp.bom</field>
            <field name="view_type">form</field>
            <field name="domain">[('bom_id','!=',False)]</field>
        </record>

        <!-- BOM menus -->

  <!--      <menuitem name="Bill of Materials"
                  id="menu_mrp_bom"
                  parent="menu_mrp_bom"
                  sequence="50" />-->
        <menuitem
            action="mrp_bom_form_action"
            id="menu_mrp_bom_form_action"
            parent="menu_mrp_bom"
            sequence="10"/>
        <menuitem
            action="mrp_bom_form_action2"
            id="menu_mrp_bom_form_action2"
            groups="base.group_extended"
            parent="menu_mrp_bom"
            sequence="20"/>

        <record id="action2" model="ir.actions.act_window">
            <field name="name">Bill of Materials Structure</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">mrp.bom</field>
            <field name="domain">[('id','=',active_id)]</field>
            <field name="view_type">tree</field>
            <field name="view_id" ref="mrp_bom_tree_view"/>
        </record>
        <record id="ir_BOM_structure" model="ir.values">
            <field eval="'client_action_multi'" name="key2"/>
            <field eval="'mrp.bom'" name="model"/>
            <field name="name">Bill of Materials Structure</field>
            <field eval="'ir.actions.act_window,'+str(action2)" name="value"/>
            <field eval="True" name="object"/>
        </record>

        <record id="mrp_bom_revision_tree" model="ir.ui.view">
            <field name="name">mrp.bom.revision</field>
            <field name="model">mrp.bom.revision</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="BoM Revisions">
                    <field name="indice"/>
                    <field name="author_id"/>
                    <field name="date"/>
                    <field colspan="4" name="name"/>
                </tree>
            </field>
        </record>
        <record id="mrp_bom_revision_form" model="ir.ui.view">
            <field name="name">mrp.bom.revision</field>
            <field name="model">mrp.bom.revision</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="BoM Revisions">
                    <field colspan="4" name="name"/>
                    <field colspan="1" name="indice"/>
                    <field colspan="1" name="date"/>
                    <field name="author_id" readonly="1"/>
                    <field colspan="4" name="description"/>
                </form>
            </field>
        </record>

		<!--
        Procurement
        -->

		<menuitem action="mrp_procurement.mrp_procurement_action" id="menu_mrp_procurement_action"
        		  parent="mrp.menu_mrp_manufacturing" sequence="2" />
<!--        <menuitem action="mrp_procurement.mrp_procurement_action5" id="menu_mrp_procurement_exception_action"-->
<!--        		  parent="mrp.menu_mrp_control" sequence="1" />-->

     	<menuitem id="menu_mrp_scheduler" name="Schedulers" parent="base.menu_mrp_root" sequence="4"/>
        <menuitem action="mrp_procurement.action_compute_schedulers" id="mrp_Sched_all" parent="mrp.menu_mrp_scheduler" sequence="90"/>

		<!--
		Order Point
		-->
		<menuitem action="mrp_procurement.action_orderpoint_form" id="menu_action_orderpoint_form" parent="mrp.menu_mrp_reordering"/>

        <!--
	    Production Management
	    -->

        <record id="mrp_production_tree_view" model="ir.ui.view">
            <field name="name">mrp.production.tree</field>
            <field name="model">mrp.production</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree colors="blue:state in ('confirmed');red:date_planned&lt;current_date and state not in ('done','cancel');black:date_planned&gt;=current_date;gray:state in ('done','cancel') " string="Manufacturing Orders">
                    <field name="name"/>
                    <field name="product_id"/>
                    <field name="product_qty" sum="Total Qty"/>
                    <field name="product_uom"/>
                    <field name="date_planned"/>
                    <field name="routing_id" groups="base.group_extended"/>
                    <field name="hour_total" sum="Total Hours" groups="base.group_extended"/>
                    <field name="cycle_total" sum="Total Cycles" groups="base.group_extended"/>
                    <field name="origin"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="view_production_calendar" model="ir.ui.view">
            <field name="name">mrp.production.calendar</field>
            <field name="model">mrp.production</field>
            <field name="type">calendar</field>
            <field eval="2" name="priority"/>
            <field name="arch" type="xml">
                <calendar color="routing_id" date_start="date_planned" string="Manufacturing Orders">
                    <field name="origin"/>
                    <field name="product_id"/>
                    <field name="product_qty"/>
                </calendar>
            </field>
        </record>


        <record id="view_production_gantt" model="ir.ui.view">
            <field name="name">mrp.production.gantt</field>
            <field name="model">mrp.production</field>
            <field name="type">gantt</field>
            <field name="arch" type="xml">
                <gantt color="product_id" date_stop="date_finnished" date_start="date_start" string="Productions">
                    <level object="mrp.routing" link="routing_id" domain="[]">
                        <field name="name"/>
                        <field name="origin"/>
                    </level>
                </gantt>
            </field>
        </record>


        <record model="ir.ui.view" id="view_production_graph">
            <field name="name">mrp.production.graph</field>
            <field name="model">mrp.production</field>
            <field name="type">graph</field>
            <field name="arch" type="xml">
                <graph string="Manufacturing Orders" type="bar">
                    <field name="date_planned_date"/>
                    <field name="hour_total" operator="+"/>
                    <field name="cycle_total" operator="+"/>
                </graph>
            </field>
        </record>

        <record id="mrp_production_form_view" model="ir.ui.view">
            <field name="name">mrp.production.form</field>
            <field name="model">mrp.production</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Manufacturing Orders">
                    <group colspan="4" col="6">
                        <field name="name" select="1" string="Reference"/>
                        <field name="date_planned" select="1"/>
                        <field name="origin" select="1"/>
                        <field name="product_id" on_change="product_id_change(product_id)" select="1"/>
                        <field name="product_qty"/>
                        <group colspan="2" col="3">
                        <field name="product_uom" widget="selection"/>
                        <button type="action"
                            name="%(mrp.action_change_production_qty)d"
                            string="Change Qty" states="ready,confirmed" />
                        </group>
                        <label string="" colspan="2"/>
                        <field name="product_uos_qty" groups="product.group_uos,base.group_extended"/>
                        <group colspan="2" col="3" groups="product.group_uos,base.group_extended">
                            <field name="product_uos" widget="selection"/>
                            <label string=""/>
                        </group>
                    </group>

                    <notebook colspan="4">
                        <page string="Consumed Products">
                            <field name="bom_id" domain="[('product_id','=',product_id),('bom_id','=',False)]" on_change="bom_id_change(bom_id)" />
                            <field name="routing_id" groups="base.group_extended" select="1" widget="selection"/>
                            <field name="location_src_id" domain="[('usage','=','internal')]" widget="selection" on_change="location_id_change(location_src_id,location_dest_id)"/>
                            <field name="location_dest_id" domain="[('usage','=','internal')]" widget="selection"/>
                            <separator string="" colspan="4"/>

                            <field colspan="2" name="move_lines" nolabel="1" widget="one2many_list"
                                mode="tree,form" height="275" domain="[('state','&lt;&gt;', ('done', 'cancel'))]">
                                <tree string="Products to Consume">
                                    <field name="product_id" />
                                    <field name="product_qty"  string="Qty"/>
                                    <field name="product_uom"  string="UOM"/>
                                    <field name="location_id"  string="Source Loc."/>
                                    <field name="state" invisible="1"/>
                                    <button name="%(stock.move_consume)d"
                                        string="Consume Products" type="action"
                                        icon="gtk-go-forward" context="{'consume': True}"
                                        states="draft,waiting,confirmed,assigned" />
                                    <button name="%(stock.move_scrap)d"
                                        string="Scrap Products" type="action"
                                        icon="gtk-convert" context="{'scrap': True}"
                                        states="draft,waiting,confirmed,assigned"/>
                                </tree>
                            </field>

                            <field colspan="2" name="move_lines2" nolabel="1"  domain="[('state','in', ('done', 'cancel'))]"
                                       widget="one2many_list" mode="tree,form" height="275">
                                   <tree string="Consumed Products" editable="bottom" colors="red:scraped==True">
                                       <field name="product_id" readonly="1"/>
                                       <field name="product_qty" readonly="1" string="Qty"/>
                                    <field name="product_uom" readonly="1" string="UOM"/>
                                    <field name="location_dest_id"  readonly="1" string="Destination Loc."/>
                                    <field name="prodlot_id" />
                                    <field name="state" invisible="1"/>
                                    <field name="scraped" invisible="1"/>
                                       <button
                                           name="%(stock.track_line)d"
                                           string="Split in production lots"
                                           type="action" icon="gtk-justify-fill"
                                           states="done,cancel" />
                                       <button
                                           name="%(stock.move_scrap)d"
                                           string="Scrap Products" type="action"
                                           icon="gtk-convert"
                                           states="done,cancel"/>
                                   </tree>
                               </field>

                            <group col="9" colspan="4">
                                <field name="state"/>
                                <button name="action_compute" states="draft" string="Compute Data" type="object" icon="gtk-execute"/>
                                <button name="button_confirm" states="draft" string="Confirm Production" icon="gtk-apply"/>
                                <button name="button_produce" states="ready" string="Mark as Started" icon="gtk-execute"/>
                                <button name="%(act_mrp_product_produce)d" states="in_production" string="Produce" icon="gtk-ok" type="action"/>
                                <button name="force_production" states="confirmed,picking_except" string="Force Reservation" type="object" icon="gtk-jump-to"/>
                                <button name="button_cancel" states="draft,ready,confirmed,in_production,picking_except" string="Cancel" icon="gtk-cancel"/>
                                <button name="button_recreate" states="picking_except" string="Recreate Picking" icon="gtk-convert"/>
                            </group>
                        </page>
                        <page string="Finished Products">
                            <field colspan="2" name="move_created_ids" nolabel="1" widget="one2many_list"
                                mode="tree,form" height="275" domain="[('state','&lt;&gt;', ('done', 'cancel'))]">
                                <tree string="Products to Finish">
                                    <field name="product_id" />
                                    <field name="product_qty"  string="Qty"/>
                                    <field name="product_uom"  string="UOM"/>
                                    <field name="location_id"  string="Source Loc."/>
                                    <field name="state" invisible="1"/>
                                    <button name="%(stock.move_consume)d"
                                        string="Consume Products" type="action"
                                        icon="gtk-go-forward" context="{'consume': True}"
                                        states="draft,waiting,confirmed,assigned" />
                                    <button name="%(stock.move_scrap)d"
                                        string="Scrap Products" type="action"
                                        icon="gtk-convert" context="{'scrap': True}"
                                        states="draft,waiting,confirmed,assigned" />
                                </tree>
                            </field>

                            <field colspan="2" name="move_created_ids2" nolabel="1"  domain="[('state','in', ('done', 'cancel'))]"
                                       widget="one2many_list" mode="tree,form" height="275">
                                   <tree string="Finished Products" editable="bottom" colors="red:scraped==True">
                                       <field name="product_id" readonly="1"/>
                                       <field name="product_qty" readonly="1" string="Qty"/>
                                    <field name="product_uom" readonly="1" string="UOM"/>
                                    <field name="location_dest_id"  readonly="1" string="Destination Loc."/>
                                       <field name="prodlot_id" />
                                    <field name="state" invisible="1"/>
                                    <field name="scraped" invisible="1"/>
                                       <button name="%(stock.track_line)d"
                                            string="Split in production lots" type="action" icon="gtk-justify-fill" states="done,cancel"/>
                                       <button name="%(stock.move_scrap)d"
                                           string="Scrap Products" type="action" icon="gtk-convert"
                                           states="done,cancel" />
                                   </tree>
                               </field>
                        </page>
                        <page string="Work Orders" groups="base.group_extended">
                            <field colspan="4" name="workcenter_lines" nolabel="1">
                                <form string="Production Work Centers">
                                    <field colspan="4" name="name" select="1"/>
                                    <field colspan="4" name="workcenter_id" select="1"/>
                                    <field name="sequence"/>
                                    <field name="cycle"/>
                                    <field name="hour"/>
                                </form>
                                <tree string="Production Work Centers">
                                    <field name="sequence"/>
                                    <field name="name"/>
                                    <field name="workcenter_id"/>
                                    <field name="cycle"/>
                                    <field name="hour"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Scheduled Products">
                            <field colspan="4" name="product_lines" nolabel="1" widget="one2many_list"/>
                        </page>
                        <page string="Extra Information">
                            <field name="company_id" select="1" groups="base.group_multi_company" widget="selection"/>
                            <field name="priority" groups="base.group_extended"/>
                            <newline/>
                            <field name="date_start"/>
                            <field name="date_finnished"/>
                            <field name="picking_id" groups="base.group_extended"/>
                            <field name="move_prod_id" groups="base.group_extended"/>
                            <field name="sale_name" groups="base.group_extended"/>
                            <field name="sale_ref" groups="base.group_extended"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        <record id="view_mrp_production_filter" model="ir.ui.view">
            <field name="name">mrp.production.select</field>
            <field name="model">mrp.production</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Production">
                   <group col='9' colspan='4'>
                       <filter icon="terp-mrp" string="Draft"
                           domain="[('state','=','draft')]"
                           help="Non confirmed manufacturing orders"/>
                       <filter icon="terp-mrp" string="Current" name="Current"
                           default="1"
                           domain="[('state','in',('confirmed','ready'))]"
                           help="Manufacturing Orders which are waiting for raw materials"/>
                       <filter icon="terp-mrp" string="Ready"
                           domain="[('state','=','ready')]"
                           help="Manufacturing Orders which are ready to produce" />
                       <filter icon="terp-mrp" string="In Production"
                           domain="[('state','=','in_production')]"
                           help="Manufacturing Orders which are in production" />
                       <separator orientation="vertical"/>
                       <filter icon="terp-mrp" string="Late"
                           domain="['&amp;', ('date_planned::date','&lt;', current_date), ('state', 'in', ('draft', 'confirmed', 'ready'))]"
                           help="Production started late" />
                       <separator orientation="vertical"/>
                       <field name="name"/>
                       <field name="product_id"/>
                       <field name="routing_id" groups="base.group_extended"/>
                       <field name="origin"/>
                    </group>
                    <newline/>
                    <group expand="1" string="Group By" colspan="10" col="8">
                        <filter string="Product" icon="terp-mrp" domain="[]" context="{'group_by':'product_id'}"/>
                        <filter string="State" icon="terp-mrp" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="Routing" icon="terp-mrp" domain="[]" context="{'group_by':'routing_id'}" groups="base.group_extended"/>
                        <separator orientation="vertical"/>
                        <filter string="Date" icon="terp-mrp" domain="[]" context="{'group_by':'date_planned'}"/>
                    </group>
               </search>
            </field>
        </record>

        <record id="mrp_production_action" model="ir.actions.act_window">
            <field name="name">Manufacturing Orders</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">mrp.production</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph,gantt</field>
            <field name="view_id" eval="False"/>
            <field name="search_view_id" ref="view_mrp_production_filter"/>
            <field name="context">{'search_default_Current':1}</field>
        </record>
        <menuitem action="mrp_production_action" id="menu_mrp_production_action" parent="menu_mrp_manufacturing" sequence="1"/>

        <record id="mrp_production_action2_gantt" model="ir.actions.act_window">
            <field name="name">Manufacturing Orders Planning</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">mrp.production</field>
            <field name="view_type">form</field>
            <field name="view_mode">gantt,tree,form,calendar,graph</field>
            <field name="domain">[('state','in',('ready','confirmed','in_production'))]</field>
        </record>

        <record id="mrp_production_action2" model="ir.actions.act_window">
            <field name="name">Manufacturing Orders To Start</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">mrp.production</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph,gantt</field>
            <field name="domain">[('state','=','ready')]</field>
            <field name="filter" eval="True"/>
            <field name="search_view_id" ref="view_mrp_production_filter"/>
        </record>

        <record id="mrp_production_action3" model="ir.actions.act_window">
            <field name="name">Manufacturing Orders in Progress</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">mrp.production</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph,gantt</field>
            <field name="domain">[('state','=','in_production')]</field>
            <field name="filter" eval="True"/>
            <field name="search_view_id" ref="view_mrp_production_filter"/>
        </record>

        <record id="mrp_production_action4" model="ir.actions.act_window">
            <field name="name">Manufacturing Orders Waiting Products</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">mrp.production</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar,graph,gantt</field>
            <field name="domain">[('state','=','confirmed')]</field>
            <field name="filter" eval="True"/>
            <field name="search_view_id" ref="view_mrp_production_filter"/>
        </record>

        <record id="mrp_production_lot_form_view" model="ir.ui.view">
            <field name="name">mrp.production.lot.line.form</field>
            <field name="model">mrp.production.lot.line</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Production Products">
                    <field colspan="4" name="move_id" on_change="onchange_lot_line_id(lot_id)"/>
                    <field name="name"/>
                    <field name="product_id"/>
                    <field name="product_qty"/>
                    <field name="product_uom"/>
                    <field name="product_uos_qty" groups="product.group_uos"/>
                    <field name="product_uos" groups="product.group_uos"/>
                    <field name="tracking_id"/>
                </form>
            </field>
        </record>
        <record id="mrp_production_lot_tree_view" model="ir.ui.view">
            <field name="name">mrp.production.lot.line.tree</field>
            <field name="model">mrp.production.lot.line</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Production Products Consommation">
                    <field name="product_id"/>
                    <field name="product_qty"/>
                    <field name="product_uom"/>
                    <field name="product_uos_qty" groups="product.group_uos"/>
                    <field name="product_uos" groups="product.group_uos"/>
                    <field name="tracking_id"/>
                </tree>
            </field>
        </record>

        <record id="mrp_production_product_form_view" model="ir.ui.view">
            <field name="name">mrp.production.product.line.form</field>
            <field name="model">mrp.production.product.line</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Scheduled Products">
                    <field name="name"/>
                    <field name="product_id"/>
                    <field name="product_qty"/>
                    <field name="product_uom"/>
                    <field name="product_uos_qty" groups="product.group_uos"/>
                    <field name="product_uos" groups="product.group_uos"/>
                </form>
            </field>
        </record>
        <record id="mrp_production_product_tree_view" model="ir.ui.view">
            <field name="name">mrp.production.product.line.tree</field>
            <field name="model">mrp.production.product.line</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Scheduled Products">
                    <field name="product_id"/>
                    <field name="product_qty"/>
                    <field name="product_uom"/>
                    <field name="product_uos_qty" groups="product.group_uos,base.group_extended"/>
                    <field name="product_uos" groups="product.group_uos,base.group_extended"/>
                </tree>
            </field>
        </record>

        <!--
        	Procurements
        -->

        <record id="view_procurement_form_inherit" model="ir.ui.view">
        	<field name="name">mrp.procurement.form.inherit</field>
        	<field name="model">mrp.procurement</field>
        	<field name="inherit_id" ref="mrp_procurement.mrp_procurement_form_view"/>
        	<field name="type">form</field>
        	<field name="arch" type="xml">
        		<xpath expr="/form/notebook/page/field[@name='move_id']" position="before">
        			<field name="bom_id" domain="[('product_id','=',product_id),('bom_id','=',False)]"/>
        		</xpath>
        	</field>
        </record>
        <act_window
            id="action_product_bom_structure"
            name="Product BoM Structure"
            domain="[('product_id', '=', active_id),('bom_id','=',False)]"
            view_type="tree"
            view_id="mrp_bom_tree_view"
            res_model="mrp.bom"
            src_model="product.product"/>

        <act_window
            domain="[('product_id', '=', active_id),('bom_id','=',False)]"
            id="act_product_product_2_mrp_bom"
            name="Bill of Materials"
            res_model="mrp.bom"
            src_model="product.product"/>

        <!-- Menu for Resource for MRP-->
        <menuitem icon="terp-mrp" id="base.menu_mrp_root" name="Manufacturing" sequence="3"/>

        <menuitem id="menu_pm_resources_mrp" name="Resources" parent="base.menu_mrp_root"
            groups="base.group_extended"
            sequence="2"/>
        <menuitem action="resource.action_resource_resource_tree" id="menu_view_resource_search_mrp" parent="menu_pm_resources_mrp" sequence="1"/>
        <menuitem action="resource.action_resource_calendar_form" id="menu_view_resource_calendar_search_mrp" parent="menu_mrp_configuration" sequence="1"/>
        <menuitem action="resource.action_resource_calendar_leave_tree" id="menu_view_resource_calendar_leaves_search_mrp" parent="menu_pm_resources_mrp" sequence="1"/>

    </data>
</openerp>
