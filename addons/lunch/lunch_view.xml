<?xml version="1.0"?>
<openerp>
    <data>
          <menuitem icon="STOCK_PREFERENCES" id="base.menu_tools" name="Tools" sequence="15"/>
          <menuitem name="Lunch Order" parent="base.menu_tools"
              id="menu_lunch" sequence="1" />

          <menuitem name="Reporting" parent="base.menu_tools"
              id="base.menu_lunch_reporting" sequence="5" />

          <menuitem name="Lunch Orders"
              parent="base.menu_lunch_reporting"
              id="menu_lunch_reporting_order" sequence="1" />

          <menuitem name="Configuration" parent="base.menu_tools"
              id="base.menu_lunch_survey_root" sequence="6" />

          <menuitem name="Lunch" parent="base.menu_lunch_survey_root"
              id="menu_lunch_category_root_configuration" sequence="1" />

<!-- Lunch order Form view -->

          <record model="ir.ui.view" id="view_lunch_order_form">
            <field name="name">Order</field>
            <field name="model">lunch.order</field>
            <field name="arch" type="xml">
                <form string="Order">
                    <group colspan="2" col="4">
                        <field name="user_id" select="1"/>
                        <field name="date" select="1"/>
                        <field name="product" select="1" on_change="onchange_product(product)"/>
                        <field name="price"/>
                        <field name="descript"/>
                        <field name="cashmove"/>
                        <field name="state"/>
                    </group>
                </form>
            </field>
        </record>

<!-- Lunch order Tree view -->

        <record model="ir.ui.view" id="view_lunch_order_tree">
            <field name="name">Order</field>
            <field name="model">lunch.order</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Order">
                    <field name="user_id"/>
                    <field name="product"/>
                    <field name="date"/>
                    <field name="cashmove"/>
                    <field name="state"/>
                    <field name="descript"/>
                    <field name="price" sum="Total price"/>
                </tree>
            </field>
        </record>
        
        <record id="view_lunch_order_filter" model="ir.ui.view">
	        <field name="name">lunch-order Search</field>
	        <field name="model">lunch.order</field>
	        <field name="type">search</field>
	        <field name="arch" type="xml">
	            <search string="Search order">
	            	<group>
		                <filter icon="terp-project"
		                    string="Draft"
		                    domain="[('state','=','draft')]"/>
		                <filter icon="terp-project"
		                    name="confirmed"
		                    string="Confirmed"
		                    domain="[('state','=','confirmed')]"/>
		                <separator orientation="vertical"/>
	                    <field name="product" widget="selection"/>
	                    <field name="user_id" select="1" widget="selection" default="1">
                        </field>
    	                <field name="date"/>
		            </group>    
	                <newline/>
	                <group expand="1" string="Group By..." colspan="14">
	                	<filter string="Product" icon="terp-purchase" domain="[]" context="{'group_by':'product'}"/>
	                    <filter string="State" icon="terp-purchase" domain="[]" context="{'group_by':'state'}"/>
	                    <filter string="Order date" icon="terp-purchase" domain="[]" context="{'group_by':'date'}"/>
	                    <filter string="User" name="user" icon="terp-partner" domain="[]" context="{'group_by':'user_id'}"/>
	                </group>
 					<newline/>	                
	            </search>
	        </field>
	    </record>
        
<!-- Lunch order Action -->

        <record model="ir.actions.act_window" id="action_lunch_order_form">
                <field name="name">Lunch Orders</field>
                <field name="res_model">lunch.order</field>
                <field name="view_mode">tree,form</field>
                <field name="search_view_id" ref="view_lunch_order_filter"/>
        </record>

        <menuitem name="Lunch Order" parent="menu_lunch"
            id="menu_lunch_order_form" action="action_lunch_order_form" />

<!--  Cash Box Form view  -->

        <record model="ir.ui.view" id="view_lunch_cashbox_form">
            <field name="name">CashBox</field>
            <field name="model">lunch.cashbox</field>
            <field name="arch" type="xml">
                <form string="CashBox">
                    <field name="name" select="1"/>
                    <field name="manager" select="1"/>
                </form>
            </field>
        </record>

<!--  Cash Box Tree view  -->

        <record model="ir.ui.view" id="view_lunch_cashbox_tree">
            <field name="name">CashBox</field>
            <field name="model">lunch.cashbox</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="CashBox" colors="red:sum_remain&lt;=0">
                    <field name="name" select="1"/>
                    <field name="manager" select="1"/>
                    <field name="sum_remain" select="1"/>
                </tree>
            </field>
        </record>

<!--  Cash Box Action  -->

        <record model="ir.actions.act_window" id="action_lunch_cashbox_form">
                <field name="name"> CashBox </field>
                <field name="res_model">lunch.cashbox</field>
        </record>

        <menuitem name="CashBox"
            parent="menu_lunch_category_root_configuration"
            id="menu_lunch_cashbox_form"
            action="action_lunch_cashbox_form" />

<!-- Cash Move Form view  -->

        <record model="ir.ui.view" id="view_lunch_cashmove_form">
            <field name="name">CashMove</field>
            <field name="model">lunch.cashmove</field>
            <field name="arch" type="xml">
                <form string="CashMove">
                    <field name="name" select="1"/>
                    <field name="create_date" select="1"/>
                    <field name="user_cashmove" select="1"/>
                    <field name="box" select="1"/>
                    <field name="amount"/>
                    <field name="active" select="1"/>
                </form>
            </field>
        </record>

<!-- Cash Move Tree view  -->

        <record model="ir.ui.view" id="view_lunch_cashmove_tree">
            <field name="name">CashMove</field>
            <field name="model">lunch.cashmove</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="CashMove" editable="top">
                    <field name="name" select="1" required="1"/>
                    <field name="user_cashmove" select="1"/>
                    <field name="amount" select="1" sum="Total amount"/>
                    <field name="box" select="1"/>
                    <field name="create_date"/>
                </tree>
            </field>
        </record>
        
                
        <record id="view_lunch_cashmove_filter" model="ir.ui.view">
	        <field name="name">CashMove Search</field>
	        <field name="model">lunch.cashmove</field>
	        <field name="type">search</field>
	        <field name="arch" type="xml">
	            <search string="Search order">
	            	<group>
	                    <field name="name"/>
	                    <field name="user_cashmove"  widget="selection" default="1"/>
    	                <field name="amount"/>
    	                <field name="box" widget="selection"/>
		            </group>    
	                <newline/>
	                <group expand="1" string="Group By..." colspan="14">
	                	<filter string="CashBox" icon="terp-purchase" domain="[]" context="{'group_by':'box'}"/>
	                    <filter string="Order date" icon="terp-purchase" domain="[]" context="{'group_by':'create_date'}"/>
	                    <filter string="User" name="user" icon="terp-partner" domain="[]" context="{'group_by':'user_cashmove'}"/>
	                </group>
 					<newline/>	                
	            </search>
	        </field>
	    </record>

<!-- Cash Move Action  -->

        <record model="ir.actions.act_window" id="action_lunch_cashmove_form">
                <field name="name">CashMove</field>
                <field name="res_model">lunch.cashmove</field>
                 <field name="search_view_id" ref="view_lunch_cashmove_filter"/>
        </record>

        <menuitem name="Cash Moves" parent="menu_lunch"
            id="menu_lunch_cashmove_form"
            action="action_lunch_cashmove_form" />

<!-- Lunch Category Form view  -->

        <record model="ir.ui.view" id="view_lunch_category_form">
            <field name="name"> Category of product </field>
            <field name="model">lunch.category</field>
            <field name="arch" type="xml">
                <form string="Category">
                    <separator string="Category related to Products" colspan="4"/>
                    <field name="name" select="1"/>
                </form>
            </field>
        </record>

<!-- Lunch Category Tree view  -->

        <record model="ir.ui.view" id="view_lunch_category_tree">
            <field name="name">Category</field>
            <field name="model">lunch.category</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Order">
                    <field name="name" select="1"/>
                </tree>
            </field>
        </record>

<!-- Lunch Category Action  -->

        <record model="ir.actions.act_window" id="action_lunch_category_form">
            <field name="name"> Category of product </field>
            <field name="res_model">lunch.category</field>
        </record>

<!-- Lunch Product Form view  -->

        <record model="ir.ui.view" id="view_lunch_product_form">
            <field name="name">Products</field>
            <field name="type">form</field>
            <field name="model">lunch.product</field>
            <field name="arch" type="xml">
                <form string="Products">
                    <field name="name" select="1"/>
                    <field name="category_id" widget='selection' select="1"/>
                    <field name="description" select="1"/>
                    <field name="price" select="1"/>
                    <field name="active" select="1"/>
                </form>
            </field>
        </record>

<!-- Lunch Product Tree view  -->

        <record model="ir.ui.view" id="view_lunch_product_tree">
            <field name="name">Products</field>
            <field name="model">lunch.product</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Products">
                    <field name="name" select="1"/>
                    <field name="category_id" select="1"/>
                    <field name="description" select="1"/>
                    <field name="price" select="1"/>
                </tree>
            </field>
        </record>

<!-- Lunch Product Action  -->

        <record model="ir.actions.act_window" id="action_lunch_product_form">
            <field name="name">Product</field>
            <field name="res_model">lunch.product</field>
        </record>

        <menuitem name="Tools/Lunch/Configuration/Products"
            id="menu_lunch_product_form" action="action_lunch_product_form"
            sequence="1" />

        <menuitem name="Products"
            parent="menu_lunch_category_root_configuration"
            id="menu_lunch_product_form" action="action_lunch_product_form"
            sequence="2" />

        <menuitem name="Category of product"
            parent="menu_lunch_category_root_configuration"
            id="menu_lunch_category_form"
            action="action_lunch_category_form" sequence="1" />

<!-- Lunch Amount Tree view -->

        <record model="ir.ui.view" id="view_report_lunch_amount_tree">
            <field name="name">Lunch amount</field>
            <field name="model">report.lunch.amount</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Box Amount by User">
                    <field name="box" select="1"/>
                    <field name="user_id" select="1"/>
                    <field name="amount" select="1" sum="Total box" />
                </tree>
            </field>
        </record>
        
        <record id="view_order_product_graph" model="ir.ui.view">
	         <field name="name">Lunch.amount.report.graph</field>
	         <field name="model">report.lunch.amount</field>
	         <field name="type">graph</field>
	         <field name="arch" type="xml">
	            <graph orientation="vertical" string="Case Position by User" type="bar">
                    <field name="user_id"/>
                    <field name="amount"/>
                </graph>
	         </field>
        </record>

<!--  Lunch Amount search view -->


        <record id="view_report_lunch_amount_filter" model="ir.ui.view">
	        <field name="name">Lunch amount Search</field>
	        <field name="model">report.lunch.amount</field>
	        <field name="type">search</field>
	        <field name="arch" type="xml">
	            <search string="Search lunch amount">
	            	<group>
						<field name="user_id" widget="selection" default="1">
						</field>	
						<field name="box" widget="selection"/>
						<field name="amount"/>
		            </group>    
	                <newline/>
	                <group expand="1" string="Group By..." colspan="14">
	                	<filter string="CashBox" name="cashbox" icon="terp-purchase" domain="[]" context="{'group_by':'box'}"/>
	                    <filter string="User" name="user" icon="terp-partner" domain="[]" context="{'group_by':'user_id'}"/>
	                </group>
 					<newline/>	                
	            </search>
	        </field>
	    </record>

<!-- Lunch Amount Action -->

        <record model="ir.actions.act_window" id="action_report_lunch_amount_tree">
            <field name="name">Lunch amount</field>
            <field name="res_model">report.lunch.amount</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,graph</field>
            <field name="search_view_id" ref="view_report_lunch_amount_filter"/>
            <field name="context">{'search_default_user':1, 'group_by_no_leaf':1,'group_by':[]}</field>
        </record>

        <menuitem name="Cash Position by User"
            parent="menu_lunch_reporting_order"
            action="action_report_lunch_amount_tree"
            id="menu_lunch_report_amount_tree" />

    </data>
</openerp>


