<?xml version="1.0" encoding="UTF-8"?>
<template>

    <div t-name="Wall" class="oe_mail_wall">
        <table class="oe_view_manager_header">
            <tr class="oe_header_row">
                <td><h2 class="oe_view_title">All Feeds</h2></td>
                <td><div class="oe_view_manager_view_search" t-opentag="true"/></td>
            </tr>
        </table>
        <div class="oe_mail_wall_left">
            <div class="oe_mail_wall_act">
                <img class="oe_mail_msg_image oe_left" alt="User img"/>
                <textarea class="oe_mail oe_mail_wall_action_textarea" placeholder="What are you working on?"/>
                <button class="oe_right oe_mail_wall_button_comment" type="button">Post comment</button>
            </div>
            <div class="oe_clear"></div>
            <ul class="oe_mail_wall_threads">
            </ul>
            <div class="oe_mail_wall_more">
                <button class="oe_mail_wall_button_more" type="button">See more discussions</button>
            </div>
        </div>
        <div class="oe_mail_wall_right"></div>
    </div>

    <t t-name="WallThreadContainer">
    </t>

    <div t-name="RecordThread" class="oe_mail_recthread">
        <h4>History and Comments</h4>
        <div class="oe_mail_recthread_left"></div>
        <div class="oe_mail_recthread_right">
            <div class="oe_mail_recthread_actions">
                <button type="button" class="oe_mail_button_follow oe_mail_button_mouseout">Not following</button>
                <button type="button" class="oe_mail_button_unfollow oe_mail_button_mouseout">Following</button>
                <button type="button" class="oe_mail_button_followers">Display followers</button>
            </div>
            <div class="oe_mail_recthread_followers">
                <h4>Followers</h4>
                <ul class="oe_mail_followers_display"></ul>
            </div>
        </div>
    </div>

    <div t-name="Thread" class="oe_mail oe_mail_thread">
        <div class="oe_mail_thread_act">
            <img class="oe_mail_msg_image oe_left" alt="User img"/>
            <div class="oe_mail_msg_content">
                <textarea class="oe_mail oe_mail_action_textarea" placeholder="Add your comment here..." onfocus="this.value = '';"/>
            </div>
        </div>
        <div class="oe_mail_thread_display"></div>
        <div class="oe_mail_thread_more">
            <button class="oe_mail_button_more" type="button">Load more messages</button>
        </div>
    </div>

    <!-- default layout -->
    <div t-name="mail.Thread.default" class="oe_mail oe_mail_thread_msg">
        <div t-attf-class="oe_mail_msg_#{record.type}">
            <img t-if="record.type == 'email'" class="oe_email_icon oe_left" src="/mail/static/src/img/email_icon.png"/>
            <img t-if="record.type == 'notification' || record.type == 'comment'" class="oe_mail_msg_image oe_left" t-att-src="record.mini_url"/>
            <div class="oe_mail_msg_content">
                <t t-call="mail.Thread.default.NoteDisplay"/>
            </div>
            <t t-if="record.type == 'tmp'"><t t-call="mail.Thread.default.ThreadDisplay"/></t>
        </div>
    </div>

    <t t-name="mail.Thread.default.NoteDisplay">
        <span class="oe_dropdown_toggle oe_dropdown_arrow">
            <ul class="oe_dropdown_menu">
                <t t-if="display['show_delete']">
                    <t t-if="thread._is_author(record.user_id[0])">
                        <li><a href="#" t-attf-data-id='{record.id}' class="oe_mail_msg_delete">Delete</a></li>
                    </t>
                </t>
                <t t-if="display['show_hide']">
                    <t t-if="!(thread._is_author(record.user_id[0]))">
                        <li><a href="#" t-attf-data-id='{record.id}' class="oe_mail_msg_hide">Hide</a></li>
                    </t>
                </t>
            </ul>
        </span>
        
        <div class="oe_mail_msg">
             <t t-if="record.subject">
                <h1 class="oe_mail_msg_title">
                    <a href="#" class="oe_mail_internal_link"><t t-raw="record.subject"/></a>
                </h1>
            </t>
            
            <p class="oe_mail_msg_subtitle">
                <t t-if="params.thread_level > 0">
                    <a href="#" t-attf-data-res-model='{params.res_model}' t-attf-data-res-id='{params.res_id}' class="oe_mail_internal_link"><t t-raw="record.record_name"/></a>
                     路 
                </t>
                <span class="oe_mail_msg_author"><a href="#" data-res-model='res.users' t-attf-data-res-id='{record.user_id[0]}' class="oe_mail_internal_link"><t t-raw="record.user_id[1]"/></a></span>
                 路 
                <span class="oe_mail_msg_date" t-att-title="record.date"><t t-raw="record.timerelative"/></span>
            </p>
            
            <div class="oe_mail_msg_body"><t t-raw="record.body"/></div>
            <t t-if="record.tr_body">
                <div class="oe_mail_msg_body_short"><t t-raw="record.tr_body"/></div>
            </t>
            
            <ul class="oe_mail_msg_footer">
              <t t-if="display['show_reply']">
                <li><a href="#" class="oe_mail_msg_reply">Reply</a> 路 </li>
              </t>
              <li><a href="#">Like</a> 路 </li>
              <t t-if="record.attachment_ids.length > 0">
                <li>
                    <a href="#" class="oe_mail_msg_view_attachments">
                        <t t-if="record.attachment_ids.length == 1">Attachment</t>
                        <t t-if="record.attachment_ids.length > 1">Attachments (<t t-raw="record.attachment_ids.length"/>)</t>
                    </a>
                </li>
              </t>
            </ul>
            
            <t t-if="record.attachment_ids.length > 0">
                <div class="oe_clear"></div>
                
                <ul class="oe_mail_msg_attachments">
                    <t t-foreach="record.attachments" t-as="attachment">
                        <li>
                            <a t-att-href="attachment.url">
                                <t t-raw="attachment.name"/>
                            </a>
                        </li>
                    </t>
                </ul>
            </t>
        </div>
    </t>

</template>
