<?xml version="1.0"?>
<openerp>
    <data>
        <record model="ir.ui.view" id="event_sale_order">
             <field name="name">event.product</field>
             <field name="model">product.product</field>
             <field name="type">form</field>
             <field name="inherit_id" ref="product.product_normal_form_view" />
             <field name="arch" type="xml">
                <field name="purchase_ok" position="after">
                    <field name="event_ok" on_change="onchange_event_ok(event_ok, context)"/>
                </field>
                <field name='supply_method' position='after'>
                    <field name="event_type_id" attrs="{'readonly': [('event_ok', '=', False)]}"/>
                </field>
             </field>
        </record>

        <record model="ir.ui.view" id="event_order_line">
             <field name="name">event.sale.order</field>
             <field name="model">sale.order</field>
             <field name="type">form</field>
             <field name="inherit_id" ref="sale.view_order_form" />
             <field name="arch" type="xml">
                <xpath expr="//field[@name='discount']" position="after">
                    <field name="event_id" colspan="3" domain="[('type', 'in', list(set((event_type_id,False))))]" attrs="{'invisible': [('event_ok', '=', False)],'required': [('event_ok', '!=', False)]}"/>
                    <field name="event_type_id" invisible="1"/>
                    <field name="event_ok" invisible="1"/>
                </xpath>
             </field>
        </record>
        
        
    <!-- Events Organisation/CONFIGURATION/EVENTS PAGE VIEW -->

        <record model="ir.ui.view" id="view_event_page">
            <field name="name">Events</field>
            <field name="model">event.event</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Events"  layout="manual">
                <div class="oe_form_topbar" readonly="1">
                    <button string="Cancel Event" name="button_cancel" states="draft,confirm" type="object" icon="gtk-cancel"/>
                    <button string="Confirm Event" name="button_confirm" states="draft" type="object" icon="gtk-apply"/>
                    <button string="Event Done" name="button_done" states="confirm" type="object" icon="gtk-jump-to"/>
                    <button string="Set To Draft" name="button_draft" states="cancel,done" type="object" icon="gtk-convert"/>
                   <div class="oe_right">
                      <field name="state" nolabel="1" widget="statusbar" statusbar_visible="draft,open,done" statusbar_colors='{"pending":"blue"}'/>
                   </div>
                </div>
                <sheet string="Event Form" layout="auto">
                   <group col="2">
                     <group col="2">
                       <div class="oe_event_title">
                          <field name="name" nolabel="1" readonly="1"/>
                       </div>
                      <newline/>
                      <group colspan="4" name="venue">
                            <div class="oe_sub1"> Venue   : </div> 
                              <field name="location_id" nolabel="1" readonly="1"/> 
                      </group>
                       <field name="event_item_ids" nolabel="1">
                         <tree editable="top" string="Event Items">
                          <field name="product_id" readonly="1" />
                          <field name="sales_end_date" readonly="1"/>
                          <field name="price" readonly="1"/>
                          <!--  <field name="max_qty" readonly="1" groups="event.group_event_manager"/>-->
                          <field name="qty" attrs="{'readonly':[('product_id','=',False)]}" groups="event.group_event_user" />
                         </tree>
                       </field>
                       <newline/>
                      <div class="oe_right">
                         <button name="order_now" string="Order Now" type="object" icon="gtk-apply"/>
                      </div>
                   </group>	
                    <group>
                     <div id = "oe_mapbox" class="oe_mapbox"> </div><newline/>
                     <table>
                       <tr>
                         <td width="70px" class="oe_td_border">
                             Where
                         </td>
                         <td width="auto">
                             <field name="address_id" widget ="geo_address" nolabel="1"/>
                         </td>
                         <td width="210px">
                             <table align="right">
                              <tr>
                                <td class="oe_td_date_border">Start: </td><td><field name="date_begin" nolabel="1" readonly="1"/></td>
                              </tr>
                              <tr>
                                <td class="oe_td_date_border">End</td><td><field name="date_end" nolabel="1" readonly="1"/></td>
                              </tr>
                            </table>
                         </td>
                         
                       </tr>
                     </table>
                  </group>
                  </group>
                    <separator string="" colspan="4"/>
                      <label string="Event Details:" colspan="4"/>
                       <field name="note" colspan="4" nolabel="1" readonly="1"/>
                    </sheet>
            </form>
            </field>
        </record>

        


        <record model="ir.ui.view" id="view_event_form_inherit">
           <field name="name">Events Inherit</field>
           <field name="model">event.event</field>
           <field name="type">form</field>
          <field name="inherit_id" ref="event.view_event_form"/>
          <field name="arch" type="xml">
           <xpath expr="//page[@string='Extra Info']" position="after">
             <page string="Event Item">
             <field name="event_item_ids" nolabel="1">
             <tree editable="top" string="Event Items">
                <field name="product_id" string="Ticket Type"  domain="[('event_ok','=',True)]" on_change="onchange_product_id(product_id)"/>
                <field name="sales_end_date" />
                <field name="price"/>
                <!-- <field name="max_qty" groups="event.group_event_manager"/> --> 
                <field name="qty" attrs="{'readonly':[('product_id','=',False)]}" groups="event.group_event_user"/>
             </tree>
            </field>
            <newline/>
            <div class="oe_right">
                <button name="order_now" string="Order Now" type="object" icon="gtk-apply"/>
            </div>
             </page>
           </xpath>
          </field>
        </record>

		<record id="view_event_kanban_inherit" model="ir.ui.view">
            <field name="name">event.inherit.kanban</field>
            <field name="model">event.event</field>
            <field name="type">kanban</field>
            <field name="inherit_id" ref="event.view_event_kanban"/>
            <field name="arch" type="xml">
            	<xpath expr="//div/t/t/input[@name='subscribe']" position="replace">
            		<input type="hidden"/>
                </xpath> 
            </field>
        </record>

    </data>
</openerp>
