<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <!-- res.groups -->
        <record id="view_groups_form" model="ir.ui.view">
            <field name="name">res.groups.form</field>
            <field name="model">res.groups</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Groups">
                    <field name="category_id" select="1"/>
                    <field name="name" select="1"/>
                    <notebook colspan="4">
                        <page string="Users">
                            <field colspan="4" name="users" nolabel="1"/>
                        </page>
                        <page string="Inherited">
                            <label colspan="4" string="Users added to this group are automatically added in the following groups."/>
                            <field colspan="4" name="implied_ids" nolabel="1"/>
                        </page>
                        <page string="Menus">
                            <field colspan="4" name="menu_access" nolabel="1"/>
                        </page>
                        <page string="Access Rights">
                            <field colspan="4" name="model_access" nolabel="1">
                                <tree string="Access Rules" editable="top">
                                    <field name="model_id"/>
                                    <field name="perm_read"/>
                                    <field name="perm_write"/>
                                    <field name="perm_create"/>
                                    <field name="perm_unlink"/>
                                    <field name="name"/>
                                </tree>
                                <form string="Access Controls">
                                    <field colspan="4" name="name" select="1"/>
                                    <field name="model_id" select="1"/>
                                    <newline/>
                                    <field name="perm_read"/>
                                    <field name="perm_write"/>
                                    <field name="perm_create"/>
                                    <field name="perm_unlink"/>
                                </form>
                            </field>
                        </page>
                        <page string="Rules">
                            <field colspan="4" name="rule_groups" nolabel="1">
                                <tree string="Rules">
                                    <field name="name"/>
                                    <field name="model_id"/>
                                    <field name="global"/>
                                </tree>
                            </field>
                        </page><page string="Notes">
                            <field colspan="4" name="comment" nolabel="1"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>
        <record id="action_res_groups" model="ir.actions.act_window">
            <field name="name">Groups</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.groups</field>
            <field name="view_type">form</field>
            <field name="help">A group is a set of functional areas that will be assigned to the user in order to give them access and rights to specific applications and tasks in the system. You can create custom groups or edit the ones existing by default in order to customize the view of the menu that users will be able to see. Whether they can have a read, write, create and delete access right can be managed from here.</field>
        </record>
        <menuitem action="action_res_groups" id="menu_action_res_groups" parent="base.menu_users" groups="base.group_no_one"/>


        <!-- res.users -->
        <record id="view_users_form" model="ir.ui.view">
            <field name="name">res.users.form</field>
            <field name="model">res.users</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Users" layout="manual">
                    <sheet layout="auto">
                        <field name="id" invisible="1"/>
                        <group colspan="4" col="4" class="oe_form_group_label_border">
                            <field name="id" invisible="1"/>
                            <field name="name" select="1"/>
                            <field name="login" select="1"/>
                            <field name="new_password" password="True" attrs="{'required': [('id','=',False)]}"/>
                            <field name="active"/>
                        </group>
                        <notebook colspan="4">
                            <page string="User">
                                <group col="2" colspan="3" width="80%%">
                                    <group col="2" name="preferences" class="oe_form_group_label_border">
                                        <separator string="Preferences" colspan="2"/>
                                        <field name="context_lang"/>
                                        <field name="context_tz"/>
                                        <field name="menu_tips"/>
                                    </group>
                                    <group col="1">
                                        <group col="2" groups="base.group_no_one" class="oe_form_group_label_border">
                                            <separator string="Action" colspan="2"/>
                                            <field name="action_id"/>
                                            <field domain="[('usage','=','menu')]" name="menu_id" required="True"/>
                                        </group>
                                        <group name="default_filters" col="2" class="oe_form_group_label_border">
                                            <separator string="Default Filters" colspan="2"/>
                                            <field name="company_id" required="1" context="{'user_preference': 0}" groups="base.group_multi_company"/>
                                        </group>
                                    </group>
                                </group>
                                <group col="1" name="avatar" class="oe_form_group_label_border">
                                    <separator string="Avatar"/>
                                    <field name="avatar" widget='image' nolabel="1" on_change="onchange_avatar(avatar)"/>
                                </group>

                                <group colspan="4" col="2" class="oe_form_group_label_border">
                                    <separator string="Email Preferences" colspan="2"/>
                                    <field name="user_email" widget="email"/>
                                    <field name="signature"/>
                                </group>
                            </page>
                            <page string="Access Rights">
                                <group colspan="4" col="4" class="oe_form_group_label_border">
                                    <field nolabel="1" name="groups_id"/>
                                </group>
                            </page>
                            <page string="Allowed Companies" groups="base.group_multi_company">
                                <field colspan="4" nolabel="1" name="company_ids" select="1"/>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        <record id="view_users_tree" model="ir.ui.view">
            <field name="name">res.users.tree</field>
            <field name="model">res.users</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Users">
                    <field name="name"/>
                    <field name="login"/>
                    <field name="context_lang"/>
                    <field name="date"/>
                </tree>
            </field>
        </record>
        <record id="view_users_search" model="ir.ui.view">
            <field name="name">res.users.search</field>
            <field name="model">res.users</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Users">
                    <field name="name"/>
                    <field name="login"/>
                    <field name="company_ids" string="Company" groups="base.group_multi_company"/>
                </search>
            </field>
        </record>
        <record id="user_groups_view" model="ir.ui.view">
            <field name="name">res.users.groups</field>
            <field name="model">res.users</field>
            <field name="inherit_id" ref="view_users_form"/>
            <field name="arch" type="xml">
                <!-- dummy, will be modified by groups -->
                <field name="groups_id" position="after"/>
            </field>
        </record>
        <record id="action_res_users" model="ir.actions.act_window">
            <field name="name">Users</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.users</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_users_tree"/>
            <field name="search_view_id" ref="view_users_search"/>
            <field name="help">Create and manage users that will connect to the system. Users can be deactivated should there be a period of time during which they will/should not connect to the system. You can assign them groups in order to give them specific access to the applications they need to use in the system.</field>
        </record>
        <record id="action_res_users_view1" model="ir.actions.act_window.view">
            <field eval="10" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_users_tree"/>
            <field name="act_window_id" ref="action_res_users"/>
        </record>
        <record id="action_res_users_view2" model="ir.actions.act_window.view">
            <field eval="20" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_users_form"/>
            <field name="act_window_id" ref="action_res_users"/>
        </record>
        <menuitem action="action_res_users" id="menu_action_res_users" parent="base.menu_users"/>

        <record id="view_users_form_simple_modif" model="ir.ui.view">
            <field name="name">res.users.preferences.form</field>
            <field name="model">res.users</field>
            <field name="type">form</field>
            <field eval="18" name="priority"/>
            <field name="arch" type="xml">
                <form string="Users" layout="auto">
                    <div class="oe_form_title" colspan="4">
                        <field name="name" readonly="1" nolabel="1"/>
                        (<field name="login" readonly="1" nolabel="1"/>)
                    </div>
                    <newline/>
                    <group col="2" colspan="3">
                        <group col="2" colspan="2" name="preferences" class="oe_form_group_label_border">
                            <separator string="Preferences" colspan="2"/>
                            <field name="context_lang" readonly="0"/>
                            <field name="context_tz" readonly="0"/>
                            <field name="menu_tips" readonly="0" groups="base.group_no_one"/>
                        </group>
                        <group name="default_filters" colspan="2" col="2" class="oe_form_group_label_border">
                            <separator string="Default Filters" colspan="2"/>
                            <field name="company_id" widget="selection" readonly="0"
                                groups="base.group_multi_company" on_change="on_change_company_id(company_id)"/>
                        </group>
                    </group>
                    <group col="1">
                        <separator string="Avatar"/>
                        <field name="avatar" widget='image' nolabel="1" on_change="onchange_avatar(avatar)" readonly="0"/>
                    </group>
                    <group col="2" colspan="4" class="oe_form_group_label_border">
                        <separator string="Email Preferences" colspan="2"/>
                        <field name="user_email" widget="email" readonly="0"/>
                        <field name="signature" readonly="0"/>
                    </group>
                </form>
            </field>
        </record>
        <record id="action_res_users_my" model="ir.actions.act_window">
            <field name="name">Change My Preferences</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.users</field>
            <field name="view_type">form</field>
            <field name="view_mode">form,tree</field>
            <field name="domain">[('id','=',uid)]</field>
        </record>
        <record id="action_res_users_my_view1" model="ir.actions.act_window.view">
            <field eval="20" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="act_window_id" ref="action_res_users_my"/>
        </record>
        <record id="action_res_users_my_view2" model="ir.actions.act_window.view">
            <field eval="10" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_users_form_simple_modif"/>
            <field name="act_window_id" ref="action_res_users_my"/>
        </record>

    </data>
</openerp>
