<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <menuitem icon="terp-partner" id="menu_base_partner" name="Sales" sequence="0" groups="base.group_sale_salesman"/>
            <menuitem id="base.menu_sales" parent="base.menu_base_partner" name="Sales" sequence="1" />
            <menuitem id="menu_base_config" parent="menu_base_partner" name="Configuration" sequence="30" groups="group_system"/>
                <menuitem id="menu_config_address_book" parent="menu_base_config" name="Address Book" sequence="40" groups="group_system"/>

        <!--
          =====================
          Partner Address
          =====================
        -->

        <record id="view_res_partner_address_filter" model="ir.ui.view">
            <field name="name">res.partner.address.select</field>
            <field name="model">res.partner.address</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Contact">
                    <group>
                        <filter string="Customer" name="customer" icon="terp-personal" domain="[('is_customer_add','=','1')]" />
                        <filter string="Supplier" name="supplier"  icon="terp-personal" domain="[('is_supplier_add','=','1')]" />
                        <separator orientation="vertical"/>
                        <field name="partner_id" string="Partner"/>
                        <field name="name" />
                        <field name="country_id" />
                    </group>
                    <newline/>
                    <group expand="0" string="Group By...">
                       <filter string="Partner" icon="terp-personal" domain="[]" context="{'group_by' : 'partner_id'}" />
                       <filter string="Country" icon="terp-go-home" domain="[]" context="{'group_by' : 'country_id'}" />
                       <filter string="Type" icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'type'}" />
                   </group>
                 </search>
            </field>
        </record>

        <record id="view_partner_address_tree" model="ir.ui.view">
            <field name="name">res.partner.address.tree</field>
            <field name="model">res.partner.address</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Partner Addresses">
                    <field name="partner_id"/>
                    <field name="name"/>
                    <field name="phone"/>
                    <field name="email"/>
                    <field name="zip"/>
                    <field name="city"/>
                    <field name="country_id"/>
                    <field name="type"/>
                </tree>
            </field>
        </record>
        <record id="action_partner_addess_tree" model="ir.actions.act_window">
            <field name="name">Partner Contacts</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner.address</field>
            <field name="view_type">tree</field>
            <field name="view_id" ref="view_partner_address_tree"/>
        </record>

        <record model="ir.ui.view" id="contacts_kanban_view">
        <field name="name">res.partner.address.kanban</field>
        <field name="model">res.partner.address</field>
        <field name="type">kanban</field>
        <field name="arch" type="xml">
            <kanban>
                <field name="color"/>
                <field name="name"/>
                <field name="email"/>
                <templates>
                    <t t-name="kanban-box">
                        <t t-set="color" t-value="kanban_color(record.color.raw_value || record.name.raw_value)"/>
                        <div t-att-class="color + (record.color.raw_value == 1 ? ' oe_kanban_color_alert' : '')">
                            <div class="oe_kanban_box oe_kanban_color_border">
                                <div class="oe_kanban_box_header oe_kanban_color_bgdark oe_kanban_color_border oe_kanban_auto_height">
                                    <table class="oe_kanban_table">
                                        <tr>
                                            <td class="oe_kanban_title1" align="left" valign="middle">
                                                <field name="name"/>
                                            </td>
                                            <td valign="top" width="22">
                                                <img t-att-src="kanban_gravatar(record.email.value, 22)" class="oe_kanban_gravatar"/>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                                <div class="oe_kanban_box_content oe_kanban_color_bglight oe_kanban_box_show_onclick_trigger oe_kanban_color_border">
                                    <table class="oe_kanban_table">
                                        <tr>
                                            <td valign="top" width="22" align="left">
                                                <img src="/base/static/src/img/kanban_partner.png" width="64" height="64"/>
                                            </td>
                                            <td valign="top" align="left">
                                                <div class="oe_kanban_title2">
                                                    <field name="title"/>
                                                    <t t-if="record.title.raw_value and record.function.raw_value">,</t>
                                                    <field name="function"/>
                                                </div>
                                                <div class="oe_kanban_title3">
                                                    <field name="partner_id"/>
                                                    <t t-if="record.partner_id.raw_value and record.country_id.raw_value">,</t>
                                                    <field name="country_id"/>
                                                </div>
                                                <div class="oe_kanban_title3">
                                                    <i><field name="email"/>
                                                    <t t-if="record.phone.raw_value and record.email.raw_value">,</t>
                                                    <field name="phone"/></i>
                                                </div>
                                            </td>
                                         </tr>
                                    </table>
                                </div>
                                <div class="oe_kanban_buttons_set oe_kanban_color_border oe_kanban_color_bglight oe_kanban_box_show_onclick">
                                    <div class="oe_kanban_left">
                                        <a string="Edit" icon="gtk-edit" type="edit"/>
                                        <a string="Change Color" icon="color-picker" type="color" name="color"/>
                                        <a title="Mail" t-att-href="'mailto:'+record.email.value" style="text-decoration: none;" >
                                            <img src="/web/static/src/img/icons/terp-mail-message-new.png" border="0" width="16" height="16"/>
                                        </a>
                                    </div>
                                    <br class="oe_kanban_clear"/>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

        <record id="action_partner_address_form" model="ir.actions.act_window">
            <field name="name">Addresses</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner.address</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="context">{"search_default_customer":1}</field>
            <field name="search_view_id" ref="view_res_partner_address_filter"/>
            <field name="help">Customers (also called Partners in other areas of the system) helps you manage your address book of companies whether they are prospects, customers and/or suppliers. The partner form allows you to track and record all the necessary information to interact with your partners from the company address to their contacts as well as pricelists, and much more. If you installed the CRM, with the history tab, you can track all the interactions with a partner such as opportunities, emails, or sales orders issued.</field>
        </record>
        <record id="action_partner_address_form_view1" model="ir.actions.act_window.view">
            <field eval="10" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_partner_address_tree"/>
            <field name="act_window_id" ref="action_partner_address_form"/>
        </record>
        <record id="action_partner_address_form_view2" model="ir.actions.act_window.view">
            <field eval="20" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_partner_address_form1"/>
            <field name="act_window_id" ref="action_partner_address_form"/>
        </record>

        <!--
          =======================
          Partner Titles
          =======================
        -->
        <record id="view_partner_title_tree" model="ir.ui.view">
            <field name="name">res.partner.title.tree</field>
            <field name="model">res.partner.title</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Partner Titles">
                    <field name="name" select="1"/>
                    <field name="shortcut" select="1"/>
                </tree>
            </field>
        </record>
        <record id="view_partner_title_form" model="ir.ui.view">
            <field name="name">res.partner.title.form</field>
            <field name="model">res.partner.title</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Partner Titles">
                    <group col="4">
                        <field name="name"/>
                        <field name="shortcut"/>
                        <field name="domain"/>
                    </group>
                </form>
            </field>
        </record>

        <!--
        <record id="action_partner_title" model="ir.actions.act_window">
            <field name="name">Titles</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner.title</field>
            <field name="view_type">form</field>
        </record>
        <menuitem action="action_partner_title" id="menu_partner_title" parent="base.menu_base_config"/>
        -->

        <record id="action_partner_title_partner" model="ir.actions.act_window">
            <field name="name">Partner Titles</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner.title</field>
            <field name="view_type">form</field>
            <field name="domain">[('domain','=','partner')]</field>
            <field name="context">{'default_domain': 'partner'}</field>
            <field name="help">Manage the partner titles you want to have available in your system. The partner titles is the legal status of the company: Private Limited, SA, etc.</field>
        </record>

        <menuitem action="action_partner_title_partner" id="menu_partner_title_partner" parent="menu_config_address_book" sequence="2" groups="base.group_no_one"/>

        <record id="action_partner_title_contact" model="ir.actions.act_window">
            <field name="name">Contact Titles</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner.title</field>
            <field name="view_type">form</field>
            <field name="domain">[('domain','=','contact')]</field>
            <field name="context">{'default_domain': 'contact'}</field>
            <field name="help">Manage the contact titles you want to have available in your system and the way you want to print them in letters and other documents. Some example: Mr., Mrs. </field>
        </record>

        <menuitem action="action_partner_title_contact" id="menu_partner_title_contact" name="Contact Titles" parent="menu_config_address_book" sequence="3" groups="base.group_no_one"/>
        <!--
          =======================
          Partner
          =======================
        -->
        <record id="view_partner_tree" model="ir.ui.view">
            <field name="name">res.partner.tree</field>
            <field name="model">res.partner</field>
            <field name="type">tree</field>
            <field eval="8" name="priority"/>
            <field name="arch" type="xml">
                <tree string="Contacts">
                    <field name="name"/>
                    <field name="function" invisible="1"/>
                    <field name="phone"/>
                    <field name="email"/>
                    <field name="user_id" invisible="1"/>
                    <field name="is_company" invisible="1"/>
                    <field name="country" invisible="1"/>
                    <field name="country_id" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="view_partner_form" model="ir.ui.view">
            <field name="name">res.partner.form</field>
            <field name="model">res.partner</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Partners" validate="0">
                    <field name="photo" widget='image' class="oe_form_avatar oe_right"/>
                    <div class="oe_right oe_form_button_box" name="buttons">

                    </div>
                    <div class="oe_form_title">
                        <div class="oe_form_readonly_hidden">
                            <label for="name"/> 
                            (<field name="is_company" on_change="onchange_type(is_company)" class="oe_form_inline"/> <label for="is_company"/>)
                        </div>
                        <h1>
                            <field name="name" placeholder="Customer Name" class="oe_form_inline"/>,
                            <field name="title" domain="[('domain', '=', 'contact')]"/>
                        </h1>
                        <div class="oe_form_readonly_hidden">
                            <label for="parent_id"/> 
                        </div>
                        <h2>
                            <field name="parent_id" string="Company" attrs="{'invisible': [('is_company','=', True)]}"
                                domain="[('is_company', '=', True)]" context="{'default_is_company': True}"
                                class="oe_form_inline"
                                on_change="onchange_address(use_parent_address, parent_id)"/>, 
                            <field name="function" attrs="{'invisible': [('is_company', '=', True)]}" class="oe_form_inline"/>
                        </h2>
                        <field name="category_id" widget="many2many_tags"/>
                    </div>

                    <group>
                        <group>
                            <label for="type"/>
                            <div>
                                <field class="oe_form_inline"
                                    name="type" attrs="{'invisible': [('is_company','=', True)]}"/>
                                <label for="use_parent_address"/>
                                <field name="use_parent_address" attrs="{'invisible': [('parent_id', '=', False)]}"
                                    class="oe_form_inline"
                                    on_change="onchange_address(use_parent_address, parent_id)"/>
                            </div>

                            <label for="street" string="Address"/>
                            <div>
                                <field name="street" placeholder="Street..."/>
                                <field name="street2"/>
                                <div>
                                    <field name="zip" class="oe_form_inline" placeholder="ZIP"/>
                                    <field name="city" class="oe_form_inline" placeholder="City"/>
                                </div>
                                <field name="state_id" placeholder="State"/>
                                <field name="country_id" placeholder="Country"/>
                            </div>
                            <field name="website" widget="url" placeholder="www.openerp.com"/>
                        </group>
                        <group>
                            <field name="phone" colspan="4" placeholder="+32.81.81.37.00"/>
                            <field name="mobile" colspan="4"/>
                            <field name="fax" colspan="4"/>
                            <field name="email" widget="email" colspan="4"/>
                        </group>
                    </group>

                    <notebook colspan="4">
                        <page string="Contacts">
                            <field name="child_ids" context="{'default_parent_id': active_id}" mode="kanban">
                                <kanban>
                                    <field name="color"/>
                                    <field name="name"/>
                                    <field name="title"/>
                                    <field name="email"/>
                                    <field name="parent_id"/>
                                    <field name="is_company"/>
                                    <field name="function"/>
                                    <field name="phone"/>
                                    <field name="street"/>
                                    <field name="street2"/>
                                    <field name="photo"/>
                                    <field name="zip"/>
                                    <field name="city"/>
                                    <field name="country_id"/>
                                    <field name="mobile"/>
                                    <field name="state_id"/>
                                    <templates>
                                        <t t-name="kanban-box">
                                            <t t-set="color" t-value="kanban_color(record.color.raw_value)"/>
                                            <div t-att-class="color + (record.title.raw_value == 1 ? ' oe_kanban_color_alert' : '')">
                                                <div class="oe_module_vignette">
                                                <a type="edit">
                                                    <img t-att-src="kanban_image('res.partner', 'photo', record.id.value)" class="oe_form_avatar oe_kanban_avatar_toto"/>
                                                </a>
                                                    <div class="oe_module_desc">
                                                        <div class="oe_kanban_box_content oe_kanban_color_bglight oe_kanban_box_show_onclick_trigger oe_kanban_color_border">
                                                            <table class="oe_kanban_table">
                                                                <tr>
                                                                    <td class="oe_kanban_title1" align="left" valign="middle">
                                                                        <h4><a type="edit"><field name="name"/></a></h4>
                                                                        <i><div t-if="record.function.raw_value">
                                                                            <field name="function"/><br/></div></i>
                                                                    </td>
                                                                    <td valign="top" align="right">
                                                                        <a t-if="record.email.raw_value" title="Mail" t-att-href="'mailto:'+record.email.value" style="text-decoration: none;" >
                                                                            <img src="/web/static/src/img/icons/terp-mail-message-new.png" border="0" width="16" height="16"/>
                                                                        </a>
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </t>
                                    </templates>
                                </kanban>
                            </field>
                        </page>
                        <page string="Sales &amp; Purchases" attrs="{'invisible': [('customer', '=', False), ('supplier', '=', False)]}">
                            <group>
                                <group/>
                                    <field name="lang"/>
                                    <field name="user_id"/>
                                    <field name="date"/>
                                    <field name="company_id" groups="base.group_multi_company" widget="selection"/>
                                </group>
                                <group>
                                    <field name="customer"/>
                                    <field name="supplier"/>
                                    <field name="active"/>
                                    <field name="ref"/>
                                </group>
                            </group>
                        </page>
                        <page string="Internal Notes">
                            <field name="comment" placeholder="Internal notes about this customer..."/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

       <record id="view_res_partner_filter" model="ir.ui.view">
            <field name="name">res.partner.select</field>
            <field name="model">res.partner</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Partner">
                   <group col='10' colspan='4'>
                        <field name="name" filter_domain="['|','|',('name','ilike',self),('parent_id','ilike',self),('ref','=',self)]"/>
                        <field name="parent_id" filter_domain="[('parent_id','child_of',[self])]"/>
                        <field name="category_id"/>
                        <field name="user_id"/>
                        <filter help="My Partners" icon="terp-personal+" domain="[('user_id','=',uid)]"/>
                        <separator orientation="vertical"/>
                        <filter string="Persons" name="type_person" icon="terp-personal" domain="[('is_company','=',0)]"/>
                        <filter string="Companies" name="type_company" icon="terp-partner" domain="[('is_company','=',1)]"/>
                   </group>
                   <newline />
                   <group expand="0" string="Group By...">
                       <filter string="Salesman" icon="terp-personal" domain="[]" context="{'group_by' : 'user_id'}" />
                       <filter string="Company" context="{'group_by': 'parent_id'}"/>
                   </group>
               </search>
            </field>
        </record>

        <!-- Partner Kanban View -->
        <record model="ir.ui.view" id="res_partner_kanban_view">
            <field name="name">res.partner.kanban</field>
            <field name="model">res.partner</field>
            <field name="type">kanban</field>
            <field name="arch" type="xml">
                <kanban>
                    <field name="color"/>
                    <field name="name"/>
                    <field name="title"/>
                    <field name="email"/>
                    <field name="parent_id"/>
                    <field name="is_company"/>
                    <field name="function"/>
                    <field name="phone"/>
                    <field name="street"/>
                    <field name="street2"/>
                    <field name="photo"/>
                    <field name="zip"/>
                    <field name="city"/>
                    <field name="country_id"/>
                    <field name="mobile"/>
                    <field name="state_id"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_vignette">
                                <a type="edit">
                                    <img t-att-src="kanban_image('res.partner', 'photo', record.id.value)" class="oe_kanban_image"/>
                                </a>
                                <div class="oe_kanban_details">
                                      <h4 class="oe_partner_heading"><a type="edit"><field name="name"/></a>
                                      </h4>
                                      <ul>
                                          <li t-if="record.parent_id.raw_value and !record.function.raw_value"><field name="parent_id"/></li>
                                          <li t-if="!record.parent_id.raw_value and record.function.raw_value"><field name="function"/></li>
                                          <li t-if="record.parent_id.raw_value and record.function.raw_value"><field name="function"/> at <field name="parent_id"/></li>
                                          <li t-if="record.city.raw_value and !record.country.raw_value"><field name="city"/></li>
                                          <li t-if="!record.city.raw_value and record.country.raw_value"><field name="country"/></li>
                                          <li t-if="record.city.raw_value and record.country.raw_value"><field name="city"/>, <field name="country"/></li>
                                          <li t-if="record.mobile.raw_value"><field name="mobile"/></li>
                                          <li t-if="record.phone.raw_value">Tel: <field name="phone"/></li>
                                          <li t-if="record.mobile.raw_value">Mobile: <field name="mobile"/></li>
                                          <li t-if="record.email.raw_value"><a t-attf-href="mailto:#{record.email.raw_value}"><field name="email"/></a></li>
                                      </ul>
                                </div>
                            </div>

                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="action_partner_form" model="ir.actions.act_window">
            <field name="name">Customers</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="context">{"search_default_customer":1}</field>
            <field name="search_view_id" ref="view_res_partner_filter"/>
            <field name="help">
                Click on "Create" to add a new contact in your address book.
                &lt;p&gt;
                A contact is either a person or a company; a person can be linked to a company as a contact of that company.
                &lt;p&gt;
                You will be able to follow documents and history of your contacts (invoices, meetings, projects, etc.)
            </field>
        </record>
        <record id="action_partner_form_view1" model="ir.actions.act_window.view">
            <field eval="0" name="sequence"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="res_partner_kanban_view"/>
            <field name="act_window_id" ref="action_partner_form"/>
        </record>
        <record id="action_partner_form_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_partner_form"/>
            <field name="act_window_id" ref="action_partner_form"/>
        </record>
        <record id="action_partner_tree_view1" model="ir.actions.act_window.view">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_partner_tree"/>
            <field name="act_window_id" ref="action_partner_form"/>
        </record>
        <menuitem id="menu_partner_form" parent="base.menu_sales" action="action_partner_form" sequence="1"/>

        <record id="action_partner_customer_form" model="ir.actions.act_window">
            <field name="name">Customers</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="domain">[('customer','=',1)]</field>
            <field name="context">{'default_customer':1, 'search_default_customer':1}</field>
            <field name="filter" eval="True"/>
        </record>

        <record id="action_partner_supplier_form" model="ir.actions.act_window">
            <field name="name">Suppliers</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="domain">[]</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="context">{'search_default_supplier': 1,'default_customer': 0,'default_supplier': 1}</field>
            <field name="filter" eval="True"/>
            <field name="help">You can access all information regarding your suppliers from the supplier form: accounting data, history of emails, meetings, purchases, etc. You can uncheck the 'Suppliers' filter button in order to search in all your partners, including customers and prospects.</field>
        </record>

        <record id="action_partner_employee_form" model="ir.actions.act_window">
            <field name="name">Employees</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="domain">[('employee','=',1)]</field>
            <field name="context">{'default_customer':0, 'default_supplier':0 , 'default_employee':1}</field>
            <field name="filter" eval="True"/>
        </record>

        <record id="action_partner_other_form" model="ir.actions.act_window">
            <field name="name">Other Partners</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="domain">[('supplier','&lt;&gt;',1),('customer','&lt;&gt;',1)]</field>
            <field name="filter" eval="True"/>
        </record>

        <record id="view_payterm_form" model="ir.ui.view">
            <field name="name">res.payterm</field>
            <field name="model">res.payterm</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Payment Term">
                    <field name="name"/>
                </form>
            </field>
        </record>
        <record id="action_payterm_form" model="ir.actions.act_window">
            <field name="name">Payment term</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.payterm</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_payterm_form"/>
        </record>
        <!--
          ======================
          Categories
          ======================
        -->
        <record id="view_partner_category_form" model="ir.ui.view">
            <field name="name">Partner Categories</field>
            <field name="model">res.partner.category</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Partner Category">
                    <group col="4">
                        <field name="name"/>
                        <field name="active"/>
                        <field name="parent_id"/>
                    </group>
                    <field colspan="4" name="partner_ids" nolabel="1"/>
                </form>
            </field>
        </record>
        <record id="view_partner_category_list" model="ir.ui.view">
            <field name="name">Partner Categories</field>
            <field name="model">res.partner.category</field>
            <field name="type">tree</field>
            <field eval="6" name="priority"/>
            <field name="arch" type="xml">
                <tree string="Partner Categories">
                    <field name="complete_name"/>
                </tree>
            </field>
        </record>
        <record id="view_partner_category_tree" model="ir.ui.view">
            <field name="name">res.partner.category.tree</field>
            <field name="model">res.partner.category</field>
            <field name="type">tree</field>
            <field name="field_parent">child_ids</field>
            <field name="arch" type="xml">
                <tree toolbar="1" string="Partner Categories">
                    <field name="name"/>
                </tree>
            </field>
        </record>
        <!--
        <record id="action_partner_category" model="ir.actions.act_window">
            <field name="name">Partners by Categories</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner.category</field>
            <field name="view_type">tree</field>
            <field name="view_id" ref="view_partner_category_tree"/>
            <field name="domain">[('parent_id','=',False)]</field>
        </record>
        <menuitem action="action_partner_category" id="menu_partner_category_main" parent="base.menu_address_book" sequence="1"
            groups="base.group_no_one"/>
        -->

        <record id="action_partner_by_category" model="ir.actions.act_window">
            <field name="name">Partner Categories</field>
            <field name="res_model">res.partner</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('category_id','child_of', [active_id])]</field>
            <field name="context">{'category_id':active_id}</field>
            <field name="search_view_id" ref="view_res_partner_filter"/>
        </record>

        <record id="ir_action_partner_by_category" model="ir.values">
            <field eval="'tree_but_open'" name="key2"/>
            <field eval="'res.partner.category'" name="model"/>
            <field name="name">Open partners</field>
            <field eval="'ir.actions.act_window,%d'%action_partner_by_category" name="value"/>
        </record>

        <record id="action_partner_category_form" model="ir.actions.act_window">
            <field name="name">Partner Categories</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">res.partner.category</field>
            <field name="view_type">form</field>
            <field name="help">Manage the partner categories in order to better classify them for tracking and analysis purposes. A partner may belong to several categories and categories have a hierarchy structure: a partner belonging to a category also belong to his parent category.</field>
        </record>

        <menuitem action="action_partner_category_form" id="menu_partner_category_form" name="Partner Categories" sequence="4" parent="menu_config_address_book" groups="base.group_no_one"/>

        <act_window domain="[('partner_id', '=', active_id)]" context="{'default_partner_id':active_id}"
            id="act_res_partner_event" name="Events"
            res_model="res.partner.event"
            src_model="res.partner"
            />

    </data>
</openerp>

